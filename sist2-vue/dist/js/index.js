(function(){"use strict";var e={5978:function(e,t,s){s.d(t,{C:function(){return Qo}});s(6981),s(537);var i=s(144),a=s(2032);s(9838);i["default"].use(a.ZPm);var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.authLoading?s("div",{staticClass:"loading-page"},[s("div",{staticClass:"loading-spinners"},[s("b-spinner",{attrs:{type:"grow",variant:"primary"}}),s("b-spinner",{attrs:{type:"grow",variant:"primary"}}),s("b-spinner",{attrs:{type:"grow",variant:"primary"}})],1),s("div",{staticClass:"loading-text"},[e._v(" Loading • Chargement • 装载 ")])]):s("div",{class:e.getClass(),attrs:{id:"app"}},[s("NavBar"),e.configLoading?e._e():s("router-view")],1)},r=[],n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-navbar",["/"!==e.$route.path?s("b-navbar-brand",{attrs:{to:"/"}},[s("Sist2Icon")],1):s("b-navbar-brand",{attrs:{href:"."}},[s("Sist2Icon")],1),e.$store&&e.$store.state.sist2Info?s("span",{staticClass:"badge badge-pill version"},[e._v(" v"+e._s(e.sist2Version())),e.isDebug()?s("span",[e._v("-dbg")]):e._e(),e.isLegacy()&&!e.hideLegacy()?s("span",[e._v("-"),s("a",{attrs:{href:"https://github.com/simon987/sist2/blob/master/docs/USAGE.md#elasticsearch",target:"_blank"}},[e._v("legacyES")])]):e._e()]):e._e(),e.$store&&e.$store.state.sist2Info?s("span",{staticClass:"tagline",domProps:{innerHTML:e._s(e.tagline())}}):e._e(),s("b-button",{staticClass:"ml-auto",attrs:{to:"stats",variant:"link"}},[e._v(e._s(e.$t("stats")))]),s("b-button",{attrs:{to:"config",variant:"link"}},[e._v(e._s(e.$t("config")))]),e.$auth&&e.$auth.isAuthenticated?s("b-button",{attrs:{variant:"link"},on:{click:function(t){return e.onLogoutClick()}}},[e._v("logout")]):e._e()],1)},l=[],c=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"27.868069mm",height:"7.6446671mm",viewBox:"0 0 27.868069 7.6446671"}},[s("g",{attrs:{transform:"translate(-4.5018313,-4.1849793)"}},[s("g",{staticStyle:{fill:"currentColor","fill-opacity":"1",stroke:"none","stroke-width":"0.26458332"}},[s("path",{staticStyle:{"stroke-width":"0.26458332"},attrs:{d:"m 6.3153296,11.829646 q -0.7717014,0 -1.8134983,-0.337619 v -0.916395 q 1.0128581,0.511252 1.803852,0.511252 0.5643067,0 0.901926,-0.236334 0.3376194,-0.236333 0.3376194,-0.63183 0,-0.3424428 -0.2845649,-0.5498376 Q 6.980922,9.4566645 6.3635609,9.3264399 L 5.9921796,9.2492698 Q 5.2301245,9.0949295 4.8732126,8.7428407 4.5211238,8.3859288 4.5211238,7.7733908 q 0,-0.7765245 0.5305447,-1.1961372 0.5305447,-0.4196126 1.5096409,-0.4196126 0.829579,0 1.6061036,0.3183268 V 7.3441319 Q 7.4101809,6.9004036 6.5854251,6.9004036 q -1.1671984,0 -1.1671984,0.7958171 0,0.2604492 0.1012858,0.4147895 0.1012858,0.1495171 0.3858507,0.2556261 0.2845649,0.1012858 0.8392253,0.2122179 l 0.3569119,0.067524 q 1.3408312,0.2652724 1.3408312,1.4614098 0,0.80064 -0.5691298,1.263661 -0.5691298,0.458197 -1.5578722,0.458197 z"}}),s("path",{staticStyle:{"stroke-width":"0.26458332"},attrs:{d:"m 11.943927,5.3087694 q -0.144694,0 -0.144694,-0.144694 V 4.3296733 q 0,-0.144694 0.144694,-0.144694 h 0.694531 q 0.144694,0 0.144694,0.144694 v 0.8344021 q 0,0.144694 -0.144694,0.144694 z M 13.5645,11.728361 q -0.795817,0 -1.234722,-0.511253 -0.434082,-0.516075 -0.434082,-1.4469398 V 6.9823969 H 10.714028 V 6.2878656 h 2.069124 v 3.4823026 q 0,0.5884228 0.221864,0.8971028 0.221865,0.308681 0.6463,0.308681 h 1.036974 v 0.752409 z"}}),s("path",{staticStyle:{"stroke-width":"0.26458332"},attrs:{d:"m 18.209178,11.829646 q -0.771701,0 -1.813498,-0.337619 v -0.916395 q 1.012858,0.511252 1.803852,0.511252 0.564306,0 0.901926,-0.236334 0.337619,-0.236333 0.337619,-0.63183 0,-0.3424428 -0.284565,-0.5498376 Q 18.87477,9.4566645 18.257409,9.3264399 l -0.371381,-0.07717 Q 17.123973,9.0949295 16.767061,8.7428407 16.414972,8.3859288 16.414972,7.7733908 q 0,-0.7765245 0.530545,-1.1961372 0.530545,-0.4196126 1.509641,-0.4196126 0.829579,0 1.606103,0.3183268 v 0.8681641 q -0.757232,-0.4437283 -1.581988,-0.4437283 -1.167198,0 -1.167198,0.7958171 0,0.2604492 0.101286,0.4147895 0.101286,0.1495171 0.385851,0.2556261 0.284565,0.1012858 0.839225,0.2122179 l 0.356912,0.067524 q 1.340831,0.2652724 1.340831,1.4614098 0,0.80064 -0.56913,1.263661 -0.56913,0.458197 -1.557872,0.458197 z"}}),s("path",{staticStyle:{"stroke-width":"0.26458332"},attrs:{d:"m 25.207545,11.709068 q -0.993565,0 -1.408355,-0.40032 -0.409966,-0.405143 -0.409966,-1.3794164 V 6.9775737 H 21.947107 V 6.2878656 h 1.442117 V 4.8746874 l 0.887457,-0.3858507 v 1.7990289 h 2.016069 v 0.6897081 h -2.016069 v 2.9517579 q 0,0.5932454 0.226687,0.8344024 0.226687,0.236333 0.790994,0.236333 h 0.998388 v 0.709001 z"}}),s("path",{staticStyle:{"stroke-width":"0.26458332"},attrs:{d:"m 27.995317,11.043476 q 0,-0.178456 0.120578,-0.299035 0.274919,-0.289388 0.651123,-0.684885 0.376205,-0.4003199 0.805464,-0.8681638 0.327973,-0.356912 0.491959,-0.5353679 0.16881,-0.1832791 0.255626,-0.2845649 0.09164,-0.1012858 0.178456,-0.2073948 0.255626,-0.3086805 0.405144,-0.5257215 0.15434,-0.2170411 0.250803,-0.4292589 0.168809,-0.3762045 0.168809,-0.7524089 0,-0.5980686 -0.352089,-0.935688 -0.356911,-0.3424425 -0.979096,-0.3424425 -0.863341,0 -1.938899,0.6414768 V 4.8361023 q 0.491959,-0.2363335 0.979096,-0.3569119 0.47749,-0.1205783 0.945334,-0.1205783 0.501606,0 0.940511,0.1350477 0.438905,0.1350478 0.766878,0.4244358 0.289388,0.2556261 0.463021,0.6270074 0.173633,0.3665582 0.173633,0.829579 0,0.4726671 -0.212218,0.9501574 -0.106109,0.2411567 -0.274919,0.4726671 -0.163986,0.2266873 -0.424435,0.540191 Q 31.270225,8.501684 31.077299,8.718725 30.884374,8.9357661 30.628748,9.2106847 30.445469,9.4084332 30.286305,9.5675966 30.131965,9.72676 29.958332,9.9003928 29.7847,10.069203 29.558012,10.300713 29.336148,10.5274 29.012998,10.869843 h 3.356901 v 0.819932 h -4.374582 z"}})])])])},d=[],u={name:"Sist2Icon"},h=u,p=s(3736),m=(0,p.Z)(h,c,d,!1,null,null,null),g=m.exports,f={name:"NavBar",components:{Sist2Icon:g},methods:{tagline(){return this.$store.state.sist2Info.tagline},sist2Version(){return this.$store.state.sist2Info.version},isDebug(){return this.$store.state.sist2Info.debug},isLegacy(){return this.$store.state.sist2Info.esVersionLegacy},hideLegacy(){return this.$store.state.optHideLegacy},onLogoutClick(){this.$auth.logout()}}},b=f,v=(0,p.Z)(b,n,l,!1,null,"6c746dff",null),x=v.exports,y=s(629),_=s(9669),T=s.n(_);function S(e){return w(e._source)}function w(e){return Object.prototype.hasOwnProperty.call(e,"extension")&&""!==e["extension"]?"."+e["extension"]:""}function $(e){let t="";for(let s=0;s<e.length;s++){const i=e[s],a=e[s+1];"]"===i?"]"===a?(t+=i,s+=1):(t+=String.fromCharCode(parseInt(e.slice(s,s+2),16)),s+=2):t+=i}return t}const C=1e3,k=["k","M","G","T","P","E","Z","Y"];function z(e){if(0===e)return"0 B";if(Math.abs(e)<C)return e+" B";let t=-1;do{e/=C,++t}while(Math.abs(e)>=C&&t<k.length-1);return e.toFixed(1)+k[t]}function M(e){e=Math.floor(e);const t=Math.floor(e/3600),s=Math.floor((e-3600*t)/60),i=e-3600*t-60*s;return`${t<10?"0":""}${t}:${s<10?"0":""}${s}:${i<10?"0":""}${i}`}function I(e){const t=new Date(1e3*e);return t.getUTCFullYear()+"-"+("0"+(t.getUTCMonth()+1)).slice(-2)+"-"+("0"+t.getUTCDate()).slice(-2)}function L(e){e=e.substring(1);const t=parseInt(e,16),s=t>>16&255,i=t>>8&255,a=t>>0&255;return.2126*s+.7152*i+.0722*a}function D(e){const t=new Set,s=e.selected();for(let i=0;i<s.length;i++){if("any"===s[i].id)return["any"];-1!==s[i].text.indexOf("(")&&(s[i].values?t.add(s[i].values.slice(-1)[0]):t.add(s[i].id))}return Array.from(t)}function O(e){const t=e.selectable(),s={};for(let i=0;i<t.length;i++){let e=null;e=-1!==t[i].text.indexOf("(")&&t[i].values?t[i].values.slice(-1)[0]:t[i].id,s[e]={checked:t[i].itree.state.checked,collapsed:t[i].itree.state.collapsed}}return s}function P(e){if(0!=e.length)return e.map((e=>E(e))).join("")}function q(e){return e.replaceAll(/([IVATUF])/g,"$$$&").split("$").map((e=>A(e))).slice(1)}function E(e){return e.replace("image/","I").replace("video/","V").replace("application/","A").replace("text/","T").replace("audio/","U").replace("font/","F").replace("+",",").replace("x-","X")}function A(e){return e.replace("I","image/").replace("V","video/").replace("A","application/").replace("T","text/").replace("U","audio/").replace("F","font/").replace(",","+").replace("X","x-")}function H(){return Math.round(1e5*Math.random())}function U(e,t){for(let s=4;s<32;s++){const i=t.slice(0,s);if(1==e.filter((e=>e.id.slice(0,s)==i)).length)return i}return t}class B{constructor(e){this.baseUrl=e}getSist2Info(){return T().get(`${this.baseUrl}i`).then((e=>{const t=e.data.indices;return e.data.indices=t.map((e=>({id:e.id,name:e.name,timestamp:e.timestamp,version:e.version,idPrefix:U(t,e.id)}))),e.data}))}setHitProps(e){e["_props"]={};const t=null==e._source.mime?null:e._source.mime.split("/")[0];switch("parent"in e._source&&(e._props.isSubDocument=!0),"thumbnail"in e._source&&(e._props.hasThumbnail=!0,Number.isNaN(Number(e._source.thumbnail))?(e._props.tnNum=1,e._props.hasVidPreview=!1):(e._props.tnNum=Number(e._source.thumbnail),e._props.hasVidPreview=e._props.tnNum>1)),t){case"image":"gif"===e._source.videoc?e._props.isGif=!0:e._props.isImage=!0,"width"in e._source&&!e._props.isSubDocument&&"tiff"!==e._source.videoc&&"raw"!==e._source.videoc&&"ppm"!==e._source.videoc&&(e._props.isPlayableImage=!0);break;case"video":if("videoc"in e._source&&(e._props.isVideo=!0),e._props.isVideo){const t=e._source.videoc,s=e._source.mime;e._props.isPlayableVideo=null!=s&&s.startsWith("video/")&&!e._props.isSubDocument&&"mkv"!==e._source.extension&&"avi"!==e._source.extension&&"mov"!==e._source.extension&&"hevc"!==t&&"mpeg1video"!==t&&"mpeg2video"!==t&&"wmv3"!==t}break;case"audio":"audioc"in e._source&&!e._props.isSubDocument&&(e._props.isAudio=!0);break}}setHitTags(e){const t=[],s=null==e._source.mime?null:e._source.mime.split("/")[0];switch(s){case"image":case"video":"videoc"in e._source&&e._source.videoc&&t.push({style:"video",text:e._source.videoc.replace(" ",""),userTag:!1});break;case"audio":"audioc"in e._source&&e._source.audioc&&t.push({style:"audio",text:e._source.audioc,userTag:!1});break}"tag"in e._source&&e._source.tag.forEach((e=>{t.push(this.createUserTag(e))})),e._tags=t}createUserTag(e){const t=e.split("."),s=t.pop(),i=s,a=L(s)>50?"#000":"#fff";return{style:"user",fg:a,bg:i,text:t.join("."),rawText:e,userTag:!0}}esQuery(e){return T().post(`${this.baseUrl}es`,e).then((e=>{const t=e.data;return t.hits?.hits&&t.hits.hits.forEach((e=>{e["_source"]["name"]=$(e["_source"]["name"]),e["_source"]["path"]=$(e["_source"]["path"]),this.setHitProps(e),this.setHitTags(e)})),t}))}getMimeTypes(e){const t={mimeTypes:{terms:{field:"mime",size:1e4}}};return e?(e.size=0,e.aggs=t):e={aggs:t,size:0},this.esQuery(e).then((e=>{const t=[],s=e["aggregations"]["mimeTypes"]["buckets"];return s.sort(((e,t)=>e.key>t.key)).forEach((e=>{const s=e["key"].split("/"),i=s[0],a=s[1];let o=!1;const r={id:e["key"],text:`${a} (${e["doc_count"]})`};t.forEach((e=>{e.text===i&&(e.children.push(r),o=!0)})),o||t.push({text:i,children:[r],id:i})})),t.forEach((e=>{e.children&&e.children.sort(((e,t)=>e.id.localeCompare(t.id)))})),t.sort(((e,t)=>e.id.localeCompare(t.id))),{buckets:s,mimeMap:t}}))}_createEsTag(e,t){const s=e.split(".");return/.*\.#[0-9a-f]{6}/.test(e)?{id:s.slice(0,-1).join("."),color:s.pop(),isLeaf:!0,count:t}:{id:e,count:t,isLeaf:!1,color:void 0}}getTags(){return this.esQuery({aggs:{tags:{terms:{field:"tag",size:1e4}}},size:0}).then((e=>{const t=new Set,s=e["aggregations"]["tags"]["buckets"].sort(((e,t)=>e["key"].localeCompare(t["key"]))).map((e=>this._createEsTag(e["key"],e["doc_count"])));return s.filter((e=>!t.has(e.id)&&(t.add(e.id),!0)))}))}saveTag(e,t){return T().post(`${this.baseUrl}tag/`+t["_source"]["index"],{delete:!1,name:e,doc_id:t["_id"]})}deleteTag(e,t){return T().post(`${this.baseUrl}tag/`+t["_source"]["index"],{delete:!0,name:e,doc_id:t["_id"]})}getTreemapCsvUrl(e){return`${this.baseUrl}s/${e}/1`}getMimeCsvUrl(e){return`${this.baseUrl}s/${e}/2`}getSizeCsv(e){return`${this.baseUrl}s/${e}/3`}getDateCsv(e){return`${this.baseUrl}s/${e}/4`}}var F=new B(""),N={components:{NavBar:x},data(){return{configLoading:!1,authLoading:!0,sist2InfoLoading:!0}},computed:{...(0,y.Se)(["optTheme"])},mounted(){this.$store.dispatch("loadConfiguration").then((()=>{this.$root.$i18n.locale=this.$store.state.optLang})),this.$store.subscribe((e=>{"setOptLang"===e.type&&(this.$root.$i18n.locale=e.payload,this.configLoading=!0,window.setTimeout((()=>this.configLoading=!1),10)),"setAuth0Token"===e.type&&(this.authLoading=!1)})),F.getSist2Info().then((e=>{e.auth0Enabled?(this.authLoading=!0,Qo(e.auth0Domain,e.auth0ClientId,e.auth0Audience),this.$auth.$watch("loading",(e=>{if(!1===e){if(!this.$auth.isAuthenticated)return void this.$auth.loginWithRedirect();window.history.replaceState({},"","/"+window.location.hash),this.$store.dispatch("loadAuth0Token")}}))):this.authLoading=!1,this.setSist2Info(e),this.setIndices(e.indices)}))},methods:{...(0,y.nv)(["setSist2Info"]),...(0,y.OI)(["setIndices"]),getClass(){return{"theme-light":"light"===this.optTheme,"theme-black":"black"===this.optTheme}}}},R=N,V=(0,p.Z)(R,o,r,!1,null,null,null),Z=V.exports,Q=s(8345),G=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-container",[e.loading?s("b-card",[s("Preloader")],1):[s("b-card",[s("b-card-body",[s("b-select",{attrs:{options:e.indexOptions},scopedSlots:e._u([{key:"first",fn:function(){return[s("b-form-select-option",{attrs:{value:null,disabled:""}},[e._v(e._s(e.$t("indexPickerPlaceholder")))])]},proxy:!0}]),model:{value:e.selectedIndex,callback:function(t){e.selectedIndex=t},expression:"selectedIndex"}})],1)],1),null!==e.selectedIndex?s("b-card",{staticClass:"mt-3"},[s("b-card-body",[s("D3Treemap",{attrs:{"index-id":e.selectedIndex}})],1)],1):e._e(),null!==e.selectedIndex?s("b-card",{staticClass:"stats-card mt-3"},[s("D3MimeBarCount",{attrs:{"index-id":e.selectedIndex}}),s("D3MimeBarSize",{attrs:{"index-id":e.selectedIndex}}),s("D3DateHistogram",{attrs:{"index-id":e.selectedIndex}}),s("D3SizeHistogram",{attrs:{"index-id":e.selectedIndex}})],1):e._e()]],2)},j=[],W=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("b-btn",{staticStyle:{float:"right","margin-bottom":"10px"},attrs:{variant:"primary"},on:{click:function(t){return e.downloadTreemap()}}},[e._v(" "+e._s(e.$t("download"))+" ")]),s("svg",{attrs:{id:"treemap"}})],1)},Y=[],K=s(7254);function J(e,t,s,i){const a=window.innerWidth<=650;a&&(t=25);const o="rtl"===getComputedStyle(e).direction,r="rtl"===e.noUiSlider.options.direction,n="vertical"===e.noUiSlider.options.orientation,l=e.noUiSlider.getTooltips(),c=e.noUiSlider.getOrigins();l.forEach((function(e,t){e&&c[t].appendChild(e)})),e.noUiSlider.on("update",(function(e,a,c,d,u){const h=[[]],p=[[]],m=[[]];let g=0;l[0]&&(h[0][0]=0,p[0][0]=u[0],m[0][0]=e[0]);for(let s=1;s<u.length;s++)(!l[s]||u[s]-u[s-1]>t)&&(g++,h[g]=[],m[g]=[],p[g]=[]),l[s]&&(h[g].push(s),m[g].push(e[s]),p[g].push(u[s]));if(h.forEach((function(e,t){const i=e.length;for(let a=0;a<i;a++){const c=e[a];if(a===i-1){let e=0;p[t].forEach((function(t){e+=1e3-10*t}));const a=n?"bottom":"right",d=r?0:i-1,u=1e3-10*p[t][d];e=(o&&!n?100:0)+e/i-u,l[c].innerHTML=m[t].join(s),l[c].style.display="block",l[c].style[a]=e+"%"}else l[c].style.display="none"}})),i){const e=window.innerWidth<=650,t=e?20:5;u[0]<t?l[0].style.right=-35*(1-u[0]/t)+"px":l[0].style.right="0",u[1]>100-t?l[1].style.right=(u[1]-(100-t))/t*35+"px":l[1].style.right="0"}}))}function X(e,t,s){const i={};e.forEach((e=>{let s=i;e.taxonomy.forEach((e=>{s[e]=e in s?s[e]:{},s=s[e]})),0===Object.keys(s).length?s["$size$"]=e.size:t&&(s["."]={$size$:e.size})}));const a=function(e,t){return Object.keys(e).filter((e=>"$size$"!==e)).map((s=>{const i={name:s,depth:t,value:0,children:a(e[s],t+1)};return"$size$"in e[s]&&(i.value=e[s]["$size$"]),i}))};return{name:s,children:a(i,1),value:0,depth:0}}var ee=s(9306),te=s.n(ee);const se={squarify:K.o$p,binary:K.wLP,sliceDice:K.E_0,slice:K.Kmr,dice:K.LQd},ie={PuBuGn:K.S7V,PuRd:K.cUW,PuBu:K.GMc,YlOrBr:K.Y_x,YlOrRd:K.cjJ,YlGn:K.aEZ,YlGnBu:K.HtN,Plasma:K.iAt,Magma:K.Gii,Inferno:K.sN9,Viridis:K.Vaf,Turbo:K._BJ},ae={small:[800,600],medium:[1300,750],large:[1900,900],"x-large":[2800,1700],"xx-large":[3600,2e3]},oe={};function re(e){let t=oe[e]||0;return oe[e]=t+1,e+t}function ne(e,t){const s=new Map,i=new Map;return e.eachAfter((e=>{e.children&&0!==e.children.length?(s.set(e,1+K.Fp7(e.children,(i=>i.x1===e.x1-t?s.get(i):NaN))),i.set(e,1+K.Fp7(e.children,(s=>s.y1===e.y1-t?i.get(s):NaN)))):(s.set(e,0),i.set(e,0))})).eachBefore((e=>{e.x1-=2*t*s.get(e),e.y1-=2*t*i.get(e)}))}function le(e,t,s,i,a,o){const r=ne(K.pNI().size([s,i]).tile(se[a]).paddingOuter(3).paddingTop(16).paddingInner(1).round(!0)(K.bT9(e).sum((e=>e.value)).sort(((e,t)=>t.value-e.value))),3),n=Math.max(...r.descendants().map((e=>e.depth))),l=K.cJy([n,-1],ie[o]);t.append("filter").attr("id","shadow").append("feDropShadow").attr("flood-opacity",.3).attr("dx",0).attr("stdDeviation",3);const c=t.selectAll("g").data(K.b1B().key((e=>e.depth)).sortKeys(K.j2p).entries(r.descendants())).join("g").attr("filter","url(#shadow)").selectAll("g").data((e=>e.values)).join("g").attr("transform",(e=>`translate(${e.x0},${e.y0})`));c.append("title").text((e=>`${e.ancestors().reverse().splice(1).map((e=>e.data.name)).join("/")}\n${z(e.value)}`)),c.append("rect").attr("id",(e=>e.nodeUid=re("node"))).attr("fill",(e=>l(e.depth))).attr("width",(e=>e.x1-e.x0)).attr("height",(e=>e.y1-e.y0)),c.append("clipPath").attr("id",(e=>e.clipUid=re("clip"))).append("use").attr("href",(e=>`#${e.nodeUid}`)),c.append("text").attr("fill",(e=>K.Ym7(l(e.depth)).l>.5?"#333":"#eee")).attr("clip-path",(e=>`url(#${e.clipUid})`)).selectAll("tspan").data((e=>[e.data.name,z(e.value)])).join("tspan").text((e=>e)),c.filter((e=>e.children)).selectAll("tspan").attr("dx",3).attr("y",13),c.filter((e=>!e.children)).selectAll("tspan").attr("x",3).attr("y",((e,t)=>(0===t?1.1:2.3)+"em"))}function ce(e,t,s,i,a,o,r){const n=K.PKp(K.Cn1),l=K.pNI().tile(se[o]).size([s,i]).padding(1).round(!0)(K.bT9(e).sum((e=>e.value)).sort(((e,t)=>t.value-e.value))),c=t.selectAll("g").data(l.leaves()).join("g").attr("transform",(e=>`translate(${e.x0},${e.y0})`));c.append("title").text((e=>`${e.ancestors().reverse().map((e=>e.data.name)).join("/")}\n${z(e.value)}`)),c.append("rect").attr("id",(e=>e.leafUid=re("leaf"))).attr("fill",(e=>{while(e.depth>a)e=e.parent;return n(e.data.name)})).attr("fill-opacity",r).attr("width",(e=>e.x1-e.x0)).attr("height",(e=>e.y1-e.y0)),c.append("clipPath").attr("id",(e=>e.clipUid=re("clip"))).append("use").attr("href",(e=>`#${e.leafUid}`)),c.append("text").attr("clip-path",(e=>`url(#${e.clipUid})`)).selectAll("tspan").data((e=>("."===e.data.name&&(e=e.parent),[e.data.name,z(e.value)]))).join("tspan").attr("x",2).attr("y",((e,t)=>(0===t?1.1:2.3)+"em")).text((e=>e))}function de(e,t,s){te().toBlob(document.getElementById("treemap"),{width:t,height:s}).then((function(t){let s=document.createElement("a"),i=URL.createObjectURL(t);s.href=i,s.download=`${e}_treemap.png`,document.body.appendChild(s),s.click(),setTimeout((function(){document.body.removeChild(s),window.URL.revokeObjectURL(i)}),0)}))}var ue={name:"D3Treemap",props:["indexId"],watch:{indexId:function(){this.update(this.indexId)}},mounted(){this.update(this.indexId)},methods:{update(e){const t=ae[this.$store.state.optTreemapSize][0],s=ae[this.$store.state.optTreemapSize][1],i=this.$store.state.optTreemapTiling,a=this.$store.state.optTreemapColorGroupingDepth,o=this.$store.state.optTreemapColor,r=this.$store.state.optTreemapType,n=K.Ys("#treemap");n.selectAll("*").remove(),n.attr("viewBox",[0,0,t,s]).attr("xmlns","http://www.w3.org/2000/svg").attr("xmlns:xlink","http://www.w3.org/1999/xlink").attr("version","1.1").style("overflow","visible").style("font","10px sans-serif"),K.gyn(F.getTreemapCsvUrl(e)).then((e=>{if(e.forEach((e=>{e.taxonomy=e.path.split("/"),e.size=Number(e.size)})),"cascaded"===r){const a=X(e,!1);le(a,n,t,s,i,o)}else{const o=X(e.sort(((e,t)=>t.taxonomy.length-e.taxonomy.length)),!0),r="black"===this.$store.state.optTheme?.9:.6;ce(o,n,t,s,a,i,r)}}))},downloadTreemap(){const e=ae[this.$store.state.optTreemapSize][0],t=ae[this.$store.state.optTreemapSize][1];de(this.indexId,e,t)}}},he=ue,pe=(0,p.Z)(he,W,Y,!1,null,null,null),me=pe.exports,ge=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-progress",{attrs:{value:"1",max:"1",animated:""}})},fe=[],be={},ve=(0,p.Z)(be,ge,fe,!1,null,null,null),xe=ve.exports,ye=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"graph"},[s("svg",{attrs:{id:"agg-mime-count"}})])},_e=[];const Te=K.WUZ("~s"),Se=20,we=K.PKp(K.Cn1);function $e(e,t,s,i){const a={top:50,right:0,bottom:10,left:Math.max(6*K.Fp7(e.sort(((e,t)=>t.count-e.count)).slice(0,15),(e=>e.mime.length)),6*K.Fp7(e.sort(((e,t)=>t.size-e.size)).slice(0,15),(e=>e.mime.length)))};e.forEach((e=>{e.name=e.mime,e.value=Number(e.count)})),e=e.sort(((e,t)=>t.value-e.value)).slice(0,15);const o=550,r=Math.ceil((e.length+.1)*Se)+a.top+a.bottom;t.selectAll("*").remove(),t.attr("viewBox",[0,0,o,r]);const n=K.tiA().domain(K.w6H(e.length)).rangeRound([a.top,r-a.bottom]),l=K.BYU().domain([0,K.Fp7(e,(e=>e.value))]).range([a.left,o-a.right]);t.append("g").attr("fill-opacity",s).selectAll("rect").data(e).join("rect").attr("fill",(e=>we(e.name))).attr("x",l(0)).attr("y",((e,t)=>n(t))).attr("width",(e=>l(e.value)-l(0))).attr("height",n.bandwidth()).append("title").text((e=>K.WUZ(",")(e.value))),t.append("g").attr("transform",`translate(0,${a.top})`).call(K.F5q(l).ticks(o/80,e.format).tickFormat(Te)).call((e=>e.select(".domain").remove())),t.append("g").attr("transform",`translate(${a.left},0)`).call(K.y4O(n).tickFormat((t=>e[t].name)).tickSizeOuter(0)),t.append("text").attr("x",o/2).attr("y",a.top/2).attr("text-anchor","middle").style("font-size","16px").text(i)}var Ce={name:"D3MimeBarSize",props:["indexId"],mounted(){this.update(this.indexId)},watch:{indexId:function(){this.update(this.indexId)}},methods:{update(e){const t=K.Ys("#agg-mime-count"),s="black"===this.$store.state.optTheme?.9:.6;K.gyn(F.getMimeCsvUrl(e)).then((e=>{$e(e.slice(),t,s,this.$t("d3.mimeCount"))}))}}},ke=Ce,ze=(0,p.Z)(ke,ye,_e,!1,null,null,null),Me=ze.exports,Ie=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"graph"},[s("svg",{attrs:{id:"agg-mime-size"}})])},Le=[];const De=K.WUZ("~s"),Oe=20,Pe=K.PKp(K.Cn1);function qe(e,t,s,i){const a={top:50,right:0,bottom:10,left:Math.max(6*K.Fp7(e.sort(((e,t)=>t.count-e.count)).slice(0,15),(e=>e.mime.length)),6*K.Fp7(e.sort(((e,t)=>t.size-e.size)).slice(0,15),(e=>e.mime.length)))};e.forEach((e=>{e.name=e.mime,e.value=Number(e.size)})),e=e.sort(((e,t)=>t.value-e.value)).slice(0,15);const o=550,r=Math.ceil((e.length+.1)*Oe)+a.top+a.bottom;t.selectAll("*").remove(),t.attr("viewBox",[0,0,o,r]);const n=K.tiA().domain(K.w6H(e.length)).rangeRound([a.top,r-a.bottom]),l=K.BYU().domain([0,K.Fp7(e,(e=>e.value))]).range([a.left,o-a.right]);t.append("g").attr("fill-opacity",s).selectAll("rect").data(e).join("rect").attr("fill",(e=>Pe(e.name))).attr("x",l(0)).attr("y",((e,t)=>n(t))).attr("width",(e=>l(e.value)-l(0))).attr("height",n.bandwidth()).append("title").text((e=>De(e.value))),t.append("g").attr("transform",`translate(0,${a.top})`).call(K.F5q(l).ticks(o/80,e.format).tickFormat(De)).call((e=>e.select(".domain").remove())),t.append("g").attr("transform",`translate(${a.left},0)`).call(K.y4O(n).tickFormat((t=>e[t].name)).tickSizeOuter(0)),t.append("text").attr("x",o/2).attr("y",a.top/2).attr("text-anchor","middle").style("font-size","16px").text(i)}var Ee={name:"D3MimeBarSize",props:["indexId"],mounted(){this.update(this.indexId)},watch:{indexId:function(){this.update(this.indexId)}},methods:{update(e){const t=K.Ys("#agg-mime-size"),s="black"===this.$store.state.optTheme?.9:.6;K.gyn(F.getMimeCsvUrl(e)).then((e=>{qe(e.slice(),t,s,this.$t("d3.mimeSize"))}))}}},Ae=Ee,He=(0,p.Z)(Ae,Ie,Le,!1,null,null,null),Ue=He.exports,Be=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"graph"},[s("svg",{attrs:{id:"date-histogram"}})])},Fe=[];const Ne=K.WUZ("~s");function Re(e,t,s){let i=e.map((e=>({length:Number(e.count),x0:Number(e.bucket),x1:Number(e.bucket)+2629800})));i.sort(((e,t)=>e.length-t.length));const a={top:50,right:20,bottom:70,left:40},o=K.VRg(i,.9,(e=>e.length));i=i.filter((e=>e.length>o));const r=550,n=450;t.selectAll("*").remove(),t.attr("viewBox",[0,0,r,n]);const l=K.BYU().domain([0,K.Fp7(i,(e=>e.length))]).nice().range([n-a.bottom,a.top]),c=K.BYU().domain(K.Wem(i,(e=>e.x0))).nice().range([a.left,r-a.right]);t.append("g").attr("fill","steelblue").selectAll("rect").data(i).join("rect").attr("x",(e=>c(e.x0)+1)).attr("width",(e=>Math.max(1,c(e.x1)-c(e.x0)-1))).attr("y",(e=>l(e.length))).attr("height",(e=>l(0)-l(e.length))).call((e=>e.append("title").text((e=>e.length)))),t.append("g").attr("transform",`translate(0,${n-a.bottom})`).call(K.LLu(c).ticks(r/30).tickSizeOuter(0).tickFormat((e=>K.i$Z("%Y-%m-%d")(K.wp9("%s")(e))))).call((e=>e.selectAll("text").style("text-anchor","end").attr("dx","-.8em").attr("dy",".15em").attr("transform","rotate(-65)"))).call((e=>e.append("text").attr("x",r-a.right).attr("y",-4).attr("fill","currentColor").attr("font-weight","bold").attr("text-anchor","end").text("mtime"))),t.append("g").attr("transform",`translate(${a.left},0)`).call(K.y4O(l).ticks(n/40).tickFormat((e=>Ne(e)))).call((e=>e.select(".domain").remove())).call((e=>e.select(".tick:last-of-type text").clone().attr("x",4).attr("text-anchor","start").attr("font-weight","bold").text("File count"))),t.append("text").attr("x",r/2).attr("y",a.top/2).attr("text-anchor","middle").style("font-size","16px").text(s)}var Ve={name:"D3DateHistogram",props:["indexId"],mounted(){this.update(this.indexId)},watch:{indexId:function(){this.update(this.indexId)}},methods:{update(e){const t=K.Ys("#date-histogram");K.gyn(F.getDateCsv(e)).then((e=>{Re(e.slice(),t,this.$t("d3.dateHistogram"))}))}}},Ze=Ve,Qe=(0,p.Z)(Ze,Be,Fe,!1,null,null,null),Ge=Qe.exports,je=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"graph"},[s("svg",{attrs:{id:"size-histogram"}})])},We=[];const Ye=K.WUZ("~s");function Ke(e,t,s){let i=e.map((e=>({length:Number(e.count),x0:Number(e.bucket),x1:Number(e.bucket)+5242880})));i=i.sort(((e,t)=>t.length-e.length)).slice(0,25);const a={top:50,right:20,bottom:70,left:40},o=550,r=450;t.selectAll("*").remove(),t.attr("viewBox",[0,0,o,r]);const n=K.BYU().domain([0,K.Fp7(i,(e=>e.length))]).range([r-a.bottom,a.top]),l=K.BYU().domain(K.Wem(i,(e=>e.x0))).nice().range([a.left,o-a.right]);t.append("g").attr("fill","steelblue").selectAll("rect").data(i).join("rect").attr("x",(e=>l(e.x0)+1)).attr("width",(e=>Math.max(1,l(e.x1)-l(e.x0)-1))).attr("y",(e=>n(e.length))).attr("height",(e=>n(0)-n(e.length))).call((e=>e.append("title").text((e=>e.length)))),t.append("g").attr("transform",`translate(0,${r-a.bottom})`).call(K.LLu(l).ticks(o/30).tickSizeOuter(0).tickFormat(Ye)).call((e=>e.selectAll("text").style("text-anchor","end").attr("dx","-.8em").attr("dy",".15em").attr("transform","rotate(-65)"))).call((e=>e.append("text").attr("x",o-a.right).attr("y",-4).attr("fill","currentColor").attr("font-weight","bold").attr("text-anchor","end").text("size (bytes)"))),t.append("g").attr("transform",`translate(${a.left},0)`).call(K.y4O(n).ticks(r/40).tickFormat((e=>Ye(e)))).call((e=>e.select(".domain").remove())).call((e=>e.select(".tick:last-of-type text").clone().attr("x",4).attr("text-anchor","start").attr("font-weight","bold").text("File count"))),t.append("text").attr("x",o/2).attr("y",a.top/2).attr("text-anchor","middle").style("font-size","16px").text(s)}var Je={name:"D3SizeHistogram",props:["indexId"],mounted(){this.update(this.indexId)},watch:{indexId:function(){this.update(this.indexId)}},methods:{update(e){const t=K.Ys("#size-histogram");K.gyn(F.getSizeCsv(e)).then((e=>{Ke(e.slice(),t,this.$t("d3.sizeHistogram"))}))}}},Xe=Je,et=(0,p.Z)(Xe,je,We,!1,null,null,null),tt=et.exports,st={components:{D3SizeHistogram:tt,D3DateHistogram:Ge,D3MimeBarSize:Ue,D3MimeBarCount:Me,D3Treemap:me,Preloader:xe},data(){return{loading:!0,selectedIndex:null,indices:[]}},computed:{indexOptions(){return this.indices.map((e=>({text:e.name,value:e.id})))}},mounted(){F.getSist2Info().then((e=>{this.indices=e.indices,this.loading=!1}))}},it=st,at=(0,p.Z)(it,G,j,!1,null,null,null),ot=at.exports,rt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.configLoading?e._e():s("div",{staticClass:"container",staticStyle:{"margin-left":"auto","margin-right":"auto"}},[s("b-card",[s("b-card-title",[s("GearIcon"),e._v(" "+e._s(e.$t("config"))+" ")],1),s("p",[e._v(e._s(e.$t("configDescription")))]),s("b-card-body",[s("h4",[e._v(e._s(e.$t("displayOptions")))]),s("b-card",[s("label",[s("LanguageIcon"),s("span",{staticStyle:{"vertical-align":"middle"}},[e._v(" "+e._s(e.$t("opt.lang")))])],1),s("b-form-select",{attrs:{options:e.langOptions,value:e.optLang},on:{input:e.setOptLang}}),s("label",[e._v(e._s(e.$t("opt.theme")))]),s("b-form-select",{attrs:{options:e.themeOptions,value:e.optTheme},on:{input:e.setOptTheme}}),s("label",[e._v(e._s(e.$t("opt.displayMode")))]),s("b-form-select",{attrs:{options:e.displayModeOptions,value:e.optDisplay},on:{input:e.setOptDisplay}}),s("label",[e._v(e._s(e.$t("opt.columns")))]),s("b-form-select",{attrs:{options:e.columnsOptions,value:e.optColumns},on:{input:e.setOptColumns}}),s("div",{staticStyle:{height:"10px"}}),s("b-form-checkbox",{attrs:{checked:e.optLightboxLoadOnlyCurrent},on:{input:e.setOptLightboxLoadOnlyCurrent}},[e._v(" "+e._s(e.$t("opt.lightboxLoadOnlyCurrent"))+" ")]),s("b-form-checkbox",{attrs:{checked:e.optHideLegacy},on:{input:e.setOptHideLegacy}},[e._v(" "+e._s(e.$t("opt.hideLegacy"))+" ")]),s("b-form-checkbox",{attrs:{checked:e.optUpdateMimeMap},on:{input:e.setOptUpdateMimeMap}},[e._v(" "+e._s(e.$t("opt.updateMimeMap"))+" ")]),s("b-form-checkbox",{attrs:{checked:e.optUseDatePicker},on:{input:e.setOptUseDatePicker}},[e._v(" "+e._s(e.$t("opt.useDatePicker"))+" ")]),s("b-form-checkbox",{attrs:{checked:e.optSimpleLightbox},on:{input:e.setOptSimpleLightbox}},[e._v(e._s(e.$t("opt.simpleLightbox"))+" ")]),s("b-form-checkbox",{attrs:{checked:e.optShowTagPickerFilter},on:{input:e.setOptShowTagPickerFilter}},[e._v(e._s(e.$t("opt.showTagPickerFilter"))+" ")])],1),s("br"),s("h4",[e._v(e._s(e.$t("searchOptions")))]),s("b-card",[s("b-form-checkbox",{attrs:{checked:e.optHideDuplicates},on:{input:e.setOptHideDuplicates}},[e._v(e._s(e.$t("opt.hideDuplicates"))+" ")]),s("b-form-checkbox",{attrs:{checked:e.optHighlight},on:{input:e.setOptHighlight}},[e._v(e._s(e.$t("opt.highlight")))]),s("b-form-checkbox",{attrs:{checked:e.optTagOrOperator},on:{input:e.setOptTagOrOperator}},[e._v(e._s(e.$t("opt.tagOrOperator"))+" ")]),s("b-form-checkbox",{attrs:{checked:e.optFuzzy},on:{input:e.setOptFuzzy}},[e._v(e._s(e.$t("opt.fuzzy")))]),s("b-form-checkbox",{attrs:{checked:e.optSearchInPath},on:{input:e.setOptSearchInPath}},[e._v(e._s(e.$t("opt.searchInPath"))+" ")]),s("b-form-checkbox",{attrs:{checked:e.optSuggestPath},on:{input:e.setOptSuggestPath}},[e._v(e._s(e.$t("opt.suggestPath"))+" ")]),s("br"),s("label",[e._v(e._s(e.$t("opt.fragmentSize")))]),s("b-form-input",{attrs:{value:e.optFragmentSize,step:"10",type:"number",min:"0"},on:{input:e.setOptFragmentSize}}),s("label",[e._v(e._s(e.$t("opt.resultSize")))]),s("b-form-input",{attrs:{value:e.optResultSize,type:"number",min:"10"},on:{input:e.setOptResultSize}}),s("label",[e._v(e._s(e.$t("opt.queryMode")))]),s("b-form-select",{attrs:{options:e.queryModeOptions,value:e.optQueryMode},on:{input:e.setOptQueryMode}}),s("label",[e._v(e._s(e.$t("opt.slideDuration")))]),s("b-form-input",{attrs:{value:e.optLightboxSlideDuration,type:"number",min:"1"},on:{input:e.setOptLightboxSlideDuration}}),s("label",[e._v(e._s(e.$t("opt.vidPreviewInterval")))]),s("b-form-input",{attrs:{value:e.optVidPreviewInterval,type:"number",min:"50"},on:{input:e.setOptVidPreviewInterval}})],1),s("h4",{staticClass:"mt-3"},[e._v(e._s(e.$t("treemapOptions")))]),s("b-card",[s("label",[e._v(e._s(e.$t("opt.treemapType")))]),s("b-form-select",{attrs:{value:e.optTreemapType,options:e.treemapTypeOptions},on:{input:e.setOptTreemapType}}),s("label",[e._v(e._s(e.$t("opt.treemapTiling")))]),s("b-form-select",{attrs:{value:e.optTreemapTiling,options:e.treemapTilingOptions},on:{input:e.setOptTreemapTiling}}),s("label",[e._v(e._s(e.$t("opt.treemapColorGroupingDepth")))]),s("b-form-input",{attrs:{value:e.optTreemapColorGroupingDepth,type:"number",min:"1"},on:{input:e.setOptTreemapColorGroupingDepth}}),s("label",[e._v(e._s(e.$t("opt.treemapSize")))]),s("b-form-select",{attrs:{value:e.optTreemapSize,options:e.treemapSizeOptions},on:{input:e.setOptTreemapSize}}),"custom"===e.$store.getters.optTreemapSize?[s("b-form-input",{attrs:{type:"number",min:"0",step:"10"}}),s("b-form-input",{attrs:{type:"number",min:"0",step:"10"}})]:e._e(),s("label",[e._v(e._s(e.$t("opt.treemapColor")))]),s("b-form-select",{attrs:{value:e.optTreemapColor,options:e.treemapColorOptions},on:{input:e.setOptTreemapColor}})],2),s("b-button",{staticClass:"mt-4",attrs:{variant:"danger"},on:{click:function(t){return e.onResetClick()}}},[e._v(e._s(e.$t("configReset")))])],1)],1),e.loading?s("b-card",{staticClass:"mt-4"},[s("Preloader")],1):s("DebugInfo")],1)},nt=[],lt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-card",{staticClass:"mb-4 mt-4"},[s("b-card-title",[s("DebugIcon",{staticClass:"mr-1"}),e._v(e._s(e.$t("debug")))],1),s("p",{domProps:{innerHTML:e._s(e.$t("debugDescription"))}}),s("b-card-body",[s("b-table",{staticClass:"mb-0",attrs:{items:e.tableItems,small:"",borderless:"",responsive:"md","thead-class":"hidden"}}),s("hr"),e._l(e.$store.state.sist2Info.indices,(function(e){return s("IndexDebugInfo",{key:e.id,staticClass:"mt-2",attrs:{index:e}})}))],2)],1)},ct=[],dt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h4",[e._v("["+e._s(e.index.name)+"]")]),s("b-table",{staticClass:"mb-0",attrs:{items:e.tableItems,small:"",borderless:"",responsive:"md","thead-class":"hidden"}})],1)},ut=[],ht={name:"IndexDebugInfo",props:["index"],computed:{tableItems(){return[{key:this.$t("name"),value:this.index.name},{key:this.$t("id"),value:this.index.id},{key:this.$t("indexVersion"),value:this.index.version},{key:this.$t("rewriteUrl"),value:this.index.rewriteUrl},{key:this.$t("timestamp"),value:I(this.index.timestamp)}]}}},pt=ht,mt=(0,p.Z)(pt,dt,ut,!1,null,"9d879710",null),gt=mt.exports,ft=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 309.998 309.998",fill:"currentColor"}},[s("path",{attrs:{d:"M294.998,155.03H250v-48.82l39.714-39.715c5.858-5.857,5.858-15.356,0-21.213c-5.857-5.857-15.355-5.857-21.213,0 l-23.7,23.701c-12.885-37.2-48.274-63.984-89.802-63.984c-41.528,0-76.913,26.787-89.797,63.989L41.497,45.282 c-5.856-5.859-15.354-5.857-21.213,0s-5.858,15.355,0,21.213L60,106.212v48.818H15c-8.284,0-15,6.716-15,15c0,8.284,6.716,15,15,15 h45.134c0.855,16.314,5.849,31.551,13.944,44.68l-49.685,49.683c-5.858,5.857-5.858,15.354,0,21.213 c2.929,2.93,6.768,4.394,10.607,4.394c3.838,0,7.678-1.465,10.606-4.394l48.095-48.093c16.558,14.018,37.957,22.486,61.301,22.486 c0.019,0,0.037-0.001,0.057-0.001c0.011,0,0.022,0.002,0.033,0.002c0.019,0,0.037-0.003,0.056-0.003 c23.285-0.035,44.629-8.494,61.15-22.483l48.094,48.092c2.929,2.929,6.768,4.394,10.606,4.394c3.839,0,7.678-1.465,10.607-4.394 c5.858-5.858,5.858-15.355,0-21.213l-49.683-49.681c8.096-13.131,13.089-28.366,13.944-44.682h45.132c8.284,0,15-6.716,15-15 C309.998,161.746,303.282,155.03,294.998,155.03z M154.999,34.999c30.681,0,56.465,21.365,63.254,50H91.747 C98.535,56.364,124.318,34.999,154.999,34.999z M90,179.999v-9.272c0.011-0.232,0.035-0.462,0.035-0.696 c0-0.234-0.024-0.464-0.035-0.695v-54.336h50.092v128.254C111.415,236.494,90,210.708,90,179.999z M170.092,243.212V114.999H220 v54.297c-0.012,0.244-0.037,0.486-0.037,0.734c0,0.248,0.025,0.49,0.037,0.734v9.234C220,210.645,198.676,236.388,170.092,243.212z"}})])},bt=[],vt={name:"DebugIcon"},xt=vt,yt=(0,p.Z)(xt,ft,bt,!1,null,"1493ac2c",null),_t=yt.exports,Tt={name:"DebugInfo.vue",components:{DebugIcon:_t,IndexDebugInfo:gt},computed:{tableItems(){return[{key:"version",value:this.$store.state.sist2Info.version},{key:"platform",value:this.$store.state.sist2Info.platform},{key:"debugBinary",value:this.$store.state.sist2Info.debug},{key:"sist2CommitHash",value:this.$store.state.sist2Info.sist2Hash},{key:"esIndex",value:this.$store.state.sist2Info.esIndex},{key:"tagline",value:this.$store.state.sist2Info.tagline},{key:"dev",value:this.$store.state.sist2Info.dev},{key:"mongooseVersion",value:this.$store.state.sist2Info.mongooseVersion},{key:"esVersion",value:this.$store.state.sist2Info.esVersion},{key:"esVersionSupported",value:this.$store.state.sist2Info.esVersionSupported},{key:"esVersionLegacy",value:this.$store.state.sist2Info.esVersionLegacy}]}}},St=Tt,wt=(0,p.Z)(St,lt,ct,!1,null,null,null),$t=wt.exports,Ct=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1000 1000",fill:"currentColor"}},[s("g",{attrs:{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)"}},[s("path",{attrs:{d:"M4568.5,5011c-73.2-7.7-154-25-177.1-36.6c-84.7-46.2-102-119.4-159.8-689.2s-65.5-610.3-159.8-670c-23.1-15.4-125.1-55.8-225.3-90.5c-100.1-32.7-290.7-111.7-423.6-175.2c-319.6-152.1-315.8-152.1-619.9,94.3c-718.1,583.3-650.7,535.2-747,535.2c-77,0-104-11.6-184.8-77c-157.9-127.1-410.1-375.4-567.9-558.3c-155.9-177.1-190.6-250.3-159.8-344.6c9.6-27,165.6-227.2,344.6-446.7c181-219.5,342.7-425.5,360-458.2c52-88.6,42.3-150.2-50.1-335c-73.2-148.3-144.4-325.4-252.2-623.8c-17.3-50-57.8-113.6-88.6-138.6c-63.5-53.9-59.7-53.9-695-117.4c-527.5-52-577.6-65.5-627.6-179c-46.2-105.9-46.2-1057,0-1162.9c50-113.6,98.2-127.1,646.9-181c271.5-25,523.7-52,560.2-57.8c111.7-17.3,179.1-107.8,259.9-344.6c38.5-115.5,119.4-310,177.1-431.3c57.8-119.4,104-240.7,104-269.5c0-78.9-42.4-140.5-394.7-568c-179-219.5-335-419.7-344.6-446.6c-30.8-94.3,3.9-167.5,159.8-344.6c157.9-181,410.1-429.3,564.1-554.5c96.3-78.9,188.7-105.9,265.7-75.1c26.9,11.6,234.9,173.3,462.1,360c227.2,188.7,433.2,348.5,458.2,358.1c82.8,30.8,136.7,17.3,354.3-86.6c119.4-57.8,308-136.7,419.7-175.2c111.7-38.5,221.4-82.8,244.5-98.2c94.3-59.7,102-100.1,159.8-670c61.6-606.5,73.2-648.8,188.7-700.8c105.9-46.2,1057-46.2,1162.9,0c115.5,52,127.1,94.3,188.7,700.8c57.8,569.9,65.4,610.3,159.8,670c23.1,15.4,132.9,59.7,244.5,98.2s300.3,117.4,417.8,175.2c219.5,104,273.4,117.5,356.2,86.6c25-9.6,231-169.4,458.2-358.1c227.2-186.8,435.1-348.5,462.1-360c77-28.9,169.4-3.9,265.7,75.1c152.1,121.3,442.8,410.1,583.4,577.6c140.6,163.6,173.3,242.6,136.7,333.1c-11.6,27-173.3,234.9-360,462.1c-188.7,227.2-348.5,433.2-358.1,458.2c-30.8,82.8-17.3,136.7,86.6,356.2c57.8,117.4,138.6,311.9,177.1,427.4c80.9,236.8,148.3,327.3,259.9,344.6c36.6,5.8,288.8,32.7,562.2,59.7c308,28.9,517.9,59.7,550.6,77c30.8,15.4,71.2,59.7,90.5,100.1c32.8,65.4,36.6,123.2,34.7,573.7c0,562.2-11.5,627.6-115.5,687.3c-46.2,27-188.7,48.1-612.2,90.5c-573.7,59.7-614.2,67.4-673.8,161.7c-15.4,23.1-59.7,132.9-98.2,244.5s-117.4,300.3-175.2,417.8c-57.8,119.4-104,240.7-104,271.5c0,80.9,40.4,138.6,394.7,569.9c181,219.5,335,419.7,344.6,446.7c30.8,94.3-3.9,167.5-159.8,344.6c-157.9,181-410.1,429.3-564.1,554.5c-96.3,78.9-188.7,104-265.7,75.1c-27-11.6-234.9-173.3-462.1-360c-227.2-188.7-433.2-348.5-458.2-358.1c-80.9-30.8-130.9-19.2-371.6,96.3c-130.9,61.6-325.4,142.5-431.3,177.1c-217.5,71.2-308,140.5-325.4,250.3c-5.8,36.6-32.7,288.8-57.8,560.3c-53.9,550.6-67.4,596.8-181,645C5502.3,5018.7,4807.3,5036,4568.5,5011z M5463.8,1897.8c502.5-127.1,954.9-494.8,1184-960.7c446.7-914.5,78.9-2011.9-824-2460.5c-1053.1-521.8-2308.4,52-2604.9,1189.8c-71.2,277.2-71.2,629.6,0,904.9c192.5,737.4,814.4,1284.2,1569.1,1376.6C4974.8,1971,5255.9,1949.8,5463.8,1897.8z"}})])])},kt=[],zt={name:"GearIcon"},Mt=zt,It=(0,p.Z)(Mt,Ct,kt,!1,null,"aa389a2c",null),Lt=It.exports,Dt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"}},[s("path",{attrs:{fill:"currentColor",d:"M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm1 16.057v-3.057h2.994c-.059 1.143-.212 2.24-.456 3.279-.823-.12-1.674-.188-2.538-.222zm1.957 2.162c-.499 1.33-1.159 2.497-1.957 3.456v-3.62c.666.028 1.319.081 1.957.164zm-1.957-7.219v-3.015c.868-.034 1.721-.103 2.548-.224.238 1.027.389 2.111.446 3.239h-2.994zm0-5.014v-3.661c.806.969 1.471 2.15 1.971 3.496-.642.084-1.3.137-1.971.165zm2.703-3.267c1.237.496 2.354 1.228 3.29 2.146-.642.234-1.311.442-2.019.607-.344-.992-.775-1.91-1.271-2.753zm-7.241 13.56c-.244-1.039-.398-2.136-.456-3.279h2.994v3.057c-.865.034-1.714.102-2.538.222zm2.538 1.776v3.62c-.798-.959-1.458-2.126-1.957-3.456.638-.083 1.291-.136 1.957-.164zm-2.994-7.055c.057-1.128.207-2.212.446-3.239.827.121 1.68.19 2.548.224v3.015h-2.994zm1.024-5.179c.5-1.346 1.165-2.527 1.97-3.496v3.661c-.671-.028-1.329-.081-1.97-.165zm-2.005-.35c-.708-.165-1.377-.373-2.018-.607.937-.918 2.053-1.65 3.29-2.146-.496.844-.927 1.762-1.272 2.753zm-.549 1.918c-.264 1.151-.434 2.36-.492 3.611h-3.933c.165-1.658.739-3.197 1.617-4.518.88.361 1.816.67 2.808.907zm.009 9.262c-.988.236-1.92.542-2.797.9-.89-1.328-1.471-2.879-1.637-4.551h3.934c.058 1.265.231 2.488.5 3.651zm.553 1.917c.342.976.768 1.881 1.257 2.712-1.223-.49-2.326-1.211-3.256-2.115.636-.229 1.299-.435 1.999-.597zm9.924 0c.7.163 1.362.367 1.999.597-.931.903-2.034 1.625-3.257 2.116.489-.832.915-1.737 1.258-2.713zm.553-1.917c.27-1.163.442-2.386.501-3.651h3.934c-.167 1.672-.748 3.223-1.638 4.551-.877-.358-1.81-.664-2.797-.9zm.501-5.651c-.058-1.251-.229-2.46-.492-3.611.992-.237 1.929-.546 2.809-.907.877 1.321 1.451 2.86 1.616 4.518h-3.933z"}})])},Ot=[],Pt={name:"LanguageIcon"},qt=Pt,Et=(0,p.Z)(qt,Dt,Ot,!1,null,"53847ab6",null),At=Et.exports,Ht={components:{LanguageIcon:At,GearIcon:Lt,DebugInfo:$t,Preloader:xe},data(){return{loading:!1,configLoading:!1,langOptions:[{value:"en",text:this.$t("lang.en")},{value:"fr",text:this.$t("lang.fr")},{value:"zh-CN",text:this.$t("lang.zh-CN")}],queryModeOptions:[{value:"simple",text:this.$t("queryMode.simple")},{value:"advanced",text:this.$t("queryMode.advanced")}],displayModeOptions:[{value:"grid",text:this.$t("displayMode.grid")},{value:"list",text:this.$t("displayMode.list")}],columnsOptions:[{value:"auto",text:this.$t("columns.auto")},{value:1,text:"1"},{value:2,text:"2"},{value:3,text:"3"},{value:4,text:"4"},{value:5,text:"5"},{value:6,text:"6"},{value:7,text:"7"},{value:8,text:"8"},{value:9,text:"9"},{value:10,text:"10"},{value:11,text:"11"},{value:12,text:"12"}],treemapTypeOptions:[{value:"cascaded",text:this.$t("treemapType.cascaded")},{value:"flat",text:this.$t("treemapType.flat")}],treemapTilingOptions:[{value:"binary",text:this.$t("treemapTiling.binary")},{value:"squarify",text:this.$t("treemapTiling.squarify")},{value:"slice",text:this.$t("treemapTiling.slice")},{value:"dice",text:this.$t("treemapTiling.dice")},{value:"sliceDice",text:this.$t("treemapTiling.sliceDice")}],treemapSizeOptions:[{value:"small",text:this.$t("treemapSize.small")},{value:"medium",text:this.$t("treemapSize.medium")},{value:"large",text:this.$t("treemapSize.large")},{value:"x-large",text:this.$t("treemapSize.xLarge")},{value:"xx-large",text:this.$t("treemapSize.xxLarge")}],treemapColorOptions:[{value:"PuBuGn",text:"Purple-Blue-Green"},{value:"PuRd",text:"Purple-Red"},{value:"PuBu",text:"Purple-Blue"},{value:"YlOrBr",text:"Yellow-Orange-Brown"},{value:"YlOrRd",text:"Yellow-Orange-Red"},{value:"YlGn",text:"Yellow-Green"},{value:"YlGnBu",text:"Yellow-Green-Blue"},{value:"Plasma",text:"Plasma"},{value:"Magma",text:"Magma"},{value:"Inferno",text:"Inferno"},{value:"Viridis",text:"Viridis"},{value:"Turbo",text:"Turbo"}],themeOptions:[{value:"light",text:this.$t("theme.light")},{value:"black",text:this.$t("theme.black")}]}},computed:{...(0,y.Se)(["optTheme","optDisplay","optColumns","optHighlight","optFuzzy","optSearchInPath","optSuggestPath","optFragmentSize","optQueryMode","optTreemapType","optTreemapTiling","optTreemapColorGroupingDepth","optTreemapColor","optTreemapSize","optLightboxLoadOnlyCurrent","optLightboxSlideDuration","optResultSize","optTagOrOperator","optLang","optHideDuplicates","optHideLegacy","optUpdateMimeMap","optUseDatePicker","optVidPreviewInterval","optSimpleLightbox","optShowTagPickerFilter"]),clientWidth(){return window.innerWidth}},mounted(){this.$store.subscribe((e=>{e.type.startsWith("setOpt")&&this.$store.dispatch("updateConfiguration")}))},methods:{...(0,y.nv)({setSist2Info:"setSist2Info"}),...(0,y.OI)(["setOptTheme","setOptDisplay","setOptColumns","setOptHighlight","setOptFuzzy","setOptSearchInPath","setOptSuggestPath","setOptFragmentSize","setOptQueryMode","setOptTreemapType","setOptTreemapTiling","setOptTreemapColorGroupingDepth","setOptTreemapColor","setOptTreemapSize","setOptLightboxLoadOnlyCurrent","setOptLightboxSlideDuration","setOptResultSize","setOptTagOrOperator","setOptLang","setOptHideDuplicates","setOptHideLegacy","setOptUpdateMimeMap","setOptUseDatePicker","setOptVidPreviewInterval","setOptSimpleLightbox","setOptShowTagPickerFilter"]),onResetClick(){localStorage.removeItem("sist2_configuration"),window.location.reload()}}},Ut=Ht,Bt=(0,p.Z)(Ut,rt,nt,!1,null,null,null),Ft=Bt.exports,Nt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("Lightbox"),s("HelpDialog",{attrs:{show:e.showHelp},on:{close:function(t){e.showHelp=!1}}}),e.uiLoading?s("b-card",[s("Preloader")],1):e._e(),s("b-card",{directives:[{name:"show",rawName:"v-show",value:!e.uiLoading,expression:"!uiLoading"}],attrs:{id:"search-panel"}},[s("SearchBar",{on:{"show-help":function(t){e.showHelp=!0}}}),s("b-row",[s("b-col",{staticStyle:{height:"70px"},attrs:{sm:"6"}},[s("SizeSlider")],1),s("b-col",[s("PathTree",{on:{search:function(t){return e.search(!0)}}})],1)],1),s("b-row",[s("b-col",{attrs:{sm:"6"}},[s("DateSlider"),s("b-row",[s("b-col",[s("IndexPicker")],1)],1)],1),s("b-col",[s("b-tabs",{attrs:{justified:""}},[s("b-tab",{attrs:{title:e.$t("mimeTypes")}},[s("MimePicker")],1),s("b-tab",{attrs:{title:e.$t("tags")}},[s("TagPicker",{attrs:{"show-search-bar":e.$store.state.optShowTagPickerFilter}})],1)],1)],1)],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:0===e.docs.length&&!e.uiLoading,expression:"docs.length === 0 && !uiLoading"}]},[e.searchBusy?s("Preloader",{staticClass:"mt-3"}):e._e(),s("ResultsCard")],1),e.docs.length>0?s("div",[s("ResultsCard"),"grid"===e.optDisplay?s("DocCardWall",{attrs:{docs:e.docs,append:e.appendFunc}}):s("DocList",{attrs:{docs:e.docs,append:e.appendFunc}})],1):e._e()],1)},Rt=[],Vt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("b-input-group",{scopedSlots:e._u([{key:"prepend",fn:function(){return[s("b-input-group-text",[s("b-form-checkbox",{attrs:{checked:e.fuzzy,title:"Toggle fuzzy searching"},on:{change:function(t){return e.setFuzzy(t)}}},[e._v(" "+e._s(e.$t("searchBar.fuzzy"))+" ")])],1)]},proxy:!0},{key:"append",fn:function(){return[s("b-button",{attrs:{variant:"outline-secondary"},on:{click:function(t){return e.$emit("show-help")}}},[e._v(e._s(e.$t("help.help")))])]},proxy:!0}])},[s("b-form-input",{attrs:{value:e.searchText,placeholder:e.advanced()?e.$t("searchBar.advanced"):e.$t("searchBar.simple")},on:{input:function(t){return e.setSearchText(t)}}})],1)],1)},Zt=[],Qt={computed:{...(0,y.Se)({optQueryMode:"optQueryMode",searchText:"searchText",fuzzy:"fuzzy"})},methods:{...(0,y.OI)({setSearchText:"setSearchText",setFuzzy:"setFuzzy"}),advanced(){return"advanced"===this.optQueryMode}}},Gt=Qt,jt=(0,p.Z)(Gt,Vt,Zt,!1,null,null,null),Wt=jt.exports,Yt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.isMobile?s("div",[s("b-form-select",{attrs:{value:e.selectedIndicesIds,options:e.indices,multiple:"","select-size":6,"text-field":"name","value-field":"id"},on:{change:function(t){return e.onSelect(t)}}})],1):s("div",[s("div",{staticClass:"d-flex justify-content-between align-content-center"},[s("span",[e._v(" "+e._s(e.selectedIndices.length)+" "+e._s(1===e.selectedIndices.length?e.$t("indexPicker.selectedIndex"):e.$t("indexPicker.selectedIndices"))+" ")]),s("div",[s("b-button",{attrs:{variant:"link"},on:{click:function(t){return e.selectAll()}}},[e._v(" "+e._s(e.$t("indexPicker.selectAll")))]),s("b-button",{attrs:{variant:"link"},on:{click:function(t){return e.selectNone()}}},[e._v(" "+e._s(e.$t("indexPicker.selectNone")))])],1)]),s("b-list-group",{staticClass:"unselectable",attrs:{id:"index-picker-desktop"}},e._l(e.indices,(function(t){return s("b-list-group-item",{staticClass:"d-flex justify-content-between align-items-center list-group-item-action pointer",class:{active:e.lastClickIndex===t},on:{click:[function(s){return e.toggleIndex(t,s)},function(s){return s.shiftKey?e.shiftClick(t,s):null}]}},[s("div",{staticClass:"d-flex"},[s("b-checkbox",{staticStyle:{"pointer-events":"none"},attrs:{checked:e.isSelected(t)}}),e._v(" "+e._s(t.name)+" "),s("span",{staticClass:"text-muted timestamp-text ml-2"},[e._v(e._s(e.formatIdxDate(t.timestamp)))])],1),s("b-badge",{staticClass:"version-badge"},[e._v("v"+e._s(t.version))])],1)})),1)],1)},Kt=[],Jt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-badge",{attrs:{variant:"secondary",pill:e.pill}},[e._v(e._s(e.text))])},Xt=[],es=i["default"].extend({props:{text:String,pill:Boolean}}),ts=es,ss=(0,p.Z)(ts,Jt,Xt,!1,null,"4dea1070",null),is=ss.exports,as=s(1013),os=i["default"].extend({components:{SmallBadge:is},data(){return{loading:!0,lastClickIndex:null}},computed:{...(0,y.Se)(["indices","selectedIndices"]),selectedIndicesIds(){return this.selectedIndices.map((e=>e.id))},isMobile(){return window.innerWidth<=650}},methods:{...(0,y.nv)({setSelectedIndices:"setSelectedIndices"}),shiftClick(e,t){if(null===this.lastClickIndex)return;const s=this.isSelected(this.lastClickIndex);let i=this.indices.indexOf(this.lastClickIndex),a=this.indices.indexOf(e);if(a<i){let e=i;i=a,a=e}for(let o=i;o<=a;o++)s?this.isSelected(this.indices[o])||this.setSelectedIndices([this.indices[o],...this.selectedIndices]):this.setSelectedIndices(this.selectedIndices.filter((e=>e!==this.indices[o])))},selectAll(){this.setSelectedIndices(this.indices)},selectNone(){this.setSelectedIndices([])},onSelect(e){this.setSelectedIndices(this.indices.filter((t=>e.includes(t.id))))},formatIdxDate(e){return(0,as.Z)(new Date(1e3*e),"yyyy-MM-dd")},toggleIndex(e,t){t.shiftKey||(this.lastClickIndex=e,this.isSelected(e)?this.setSelectedIndices(this.selectedIndices.filter((t=>t.id!=e.id))):this.setSelectedIndices([e,...this.selectedIndices]))},isSelected(e){return null!=this.selectedIndices.find((t=>t.id==e.id))}}}),rs=os,ns=(0,p.Z)(rs,Yt,Kt,!1,null,"65eed353",null),ls=ns.exports,cs=s(4713);const ds=()=>window.history.replaceState({},document.title,window.location.pathname);let us;const hs=()=>us,ps=({domain:e,clientId:t,audience:s,onRedirectCallback:a=ds,redirectUri:o=window.location.origin})=>us||(us=new i["default"]({data(){return{loading:!0,isAuthenticated:!1,user:{},auth0Client:null,popupOpen:!1,error:null}},methods:{async loginWithPopup(e,t){this.popupOpen=!0;try{await this.auth0Client.loginWithPopup(e,t),this.user=await this.auth0Client.getUser(),this.isAuthenticated=await this.auth0Client.isAuthenticated(),this.error=null}catch(s){this.error=s,console.error(s)}finally{this.popupOpen=!1}this.user=await this.auth0Client.getUser(),this.isAuthenticated=!0},async handleRedirectCallback(){this.loading=!0;try{await this.auth0Client.handleRedirectCallback(),this.user=await this.auth0Client.getUser(),this.isAuthenticated=!0,this.error=null}catch(e){this.error=e}finally{this.loading=!1}},loginWithRedirect(e){return this.auth0Client.loginWithRedirect(e)},getIdTokenClaims(e){return this.auth0Client.getIdTokenClaims(e)},getTokenSilently(e){return this.auth0Client.getTokenSilently(e)},getTokenWithPopup(e){return this.auth0Client.getTokenWithPopup(e)},logout(){return this.auth0Client.logout({logoutParams:{returnTo:window.location.origin}})}},async created(){this.auth0Client=await(0,cs._A)({domain:e,clientId:t,authorizationParams:{redirect_uri:o,audience:s}});try{if(window.location.search.includes("code=")&&window.location.search.includes("state=")){const{appState:e}=await this.auth0Client.handleRedirectCallback();this.error=null,a(e)}}catch(i){this.error=i}finally{this.isAuthenticated=await this.auth0Client.isAuthenticated(),this.user=await this.auth0Client.getUser(),this.loading=!1}}}),us),ms={install(e,t){e.prototype.$auth=ps(t)}},gs=2;i["default"].use(y.ZP);var fs=new y.ZP.Store({state:{seed:0,indices:[],tags:[],sist2Info:null,sizeMin:void 0,sizeMax:void 0,dateBoundsMin:null,dateBoundsMax:null,dateMin:void 0,dateMax:void 0,searchText:"",pathText:"",sortMode:"score",fuzzy:!1,optLang:"en",optLangIsDefault:!0,optHideDuplicates:!0,optTheme:"light",optDisplay:"grid",optSize:60,optHighlight:!0,optTagOrOperator:!1,optFuzzy:!0,optFragmentSize:200,optQueryMode:"simple",optSearchInPath:!1,optColumns:"auto",optSuggestPath:!0,optTreemapType:"cascaded",optTreemapTiling:"squarify",optTreemapColorGroupingDepth:3,optTreemapSize:"medium",optTreemapColor:"PuBuGn",optLightboxLoadOnlyCurrent:!1,optLightboxSlideDuration:15,optHideLegacy:!1,optUpdateMimeMap:!1,optUseDatePicker:!1,optVidPreviewInterval:700,optSimpleLightbox:!0,optShowTagPickerFilter:!0,_onLoadSelectedIndices:[],_onLoadSelectedMimeTypes:[],_onLoadSelectedTags:[],selectedIndices:[],selectedMimeTypes:[],selectedTags:[],lastQueryResults:null,keySequence:0,querySequence:0,uiTagHover:null,uiLightboxIsOpen:!1,uiShowLightbox:!1,uiLightboxSources:[],uiLightboxThumbs:[],uiLightboxCaptions:[],uiLightboxTypes:[],uiLightboxKey:0,uiLightboxSlide:0,uiReachedScrollEnd:!1,uiDetailsMimeAgg:null,uiShowDetails:!1,uiMimeMap:[],auth0Token:null},mutations:{setUiShowDetails:(e,t)=>e.uiShowDetails=t,setUiDetailsMimeAgg:(e,t)=>e.uiDetailsMimeAgg=t,setUiReachedScrollEnd:(e,t)=>e.uiReachedScrollEnd=t,setTags:(e,t)=>e.tags=t,setPathText:(e,t)=>e.pathText=t,setSizeMin:(e,t)=>e.sizeMin=t,setSizeMax:(e,t)=>e.sizeMax=t,setSist2Info:(e,t)=>e.sist2Info=t,setSeed:(e,t)=>e.seed=t,setOptHideDuplicates:(e,t)=>e.optHideDuplicates=t,setOptLang:(e,t)=>{e.optLang=t,e.optLangIsDefault=!1},setSortMode:(e,t)=>e.sortMode=t,setIndices:(e,t)=>{e.indices=t,e._onLoadSelectedIndices.length>0?e.selectedIndices=t.filter((t=>e._onLoadSelectedIndices.some((e=>t.id.startsWith(e))))):e.selectedIndices=t},setDateMin:(e,t)=>e.dateMin=t,setDateMax:(e,t)=>e.dateMax=t,setDateBoundsMin:(e,t)=>e.dateBoundsMin=t,setDateBoundsMax:(e,t)=>e.dateBoundsMax=t,setSearchText:(e,t)=>e.searchText=t,setFuzzy:(e,t)=>e.fuzzy=t,setLastQueryResult:(e,t)=>e.lastQueryResults=t,_setOnLoadSelectedIndices:(e,t)=>e._onLoadSelectedIndices=t,_setOnLoadSelectedMimeTypes:(e,t)=>e._onLoadSelectedMimeTypes=t,_setOnLoadSelectedTags:(e,t)=>e._onLoadSelectedTags=t,setSelectedIndices:(e,t)=>e.selectedIndices=t,setSelectedMimeTypes:(e,t)=>e.selectedMimeTypes=t,setSelectedTags:(e,t)=>e.selectedTags=t,setUiTagHover:(e,t)=>e.uiTagHover=t,setUiLightboxIsOpen:(e,t)=>e.uiLightboxIsOpen=t,_setUiShowLightbox:(e,t)=>e.uiShowLightbox=t,setUiLightboxKey:(e,t)=>e.uiLightboxKey=t,_setKeySequence:(e,t)=>e.keySequence=t,_setQuerySequence:(e,t)=>e.querySequence=t,addLightboxSource:(e,{source:t,thumbnail:s,caption:i,type:a})=>{e.uiLightboxSources.push(t),e.uiLightboxThumbs.push(s),e.uiLightboxCaptions.push(i),e.uiLightboxTypes.push(a)},setUiLightboxSlide:(e,t)=>e.uiLightboxSlide=t,setUiLightboxSources:(e,t)=>e.uiLightboxSources=t,setUiLightboxThumbs:(e,t)=>e.uiLightboxThumbs=t,setUiLightboxTypes:(e,t)=>e.uiLightboxTypes=t,setUiLightboxCaptions:(e,t)=>e.uiLightboxCaptions=t,setOptTheme:(e,t)=>e.optTheme=t,setOptDisplay:(e,t)=>e.optDisplay=t,setOptColumns:(e,t)=>e.optColumns=t,setOptHighlight:(e,t)=>e.optHighlight=t,setOptFuzzy:(e,t)=>e.fuzzy=t,setOptSearchInPath:(e,t)=>e.optSearchInPath=t,setOptSuggestPath:(e,t)=>e.optSuggestPath=t,setOptFragmentSize:(e,t)=>e.optFragmentSize=t,setOptQueryMode:(e,t)=>e.optQueryMode=t,setOptResultSize:(e,t)=>e.optSize=t,setOptTagOrOperator:(e,t)=>e.optTagOrOperator=t,setOptTreemapType:(e,t)=>e.optTreemapType=t,setOptTreemapTiling:(e,t)=>e.optTreemapTiling=t,setOptTreemapColorGroupingDepth:(e,t)=>e.optTreemapColorGroupingDepth=t,setOptTreemapSize:(e,t)=>e.optTreemapSize=t,setOptTreemapColor:(e,t)=>e.optTreemapColor=t,setOptHideLegacy:(e,t)=>e.optHideLegacy=t,setOptUpdateMimeMap:(e,t)=>e.optUpdateMimeMap=t,setOptUseDatePicker:(e,t)=>e.optUseDatePicker=t,setOptVidPreviewInterval:(e,t)=>e.optVidPreviewInterval=t,setOptSimpleLightbox:(e,t)=>e.optSimpleLightbox=t,setOptShowTagPickerFilter:(e,t)=>e.optShowTagPickerFilter=t,setOptLightboxLoadOnlyCurrent:(e,t)=>e.optLightboxLoadOnlyCurrent=t,setOptLightboxSlideDuration:(e,t)=>e.optLightboxSlideDuration=t,setUiMimeMap:(e,t)=>e.uiMimeMap=t,busUpdateWallItems:()=>{},busUpdateTags:()=>{},busSearch:()=>{},busTouchEnd:()=>{},busTnTouchStart:e=>{},setAuth0Token:(e,t)=>e.auth0Token=t},actions:{setSist2Info:(e,t)=>{e.commit("setSist2Info",t),e.state.optLangIsDefault&&e.commit("setOptLang",t.lang)},loadFromArgs({commit:e},t){t.query.q&&e("setSearchText",t.query.q),void 0!==t.query.fuzzy&&e("setFuzzy",!0),t.query.i&&e("_setOnLoadSelectedIndices",Array.isArray(t.query.i)?t.query.i:[t.query.i]),t.query.dMin&&e("setDateMin",Number(t.query.dMin)),t.query.dMax&&e("setDateMax",Number(t.query.dMax)),t.query.sMin&&e("setSizeMin",Number(t.query.sMin)),t.query.sMax&&e("setSizeMax",Number(t.query.sMax)),t.query.path&&e("setPathText",t.query.path),t.query.m&&e("_setOnLoadSelectedMimeTypes",q(t.query.m)),t.query.t&&e("_setOnLoadSelectedTags",t.query.t.split(",")),t.query.sort&&(e("setSortMode",t.query.sort),"random"===t.query.sort&&void 0===t.query.seed&&(t.query.seed=H().toString()),e("setSeed",Number(t.query.seed)))},async updateArgs({state:e},t){"/"===t.currentRoute.path&&await t.push({query:{q:e.searchText.trim()?e.searchText.trim().replace(/\s+/g," "):void 0,fuzzy:e.fuzzy?null:void 0,i:e.selectedIndices?e.selectedIndices.map((e=>e.idPrefix)):void 0,dMin:e.dateMin,dMax:e.dateMax,sMin:e.sizeMin,sMax:e.sizeMax,path:e.pathText?e.pathText:void 0,m:P(e.selectedMimeTypes),t:0==e.selectedTags.length?void 0:e.selectedTags.join(","),sort:"score"===e.sortMode?void 0:e.sortMode,seed:"random"===e.sortMode?e.seed.toString():void 0}}).catch((()=>{}))},updateConfiguration({state:e}){const t={};Object.keys(e).forEach((s=>{s.startsWith("opt")&&(t[s]=e[s])})),t["version"]=gs,localStorage.setItem("sist2_configuration",JSON.stringify(t))},loadConfiguration({state:e}){const t=localStorage.getItem("sist2_configuration");if(t){const s=JSON.parse(t);"version"in s&&s["version"]==gs||(localStorage.removeItem("sist2_configuration"),window.location.reload()),Object.keys(e).forEach((t=>{t.startsWith("opt")&&(e[t]=s[t])}))}},setSelectedIndices:({commit:e},t)=>e("setSelectedIndices",t),getKeySequence({commit:e,state:t}){const s=t.keySequence;return e("_setKeySequence",s+1),s},incrementQuerySequence({commit:e,state:t}){const s=t.querySequence;return e("_setQuerySequence",s+1),s},remountLightbox({commit:e,state:t}){e("setUiLightboxKey",t.uiLightboxKey+1)},showLightbox({commit:e,state:t}){e("_setUiShowLightbox",!t.uiShowLightbox)},clearResults({commit:e}){e("setLastQueryResult",null),e("_setKeySequence",0),e("_setUiShowLightbox",!1),e("setUiLightboxSources",[]),e("setUiLightboxThumbs",[]),e("setUiLightboxTypes",[]),e("setUiLightboxCaptions",[]),e("setUiLightboxKey",0),e("setUiDetailsMimeAgg",null)},async loadAuth0Token({commit:e}){const t=hs(),s=await t.getTokenSilently();e("setAuth0Token",s),document.cookie=`sist2-auth0=${s};`}},modules:{},getters:{seed:e=>e.seed,getPathText:e=>e.pathText,indices:e=>e.indices,sist2Info:e=>e.sist2Info,indexMap:e=>{const t={};return e.indices.forEach((e=>t[e.id]=e)),t},selectedIndices:e=>e.selectedIndices,_onLoadSelectedIndices:e=>e._onLoadSelectedIndices,selectedMimeTypes:e=>e.selectedMimeTypes,selectedTags:e=>e.selectedTags,dateMin:e=>e.dateMin,dateMax:e=>e.dateMax,sizeMin:e=>e.sizeMin,sizeMax:e=>e.sizeMax,searchText:e=>e.searchText,pathText:e=>e.pathText,fuzzy:e=>e.fuzzy,size:e=>e.optSize,sortMode:e=>e.sortMode,lastQueryResult:e=>e.lastQueryResults,lastDoc:function(e){return null==e.lastQueryResults?null:e.lastQueryResults.hits.hits.slice(-1)[0]},uiTagHover:e=>e.uiTagHover,uiShowLightbox:e=>e.uiShowLightbox,uiLightboxSources:e=>e.uiLightboxSources,uiLightboxThumbs:e=>e.uiLightboxThumbs,uiLightboxCaptions:e=>e.uiLightboxCaptions,uiLightboxTypes:e=>e.uiLightboxTypes,uiLightboxKey:e=>e.uiLightboxKey,uiLightboxSlide:e=>e.uiLightboxSlide,optHideDuplicates:e=>e.optHideDuplicates,optLang:e=>e.optLang,optTheme:e=>e.optTheme,optDisplay:e=>e.optDisplay,optColumns:e=>e.optColumns,optHighlight:e=>e.optHighlight,optTagOrOperator:e=>e.optTagOrOperator,optFuzzy:e=>e.optFuzzy,optSearchInPath:e=>e.optSearchInPath,optSuggestPath:e=>e.optSuggestPath,optFragmentSize:e=>e.optFragmentSize,optQueryMode:e=>e.optQueryMode,optTreemapType:e=>e.optTreemapType,optTreemapTiling:e=>e.optTreemapTiling,optTreemapSize:e=>e.optTreemapSize,optTreemapColorGroupingDepth:e=>e.optTreemapColorGroupingDepth,optTreemapColor:e=>e.optTreemapColor,optLightboxLoadOnlyCurrent:e=>e.optLightboxLoadOnlyCurrent,optLightboxSlideDuration:e=>e.optLightboxSlideDuration,optResultSize:e=>e.optSize,optHideLegacy:e=>e.optHideLegacy,optUpdateMimeMap:e=>e.optUpdateMimeMap,optUseDatePicker:e=>e.optUseDatePicker,optVidPreviewInterval:e=>e.optVidPreviewInterval,optSimpleLightbox:e=>e.optSimpleLightbox,optShowTagPickerFilter:e=>e.optShowTagPickerFilter}});const bs={score:{mode:[{_score:{order:"desc"}},{_tie:{order:"asc"}}],key:e=>e._score},random:{mode:[{_score:{order:"desc"}},{_tie:{order:"asc"}}],key:e=>e._score},dateAsc:{mode:[{mtime:{order:"asc"}},{_tie:{order:"asc"}}],key:e=>e._source.mtime},dateDesc:{mode:[{mtime:{order:"desc"}},{_tie:{order:"asc"}}],key:e=>e._source.mtime},sizeAsc:{mode:[{size:{order:"asc"}},{_tie:{order:"asc"}}],key:e=>e._source.size},sizeDesc:{mode:[{size:{order:"desc"}},{_tie:{order:"asc"}}],key:e=>e._source.size},nameAsc:{mode:[{name:{order:"asc"}},{_tie:{order:"asc"}}],key:e=>e._source.name},nameDesc:{mode:[{name:{order:"desc"}},{_tie:{order:"asc"}}],key:e=>e._source.name}};class vs{searchQuery(e=!1){const t=fs.getters,s=t.searchText,i=t.pathText,a=""===s,o=t.sizeMin,r=t.sizeMax,n=t.dateMin,l=t.dateMax,c=t.fuzzy,d=t.size,u=t.lastDoc,h=t.selectedIndices.map((e=>e.id)),p=t.selectedMimeTypes,m=t.selectedTags,g=fs.state.sist2Info.esVersionLegacy,f=[{terms:{index:h}}],b=["name^8","content^3","album^8","artist^8","title^8","genre^2","album_artist^8","font_name^6"];if(t.optSearchInPath&&b.push("path.text^5"),c&&(b.push("content.nGram"),t.optSearchInPath&&b.push("path.nGram"),b.push("name.nGram^3")),!e){o&&r?f.push({range:{size:{gte:o,lte:r}}}):o?f.push({range:{size:{gte:o}}}):r&&f.push({range:{size:{lte:r}}}),n&&l?f.push({range:{mtime:{gte:n,lte:l}}}):n?f.push({range:{mtime:{gte:n}}}):l&&f.push({range:{mtime:{lte:l}}});const e=i.replace(/\/$/,"").toLowerCase();""!==e&&f.push({term:{path:e}}),p.length>0&&f.push({terms:{mime:p}}),m.length>0&&(t.optTagOrOperator?f.push({terms:{tag:m}}):m.forEach((e=>f.push({term:{tag:e}}))))}let v;v="simple"===t.optQueryMode?{simple_query_string:{query:s,fields:b,default_operator:"and"}}:{query_string:{query:s,default_field:"name",default_operator:"and"}};const x={_source:{excludes:["content","_tie"]},query:{bool:{filter:f}},sort:bs[t.sortMode].mode,aggs:{total_size:{sum:{field:"size"}},total_count:{value_count:{field:"size"}}},size:d};return a||e||(x.query.bool.must=v),u&&(x.search_after=[bs[t.sortMode].key(u),u["_id"]]),t.optHighlight&&(x.highlight={pre_tags:["<mark>"],post_tags:["</mark>"],fragment_size:t.optFragmentSize,number_of_fragments:1,order:"score",fields:{content:{},name:{},"name.nGram":{},"content.nGram":{},font_name:{}}},g||(x.highlight.max_analyzed_offset=999999),t.optSearchInPath&&(x.highlight.fields["path.text"]={},x.highlight.fields["path.nGram"]={})),"random"===t.sortMode&&(x.query={function_score:{query:{bool:{must:f}},functions:[{random_score:{seed:t.seed,field:"_seq_no"},weight:1e3}],boost_mode:"sum"}},a||e||x.query.function_score.query.bool.must.push(v)),x}}var xs=new vs,ys=s(3279),_s=s.n(ys),Ts=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("GridLayout",{ref:"grid-layout",attrs:{options:e.gridOptions},on:{append:e.append,"layout-complete":function(t){return e.$emit("layout-complete")}}},e._l(e.docs,(function(t){return s("DocCard",{key:t._id,attrs:{doc:t,width:e.width}})})),1)},Ss=[],ws=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"doc-card",class:{"sub-document":e.doc._props.isSubDocument},style:"width: "+e.width+"px",on:{click:function(t){return e.$store.commit("busTnTouchStart",null)}}},[s("b-card",{attrs:{"no-body":"","img-top":""}},[s("DocInfoModal",{attrs:{show:e.showInfo,doc:e.doc},on:{close:function(t){e.showInfo=!1}}}),s("ContentDiv",{attrs:{doc:e.doc}}),s("FullThumbnail",{attrs:{doc:e.doc,"small-badge":e.smallBadge},on:{onThumbnailClick:function(t){return e.onThumbnailClick()}}}),e.doc._props.isAudio?s("audio",{ref:"audio",staticClass:"audio-fit fit",attrs:{preload:"none",controls:"",type:e.doc._source.mime,src:"f/"+e.doc._id},on:{play:function(t){return e.onAudioPlay()}}}):e._e(),s("b-card-body",{staticClass:"padding-03"},[s("div",{staticStyle:{display:"flex"}},[s("span",{staticClass:"info-icon",on:{click:function(t){return e.onInfoClick()}}}),s("DocFileTitle",{attrs:{doc:e.doc}})],1),s("div",{staticClass:"card-text"},[s("TagContainer",{attrs:{hit:e.doc}})],1)])],1)],1)},$s=[],Cs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{on:{mouseenter:function(t){e.showAddButton=!0},mouseleave:function(t){e.showAddButton=!1}}},[s("b-modal",{attrs:{title:e.$t("saveTagModalTitle"),"hide-footer":"","no-fade":"",centered:"",size:"lg",static:"",lazy:""},model:{value:e.showModal,callback:function(t){e.showModal=t},expression:"showModal"}},[s("b-row",[s("b-col",{staticStyle:{"flex-grow":"2"},attrs:{sm:""}},[s("VueSimpleSuggest",{ref:"suggest",staticClass:"form-control-fix-flex",staticStyle:{"margin-top":"17px"},attrs:{value:e.tagText,list:e.suggestTag,"max-suggestions":0,placeholder:e.$t("saveTagPlaceholder")},on:{select:function(t){return e.setTagText(t)},input:function(t){return e.setTagText(t)}},scopedSlots:e._u([{key:"suggestion-item",fn:function(t){var i=t.suggestion,a=t.query;return s("div",{},[s("div",{staticClass:"suggestion-line"},[s("span",{staticClass:"badge badge-suggestion",style:{background:e.getBg(i),color:e.getFg(i)}},[s("strong",[e._v(e._s(a))]),e._v(e._s(e.getSuggestionWithoutQueryPrefix(i,a))+" ")])])])}}])})],1),s("b-col",{staticClass:"mt-4"},[s("TwitterColorPicker",{staticClass:"mr-auto ml-auto",attrs:{triangle:"hide",width:252},model:{value:e.color,callback:function(t){e.color=t},expression:"color"}})],1)],1),s("b-button",{staticClass:"mt-2",staticStyle:{float:"right"},attrs:{variant:"primary"},on:{click:function(t){return e.saveTag()}}},[e._v(e._s(e.$t("confirm"))+" ")])],1),e._l(e.hit._tags,(function(t){return[t.userTag?s("div",{key:t.rawText,staticStyle:{display:"inline-block"}},[s("span",{staticClass:"badge pointer",class:e.badgeClass(t),style:e.badgeStyle(t),attrs:{id:e.hit._id+t.rawText,title:t.text,tabindex:"-1"},on:{contextmenu:function(s){return e.onTagRightClick(t,s)}}},[e._v(e._s(t.text.split(".").pop()))]),s("b-popover",{attrs:{target:e.hit._id+t.rawText,triggers:"focus blur",placement:"top"}},[s("b-button",{attrs:{variant:"danger"},on:{click:function(s){return e.onTagDeleteClick(t,s)}}},[e._v(e._s(e.$t("deleteTag")))])],1)],1):s("span",{key:t.text,staticClass:"badge",class:e.badgeClass(t),style:e.badgeStyle(t)},[e._v(e._s(t.text.split(".").pop()))])]})),e.showAddButton?s("small",{staticClass:"badge add-tag-button",on:{click:function(t){return e.tagAdd()}}},[e._v(e._s(e.$t("addTag")))]):s("small",{staticClass:"text-muted badge-size"},[e._v(e._s(e.humanFileSize(e.hit._source.size)))])],2)},ks=[],zs=s(4023),Ms=s(1201),Is=i["default"].extend({components:{TwitterColorPicker:zs.Twitter,VueSimpleSuggest:Ms.Z},props:["hit"],data(){return{showAddButton:!1,showModal:!1,tagText:null,color:{hex:"#e0e0e0"}}},computed:{tagHover(){return this.$store.getters["uiTagHover"]}},methods:{humanFileSize:z,getSuggestionWithoutQueryPrefix(e,t){return e.id.slice(t.length,-8)},getBg(e){return e.id.slice(-7)},getFg(e){return L(e.id.slice(-7))>50?"#000":"#fff"},setTagText(e){this.$refs.suggest.clearSuggestions(),"string"!==typeof e?(this.color={hex:"#"+e.id.split("#")[1]},this.tagText=e):this.tagText={id:e,title:e}},badgeClass(e){return`badge-${e.style}`},badgeStyle(e){return{background:e.bg,color:e.fg}},onTagHover(e){e.userTag&&this.$store.commit("setUiTagHover",e)},onTagLeave(){this.$store.commit("setUiTagHover",null)},onTagDeleteClick(e,t){this.hit._tags=this.hit._tags.filter((t=>t!==e)),F.deleteTag(e.rawText,this.hit).then((()=>{this.$store.commit("busUpdateWallItems"),this.$store.commit("busUpdateTags")}))},tagAdd(){this.showModal=!0},saveTag(){if(this.tagText.id.includes("#"))return void this.$bvToast.toast(this.$t("toast.invalidTag"),{title:this.$t("toast.invalidTagTitle"),noAutoHide:!0,toaster:"b-toaster-bottom-right",headerClass:"toast-header-error",bodyClass:"toast-body-error"});let e=this.tagText.id+this.color.hex.replace("#",".#");const t=this.hit._tags.filter((e=>e.userTag));null==t.find((t=>t.rawText===e))?(this.hit._tags.push(F.createUserTag(e)),F.saveTag(e,this.hit).then((()=>{this.tagText=null,this.showModal=!1,this.$store.commit("busUpdateWallItems"),this.$store.commit("busUpdateTags")}))):this.$bvToast.toast(this.$t("toast.dupeTag"),{title:this.$t("toast.dupeTagTitle"),noAutoHide:!0,toaster:"b-toaster-bottom-right",headerClass:"toast-header-error",bodyClass:"toast-body-error"})},async suggestTag(e){e=e.toLowerCase();const t=await this.getTagChoices(e);let s=[];for(let i=0;i<t.length;i++)~t[i].toLowerCase().indexOf(e)&&s.push(t[i]);return s.sort().map((e=>({title:e.split(".").slice(0,-1).join("."),id:e})))},getTagChoices(e){return new Promise((t=>{F.esQuery({suggest:{tag:{prefix:e,completion:{field:"suggest-tag",skip_duplicates:!0,size:1e4}}}}).then((e=>{const s=[];e["suggest"]["tag"][0]["options"].map((e=>e["_source"]["tag"])).forEach((e=>{e.forEach((e=>{const t=e.slice(0,-8);s.find((e=>e.slice(0,-8)===t))||s.push(e)}))})),t(s)}))}))}}}),Ls=Is,Ds=(0,p.Z)(Ls,Cs,ks,!1,null,"c5eaaf14",null),Os=Ds.exports,Ps=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a",{staticClass:"file-title-anchor",attrs:{href:"f/"+e.doc._id,target:"_blank"}},[s("div",{staticClass:"file-title",attrs:{title:e.doc._source.path+"/"+e.doc._source.name+e.ext(e.doc)},domProps:{innerHTML:e._s(e.fileName()+e.ext(e.doc))}})])},qs=[],Es={name:"DocFileTitle",props:["doc"],methods:{ext:S,fileName(){return this.doc.highlight?this.doc.highlight["name.nGram"]?this.doc.highlight["name.nGram"]:this.doc.highlight.name?this.doc.highlight.name:this.doc._source.name:this.doc._source.name}}},As=Es,Hs=(0,p.Z)(As,Ps,qs,!1,null,"786adab2",null),Us=Hs.exports,Bs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-modal",{attrs:{visible:e.show,size:"lg","hide-footer":!0,static:"",lazy:""},on:{close:function(t){return e.$emit("close")},hide:function(t){return e.$emit("close")}},scopedSlots:e._u([{key:"modal-title",fn:function(){return[s("h5",{staticClass:"modal-title",attrs:{title:e.doc._source.name+e.ext(e.doc)}},[e._v(" "+e._s(e.doc._source.name+e.ext(e.doc))+" "),s("router-link",{attrs:{to:"/file?byId="+e.doc._id}},[e._v("#")])],1)]},proxy:!0}])},[e.doc._props.hasThumbnail?s("img",{staticClass:"fit card-img-top",attrs:{src:"t/"+e.doc._source.index+"/"+e.doc._id,alt:""}}):e._e(),s("InfoTable",{attrs:{doc:e.doc}}),s("LazyContentDiv",{attrs:{"doc-id":e.doc._id}})],1)},Fs=[],Ns=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-table",{staticClass:"mb-0 mt-4",attrs:{items:e.tableItems,small:"",borderless:"",responsive:"md","thead-class":"hidden"},scopedSlots:e._u([{key:"cell(value)",fn:function(t){return["html"in t.item?s("span",{domProps:{innerHTML:e._s(t.item.html)}}):s("span",[e._v(e._s(t.value))])]}}])})},Rs=[];function Vs(e,t){return isNaN(e)||isNaN(t)?"":`<a target="_blank" href="https://maps.google.com/?q=${e},${t}&ll=${e},${t}&t=k&z=17">${e}, ${t}</a>`}function Zs(e,t){const s=e.split(","),i=Number(s[0].trim().split(":")[0])/Number(s[0].trim().split(":")[1]),a=Number(s[1].trim().split(":")[0])/Number(s[1].trim().split(":")[1]),o=Number(s[2].trim().split(":")[0])/Number(s[2].trim().split(":")[1]);return(i+a/60+o/3600)*("S"===t||"W"===t?-1:1)}var Qs={name:"InfoTable",props:["doc"],data(){return{indexName:"loading..."}},computed:{tableItems(){this.indexName;const e=this.doc._source,t=[{key:"index",value:`[${this.indexName}]`},{key:"mtime",value:I(e.mtime)},{key:"mime",value:e.mime},{key:"size",value:z(e.size)},{key:"path",value:e.path}];"width"in this.doc._source&&t.push({key:"image size",value:`${e.width}x${e.height}`});const s=["title","duration","audioc","videoc","bitrate","artist","album","album_artist","genre","font_name","author","modified_by","pages","tag","exif_make","exif_software","exif_exposure_time","exif_fnumber","exif_focal_length","exif_user_comment","exif_iso_speed_ratings","exif_model","exif_datetime","checksum"];return s.forEach((s=>{s in e&&t.push({key:s,value:e[s]})})),Object.keys(e).forEach((s=>{(s.startsWith("mt_")||s.startsWith("int_"))&&t.push({key:s,value:e[s]})})),"exif_gps_longitude_dec"in e?t.push({key:"Exif GPS",html:Vs(e["exif_gps_latitude_dec"],e["exif_gps_longitude_dec"])}):"exif_gps_longitude_dms"in e&&t.push({key:"Exif GPS",html:Vs(Zs(e["exif_gps_latitude_dms"],e["exif_gps_latitude_ref"]),Zs(e["exif_gps_longitude_dms"],e["exif_gps_longitude_ref"]))}),t}},mounted(){this.$store.getters.indexMap[this.doc.index]&&(this.indexName=this.$store.getters.indexMap[this.doc._source.index].name),window.setTimeout((()=>{this.indexName=this.$store.getters.indexMap[this.doc._source.index].name}),500)}},Gs=Qs,js=(0,p.Z)(Gs,Ns,Rs,!1,null,"7ab9d2ea",null),Ws=js.exports,Ys=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.loading?s("Preloader"):e.content?s("div",{staticClass:"content-div",domProps:{innerHTML:e._s(e.content)}}):e._e()},Ks=[],Js={name:"LazyContentDiv",components:{Preloader:xe},props:["docId"],data(){return{content:"",loading:!0}},mounted(){const e=xs.searchQuery();if(this.$store.state.optHighlight){const t=this.$store.state.fuzzy?{"content.nGram":{}}:{content:{}};e.highlight={pre_tags:["<mark>"],post_tags:["</mark>"],number_of_fragments:0,fields:t},fs.state.sist2Info.esVersionLegacy||(e.highlight.max_analyzed_offset=999999)}"function_score"in e.query&&(e.query=e.query.function_score.query),"must"in e.query.bool?Array.isArray(e.query.bool.must)||(e.query.bool.must=[e.query.bool.must]):e.query.bool.must=[],e.query.bool.must.push({match:{_id:this.docId}}),delete e["sort"],delete e["aggs"],delete e["search_after"],delete e.query["function_score"],e._source={includes:["content","name","path","extension"]},e.size=1,F.esQuery(e).then((e=>{this.loading=!1,1===e.hits.hits.length?this.content=this.getContent(e.hits.hits[0]):(console.log("FIXME: could not get content"),console.log(e))}))},methods:{getContent(e){return e.highlight?e.highlight["content.nGram"]?e.highlight["content.nGram"][0]:e.highlight.content?e.highlight.content[0]:void 0:e._source.content}}},Xs=Js,ei=(0,p.Z)(Xs,Ys,Ks,!1,null,"a6d6bc52",null),ti=ei.exports,si={name:"DocInfoModal",components:{LazyContentDiv:ti,InfoTable:Ws},props:["doc","show"],methods:{ext:S}},ii=si,ai=(0,p.Z)(ii,Bs,Fs,!1,null,"1410bcc9",null),oi=ai.exports,ri=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.content()?s("div",{staticClass:"content-div",domProps:{innerHTML:e._s(e.content())}}):e._e()},ni=[],li={name:"ContentDiv",props:["doc"],methods:{content(){return this.doc.highlight?this.doc.highlight["content.nGram"]?this.doc.highlight["content.nGram"][0]:this.doc.highlight.content?this.doc.highlight.content[0]:void 0:null}}},ci=li,di=(0,p.Z)(ci,ri,ni,!1,null,"a093e946",null),ui=di.exports,hi=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.doc._props.hasThumbnail?s("div",{staticClass:"img-wrapper",on:{mouseenter:function(t){return e.onTnEnter()},mouseleave:function(t){return e.onTnLeave()},touchstart:function(t){return e.onTouchStart()}}},[e.doc._props.isAudio?s("div",{staticClass:"card-img-overlay",class:{"small-badge":e.smallBadge}},[s("span",{staticClass:"badge badge-resolution"},[e._v(e._s(e.humanTime(e.doc._source.duration)))])]):e._e(),e.doc._props.isImage&&!e.hover&&e.doc._props.tnW/e.doc._props.tnH<5?s("div",{staticClass:"card-img-overlay",class:{"small-badge":e.smallBadge}},[s("span",{staticClass:"badge badge-resolution"},[e._v(e._s(e.doc._source.width+"x"+e.doc._source.height))])]):e._e(),(e.doc._props.isVideo||e.doc._props.isGif)&&e.doc._source.duration>0&&!e.hover?s("div",{staticClass:"card-img-overlay",class:{"small-badge":e.smallBadge}},[s("span",{staticClass:"badge badge-resolution"},[e._v(e._s(e.humanTime(e.doc._source.duration)))])]):e._e(),e.doc._props.isPlayableVideo?s("div",{staticClass:"play"},[s("svg",{attrs:{viewBox:"0 0 494.942 494.942",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{d:"m35.353 0 424.236 247.471-424.236 247.471z"}})])]):e._e(),e.doc._props.isPlayableImage||e.doc._props.isPlayableVideo?s("img",{ref:"tn",staticClass:"pointer fit card-img-top",style:{height:e.doc._props.isGif&&e.hover?e.tnHeight()+"px":void 0},attrs:{src:e.tnSrc,alt:""},on:{click:function(t){return e.onThumbnailClick()}}}):s("img",{staticClass:"fit card-img-top",attrs:{src:e.tnSrc,alt:""}}),e.hover&&e.doc._props.hasVidPreview?s("ThumbnailProgressBar",{attrs:{progress:(e.currentThumbnailNum+1)/e.doc._props.tnNum}}):e._e()],1):e._e()},pi=[],mi=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"thumbnail-progress-bar",style:{width:e.percentProgress+"%"}})},gi=[],fi={name:"ThumbnailProgressBar",props:["doc","progress"],computed:{percentProgress(){return Math.min(Math.max(100*this.progress,0),100)}}},bi=fi,vi=(0,p.Z)(bi,mi,gi,!1,null,"5375f4d0",null),xi=vi.exports,yi={name:"FullThumbnail",props:["doc","smallBadge"],components:{ThumbnailProgressBar:xi},data(){return{hover:!1,currentThumbnailNum:0,timeoutId:null}},created(){this.$store.subscribe((e=>{"busTnTouchStart"===e.type&&e.payload!==this.doc._id&&this.onTnLeave()}))},computed:{tnSrc(){const e=this.doc,t=e._props;return t.isGif&&this.hover?`f/${e._id}`:0===this.currentThumbnailNum?`t/${e._source.index}/${e._id}`:`t/${e._source.index}/${e._id}${String(this.currentThumbnailNum).padStart(4,"0")}`}},methods:{humanTime:M,onThumbnailClick(){this.$emit("onThumbnailClick")},tnHeight(){return this.$refs.tn.height},tnWidth(){return this.$refs.tn.width},onTnEnter(){this.hover=!0,this.doc._props.hasVidPreview&&(this.currentThumbnailNum+=1,this.scheduleNextTnNum())},onTnLeave(){this.currentThumbnailNum=0,this.hover=!1,null!==this.timeoutId&&(window.clearTimeout(this.timeoutId),this.timeoutId=null)},scheduleNextTnNum(){const e=this.$store.state.optVidPreviewInterval??700;this.timeoutId=window.setTimeout((()=>{this.hover&&(this.scheduleNextTnNum(),this.currentThumbnailNum===this.doc._props.tnNum-1?this.currentThumbnailNum=0:this.currentThumbnailNum+=1)}),e)},onTouchStart(){this.$store.commit("busTnTouchStart",this.doc._id),this.hover||this.onTnEnter()}}},_i=yi,Ti=(0,p.Z)(_i,hi,pi,!1,null,"46bd3aec",null),Si=Ti.exports,wi={components:{FullThumbnail:Si,ContentDiv:ui,DocInfoModal:oi,DocFileTitle:Us,TagContainer:Os},props:["doc","width"],data(){return{ext:S,showInfo:!1}},computed:{smallBadge(){return this.width<150}},methods:{humanFileSize:z,humanTime:M,onInfoClick(){this.showInfo=!0},async onThumbnailClick(){this.$store.commit("setUiLightboxSlide",this.doc._seq),await this.$store.dispatch("showLightbox")},onAudioPlay(){document.getElementsByTagName("audio").forEach((e=>{e!==this.$refs["audio"]&&e.pause()}))}}},$i=wi,Ci=(0,p.Z)($i,ws,$s,!1,null,"4abe9659",null),ki=Ci.exports,zi=s(5921);i["default"].use(zi.ZP);var Mi=i["default"].extend({components:{DocCard:ki},props:["docs","append"],data(){return{width:0,gridOptions:{align:"center",margin:0,transitionDuration:0,isOverflowScroll:!1,isConstantSize:!1,useFit:!1,useRecycle:!1}}},computed:{colCount(){const e=this.$store.getters["optColumns"];return"auto"===e?Math.round(this.$refs["grid-layout"].$el.scrollWidth/300):e}},mounted(){this.width=this.$refs["grid-layout"].$el.scrollWidth/this.colCount,1===this.colCount&&this.$refs["grid-layout"].$el.classList.add("grid-single-column"),this.$store.subscribe((e=>{"busUpdateWallItems"===e.type&&this.$refs["grid-layout"]&&this.$refs["grid-layout"].updateItems()}))}}),Ii=Mi,Li=(0,p.Z)(Ii,Ts,Ss,!1,null,null,null),Di=Li.exports,Oi=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{"disable-animations":e.$store.state.optSimpleLightbox}},[s("FsLightbox",{key:e.lightboxKey,ref:"lightbox",attrs:{toggler:e.showLightbox,sources:e.lightboxSources,thumbs:e.lightboxThumbs,captions:e.lightboxCaptions,types:e.lightboxTypes,"source-index":e.lightboxSlide,"custom-toolbar-buttons":e.customButtons,"slideshow-time":1e3*e.$store.getters.optLightboxSlideDuration,"zoom-increment":.25,"load-only-current-source":e.$store.getters.optLightboxLoadOnlyCurrent,"on-close":e.onClose,"on-open":e.onShow,"on-slide-change":e.onSlideChange}}),s("a",{staticStyle:{display:"none"},attrs:{id:"lightbox-download"}})],1)},Pi=[],qi=s(8256),Ei=s.n(qi),Ai={name:"Lightbox",components:{FsLightbox:Ei()},data(){return{disableAnimations:!0,customButtons:[{viewBox:"0 0 384.928 384.928",d:"M321.339,245.334c-4.74-4.692-12.439-4.704-17.179,0l-99.551,98.564V12.03 c0-6.641-5.438-12.03-12.151-12.03s-12.151,5.39-12.151,12.03v331.868l-99.551-98.552c-4.74-4.704-12.439-4.704-17.179,0 s-4.74,12.319,0,17.011l120.291,119.088c4.692,4.644,12.499,4.644,17.191,0l120.291-119.088 C326.091,257.653,326.091,250.038,321.339,245.334C316.599,240.642,326.091,250.038,321.339,245.334z",width:"17px",height:"17px",title:"Download",onClick:this.onDownloadClick}]}},computed:{showLightbox(){return this.$store.getters["uiShowLightbox"]},lightboxSources(){return this.$store.getters["uiLightboxSources"]},lightboxThumbs(){return this.$store.getters["uiLightboxThumbs"]},lightboxKey(){return this.$store.getters["uiLightboxKey"]},lightboxSlide(){return this.$store.getters["uiLightboxSlide"]},lightboxCaptions(){return this.$store.getters["uiLightboxCaptions"]},lightboxTypes(){return this.$store.getters["uiLightboxTypes"]}},mounted(){const e=document.onkeydown;document.onkeydown=t=>{const s=this.keyDownListener(t);if(e&&s)return e(t)}},methods:{keyDownListener(e){const t=void 0===this.$refs.lightbox||void 0===this.$refs.lightbox.$el.tagName;if(t)return!0;const s=this.$refs.lightbox.fsLightboxStore.slice(-1)[0];switch(e.key){case" ":return e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),[...document.getElementsByClassName("fslightbox-absoluted")].forEach((e=>{if("translate(0px)"===e.style.transform||"translate(0px, 0px)"===e.style.transform){const t=e.getElementsByTagName("video")[0];t&&(t.paused?t.play():t.pause())}return!1})),!1;case"ArrowUp":case"k":return!s.data.isThumbing&&s.core.thumbsToggler&&s.core.thumbsToggler.toggleThumbs(),!1;case"ArrowDown":case"j":return s.data.isThumbing&&s.core.thumbsToggler&&s.core.thumbsToggler.toggleThumbs(),!1;case"h":return s.core.stageManager.getPreviousSlideIndex&&s.core.slideIndexChanger.jumpTo(s.core.stageManager.getPreviousSlideIndex()),!1;case"l":return s.core.stageManager.getNextSlideIndex&&s.core.slideIndexChanger.jumpTo(s.core.stageManager.getNextSlideIndex()),!1}return!0},onDownloadClick(){const e=this.lightboxSources[this.lightboxSlide],t=document.getElementById("lightbox-download");t.setAttribute("href",e),t.setAttribute("download",""),t.click()},onShow(){this.$store.commit("setUiLightboxIsOpen",!0)},onClose(){this.$store.commit("setUiLightboxIsOpen",!1)},onSlideChange(){document.getElementsByTagName("video").forEach((e=>{e.pause()}))}}},Hi=Ai,Ui=(0,p.Z)(Hi,Oi,Pi,!1,null,null,null),Bi=Ui.exports,Fi=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"lightbox-caption"},[s("p",[s("b",[e._v(e._s("["+e.$store.getters.indices.find((function(t){return t.id===e.hit._source.index})).name+"]"))]),e._v(e._s((""===e.hit._source.path?"":"/")+e.hit._source.path+"/"+e.hit._source.name+e.ext(e.hit))+" ")]),s("p",{staticStyle:{"margin-top":"-1em"}},[e.hit._source.width?s("span",[e._v(e._s(e.hit._source.width+"x"+e.hit._source.height))]):e._e(),e._v(" "+e._s(" ("+e.humanFileSize(e.hit._source.size)+")")+" ")])])},Ni=[],Ri={name:"LightboxCaption",props:["hit"],methods:{humanFileSize:z,ext:S}},Vi=Ri,Zi=(0,p.Z)(Vi,Fi,Ni,!1,null,null,null),Qi=Zi.exports,Gi=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"mimeTree"}})},ji=[],Wi=s(1377),Yi=s.n(Wi),Ki=s(5770),Ji=s.n(Ki),Xi={name:"MimePicker",data(){return{mimeTree:null,stashedMimeTreeAttributes:null,updateBusy:!1}},mounted(){this.$store.subscribe((e=>{"setUiMimeMap"===e.type&&null===this.mimeTree?this.initializeTree():"busSearch"===e.type&&this.updateTree()}))},methods:{handleTreeClick(e,t){"indeterminate"!==t&&"collapsed"!==t&&"rendered"!==t&&"focused"!==t&&(this.updateBusy||this.$store.commit("setSelectedMimeTypes",D(this.mimeTree)))},updateTree(){if(!1===this.$store.getters.optUpdateMimeMap)return;if(this.updateBusy)return;this.updateBusy=!0,null===this.stashedMimeTreeAttributes&&(this.stashedMimeTreeAttributes=O(this.mimeTree));const e=xs.searchQuery();F.getMimeTypes(e).then((({buckets:e,mimeMap:t})=>{this.$store.commit("setUiMimeMap",t),this.$store.commit("setUiDetailsMimeAgg",e),this.mimeTree.removeAll(),this.mimeTree.addNodes(t),null===this.stashedMimeTreeAttributes&&(this.stashedMimeTreeAttributes={},this.$store.state.selectedMimeTypes.forEach((e=>{this.stashedMimeTreeAttributes[e]={checked:!0}}))),Object.entries(this.stashedMimeTreeAttributes).forEach((([e,t])=>{this.mimeTree.node(e)&&(t.checked&&this.mimeTree.node(e).select(),!1===t.collapsed&&this.mimeTree.node(e).expand())})),this.stashedMimeTreeAttributes=null,this.updateBusy=!1}))},initializeTree(){const e=this.$store.state.uiMimeMap;this.mimeTree=new(Yi())({selection:{mode:"checkbox"},data:e}),new(Ji())(this.mimeTree,{target:"#mimeTree"}),this.mimeTree.on("node.state.changed",this.handleTreeClick),this.mimeTree.deselect(),this.$store.state._onLoadSelectedMimeTypes.length>0&&this.$store.state._onLoadSelectedMimeTypes.forEach((e=>{this.mimeTree.node(e).select()}))}}},ea=Xi,ta=(0,p.Z)(ea,Gi,ji,!1,null,"0d11f670",null),sa=ta.exports,ia=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.lastResultsLoaded?s("b-card",{attrs:{id:"results"}},[s("span",[e._v(e._s(e.hitCount)+" "+e._s(1===e.hitCount?e.$t("hit"):e.$t("hits")))]),s("div",{staticStyle:{float:"right"}},[s("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse-1",modifiers:{"collapse-1":!0}}],staticClass:"not-mobile",attrs:{variant:"primary"},on:{click:function(t){return e.onToggle()}}},[e._v(e._s(e.$t("details"))+" ")]),0!==e.hitCount?[s("SortSelect",{staticClass:"ml-2"}),s("DisplayModeToggle",{staticClass:"ml-2"})]:e._e()],2),s("b-collapse",{staticClass:"pt-2",staticStyle:{clear:"both"},attrs:{id:"collapse-1"}},[s("b-card",[s("b-table",{staticClass:"mb-0",attrs:{items:e.tableItems,small:"",borderless:"",bordered:"","thead-class":"hidden"}}),s("br"),s("h4",[e._v(" "+e._s(e.$t("mimeTypes"))+" "),s("b-button",{staticClass:"float-right",attrs:{size:"sm",variant:"primary"},on:{click:e.onCopyClick}},[s("ClipboardIcon")],1)],1),null==e.$store.state.uiDetailsMimeAgg?s("Preloader"):s("b-table",{staticClass:"mb-0",attrs:{"sort-by":"doc_count","sort-desc":!0,"thead-class":"hidden",items:e.$store.state.uiDetailsMimeAgg,small:"",bordered:""}})],1)],1)],1):e._e()},aa=[],oa=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-button-group",[s("b-button",{attrs:{variant:"primary",title:e.$t("displayMode.list"),pressed:"list"===e.optDisplay},on:{click:function(t){return e.setOptDisplay("list")}}},[s("svg",{attrs:{width:"20px",height:"20px",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"}},[s("path",{attrs:{fill:"currentColor",d:"M80 368H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm0-320H16A16 16 0 0 0 0 64v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16V64a16 16 0 0 0-16-16zm0 160H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm416 176H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"}})])]),s("b-button",{attrs:{variant:"primary",title:e.$t("displayMode.grid"),pressed:"grid"===e.optDisplay},on:{click:function(t){return e.setOptDisplay("grid")}}},[s("svg",{attrs:{width:"20px",height:"20px",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"}},[s("path",{attrs:{fill:"currentColor",d:"M149.333 56v80c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V56c0-13.255 10.745-24 24-24h101.333c13.255 0 24 10.745 24 24zm181.334 240v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.256 0 24.001-10.745 24.001-24zm32-240v80c0 13.255 10.745 24 24 24H488c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24zm-32 80V56c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.256 0 24.001-10.745 24.001-24zm-205.334 56H24c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24zM0 376v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H24c-13.255 0-24 10.745-24 24zm386.667-56H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zm0 160H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zM181.333 376v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24z"}})])])],1)},ra=[],na={name:"DisplayModeToggle",computed:{...(0,y.Se)(["optDisplay"])},methods:{...(0,y.OI)(["setOptDisplay"])}},la=na,ca=(0,p.Z)(la,oa,ra,!1,null,"747547a4",null),da=ca.exports,ua=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-dropdown",{attrs:{variant:"primary"},scopedSlots:e._u([{key:"button-content",fn:function(){return[s("svg",{attrs:{"aria-hidden":"true",width:"20px",height:"20px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"}},[s("path",{attrs:{fill:"currentColor",d:"M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41zm255-105L177 64c-9.4-9.4-24.6-9.4-33.9 0L24 183c-15.1 15.1-4.4 41 17 41h238c21.4 0 32.1-25.9 17-41z"}})])]},proxy:!0}])},[s("b-dropdown-item",{class:{"dropdown-active":"score"===e.sort},on:{click:function(t){return e.onSelect("score")}}},[e._v(e._s(e.$t("sort.relevance"))+" ")]),s("b-dropdown-item",{class:{"dropdown-active":"dateAsc"===e.sort},on:{click:function(t){return e.onSelect("dateAsc")}}},[e._v(e._s(e.$t("sort.dateAsc"))+" ")]),s("b-dropdown-item",{class:{"dropdown-active":"dateDesc"===e.sort},on:{click:function(t){return e.onSelect("dateDesc")}}},[e._v(" "+e._s(e.$t("sort.dateDesc"))+" ")]),s("b-dropdown-item",{class:{"dropdown-active":"sizeAsc"===e.sort},on:{click:function(t){return e.onSelect("sizeAsc")}}},[e._v(e._s(e.$t("sort.sizeAsc"))+" ")]),s("b-dropdown-item",{class:{"dropdown-active":"sizeDesc"===e.sort},on:{click:function(t){return e.onSelect("sizeDesc")}}},[e._v(" "+e._s(e.$t("sort.sizeDesc"))+" ")]),s("b-dropdown-item",{class:{"dropdown-active":"nameDesc"===e.sort},on:{click:function(t){return e.onSelect("nameDesc")}}},[e._v(" "+e._s(e.$t("sort.nameDesc"))+" ")]),s("b-dropdown-item",{class:{"dropdown-active":"nameAsc"===e.sort},on:{click:function(t){return e.onSelect("nameAsc")}}},[e._v(" "+e._s(e.$t("sort.nameAsc"))+" ")]),s("b-dropdown-item",{class:{"dropdown-active":"random"===e.sort},on:{click:function(t){return e.onSelect("random")}}},[e._v(" "+e._s(e.$t("sort.random"))+" ")])],1)},ha=[],pa={name:"SortSelect",computed:{sort(){return this.$store.state.sortMode}},methods:{onSelect(e){"random"===e&&this.$store.commit("setSeed",H()),this.$store.commit("setSortMode",e)}}},ma=pa,ga=(0,p.Z)(ma,ua,ha,!1,null,null,null),fa=ga.exports,ba=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("svg",{staticStyle:{width:"24px",height:"24px"},attrs:{viewBox:"0 0 24 24"}},[s("path",{attrs:{fill:"currentColor",d:"M17,9H7V7H17M17,13H7V11H17M14,17H7V15H14M12,3A1,1 0 0,1 13,4A1,1 0 0,1 12,5A1,1 0 0,1 11,4A1,1 0 0,1 12,3M19,3H14.82C14.4,1.84 13.3,1 12,1C10.7,1 9.6,1.84 9.18,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3Z"}})])},va=[],xa={name:"ClipboardIcon"},ya=xa,_a=(0,p.Z)(ya,ba,va,!1,null,"16fbad22",null),Ta=_a.exports,Sa=i["default"].extend({name:"ResultsCard",components:{ClipboardIcon:Ta,Preloader:xe,SortSelect:fa,DisplayModeToggle:da},created(){},computed:{lastResultsLoaded(){return null!=this.$store.state.lastQueryResults},hitCount(){return this.$store.state.lastQueryResults.aggregations.total_count.value},tableItems(){const e=[];return e.push({key:this.$t("queryTime"),value:this.took()}),e.push({key:this.$t("totalSize"),value:this.totalSize()}),e}},methods:{took(){return this.$store.state.lastQueryResults.took+"ms"},totalSize(){return z(this.$store.state.lastQueryResults.aggregations.total_size.value)},onToggle(){const e=!document.getElementById("collapse-1").classList.contains("show");this.$store.commit("setUiShowDetails",e),e&&null==this.$store.state.uiDetailsMimeAgg&&!this.$store.state.optUpdateMimeMap&&this.forceUpdateMimeAgg()},onCopyClick(){let e="";this.$store.state.uiDetailsMimeAgg.slice().sort(((e,t)=>t["doc_count"]-e["doc_count"])).forEach((t=>{e+=`${t["key"]}\t${t["doc_count"]}\n`})),navigator.clipboard.writeText(e),this.$bvToast.toast(this.$t("toast.copiedToClipboard"),{title:null,noAutoHide:!1,toaster:"b-toaster-bottom-right",headerClass:"hidden",bodyClass:"toast-body-info"})},forceUpdateMimeAgg(){const e=xs.searchQuery();F.getMimeTypes(e).then((({buckets:e})=>{this.$store.commit("setUiDetailsMimeAgg",e)}))}}}),wa=Sa,$a=(0,p.Z)(wa,ia,aa,!1,null,null,null),Ca=$a.exports,ka=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"input-group",staticStyle:{"margin-bottom":"0.5em","margin-top":"1em"}},[s("div",{staticClass:"input-group-prepend"},[s("b-button",{attrs:{variant:"outline-secondary"},on:{click:function(t){return e.$refs["path-modal"].show()}}},[s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",width:"20px"}},[s("path",{attrs:{fill:"currentColor",d:"M288 224h224a32 32 0 0 0 32-32V64a32 32 0 0 0-32-32H400L368 0h-80a32 32 0 0 0-32 32v64H64V8a8 8 0 0 0-8-8H40a8 8 0 0 0-8 8v392a16 16 0 0 0 16 16h208v64a32 32 0 0 0 32 32h224a32 32 0 0 0 32-32V352a32 32 0 0 0-32-32H400l-32-32h-80a32 32 0 0 0-32 32v64H64V128h192v64a32 32 0 0 0 32 32zm0 96h66.74l32 32H512v128H288zm0-288h66.74l32 32H512v128H288z"}})])])],1),s("VueSimpleSuggest",{staticClass:"form-control-fix-flex",attrs:{value:e.getPathText,list:e.suggestPath,"max-suggestions":0,placeholder:e.$t("pathBar.placeholder")},on:{input:e.setPathText},scopedSlots:e._u([{key:"suggestion-item",fn:function(t){var i=t.suggestion,a=t.query;return s("div",{},[s("div",{staticClass:"suggestion-line",attrs:{title:i}},[s("strong",[e._v(e._s(a))]),e._v(e._s(e.getSuggestionWithoutQueryPrefix(i,a))+" ")])])}}])})],1),s("b-modal",{ref:"path-modal",attrs:{title:e.$t("pathBar.modalTitle"),size:"lg","hide-footer":!0,static:""}},[s("div",{attrs:{id:"pathTree"}})])],1)},za=[],Ma={name:"PathTree",components:{VueSimpleSuggest:Ms.Z},data(){return{mimeTree:null,pathItems:[],tmpPath:""}},computed:{...(0,y.Se)(["getPathText"])},mounted(){this.$store.subscribe((e=>{if("setIndices"===e.type){let e=new(Yi())({data:(e,t,s)=>this.getNextDepth(e),sort:"text"});this.$store.state.indices.forEach((t=>{e.addNode({id:"/"+t.id,values:["/"+t.id],text:`/[${t.name}]`,index:t.id,depth:0,children:!0})})),new(Ji())(e,{target:"#pathTree"}),e.on("node.click",this.handleTreeClick),e.expand()}}))},methods:{...(0,y.OI)(["setPathText"]),getSuggestionWithoutQueryPrefix(e,t){return e.slice(t.length)},async getPathChoices(){return new Promise((e=>{const t={suggest:{path:{prefix:this.getPathText,completion:{field:"suggest-path",skip_duplicates:!0,size:1e4}}}};F.esQuery(t).then((t=>e(t["suggest"]["path"][0]["options"].map((e=>e["_source"]["path"])))))}))},async suggestPath(e){if(!this.$store.state.optSuggestPath)return[];e=e.toLowerCase();const t=await this.getPathChoices();let s=[];for(let i=0;i<t.length;i++)~t[i].toLowerCase().indexOf(e)&&s.push(t[i]);return s.sort(((e,t)=>e.length-t.length))},getNextDepth(e){const t={query:{bool:{filter:[{term:{index:e.index}},{range:{_depth:{gte:e.depth+1,lte:e.depth+3}}}]}},aggs:{paths:{terms:{field:"path",size:1e4}}},size:0};return e.depth>0&&(t.query.bool.must={prefix:{path:e.id}}),F.esQuery(t).then((t=>{const s=t["aggregations"]["paths"]["buckets"];if(!s)return!1;const i=[];return s.filter((t=>t.key.length>e.id.length||e.id.startsWith("/"))).sort(((e,t)=>e.key>t.key)).map((t=>{if(i.some((e=>t.key.startsWith(e))))return null;const s=e.id.startsWith("/")?t.key:t.key.slice(e.id.length+1);return i.push(t.key),{id:t.key,text:`${s}/ (${t.doc_count})`,depth:e.depth+1,index:e.index,values:[t.key],children:!0}})).filter((e=>null!==e))}))},handleTreeClick(e,t,s){0!==t.depth&&(this.setPathText(t.id),this.$refs["path-modal"].hide(),this.$emit("search")),s()}}},Ia=Ma,La=(0,p.Z)(Ia,ka,za,!1,null,"b24a99e6",null),Da=La.exports,Oa=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"sizeSlider"}})},Pa=[],qa=s(4211),Ea=s.n(qa),Aa={name:"SizeSlider",mounted(){const e=document.getElementById("sizeSlider"),t=Ea().create(e,{start:[this.$store.state.sizeMin?this.$store.state.sizeMin:0,this.$store.state.sizeMax?this.$store.state.sizeMax:5e10],tooltips:[!0,!0],behaviour:"drag-tap",connect:!0,range:{min:0,"10%":1e6,"20%":1e7,"50%":5e9,max:5e10},format:{to:e=>e>=5e10?"50G+":z(Math.round(e)),from:e=>e}});J(e,10," - "),e.querySelectorAll(".noUi-connect")[0].classList.add("slider-color0"),t.on("set",((e,t,s)=>{0===t?this.$store.commit("setSizeMin",0===s[0]?void 0:Math.round(s[0])):this.$store.commit("setSizeMax",s[1]>=5e10?void 0:Math.round(s[1]))}))}},Ha=Aa,Ua=(0,p.Z)(Ha,Oa,Pa,!1,null,null,null),Ba=Ua.exports,Fa=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.$store.state.optUseDatePicker?s("div",[s("b-row",[s("b-col",{attrs:{sm:"6"}},[s("b-form-datepicker",{staticClass:"mb-2",attrs:{"value-as-date":"","date-format-options":{year:"numeric",month:"2-digit",day:"2-digit"},locale:e.$store.state.optLang,value:e.dateMin},on:{input:e.setDateMin}})],1),s("b-col",{attrs:{sm:"6"}},[s("b-form-datepicker",{staticClass:"mb-2",attrs:{"value-as-date":"","date-format-options":{year:"numeric",month:"2-digit",day:"2-digit"},locale:e.$store.state.optLang,value:e.dateMax},on:{input:e.setDateMax}})],1)],1)],1):s("div",[s("b-row",[s("b-col",{staticStyle:{height:"70px"}},[s("div",{attrs:{id:"dateSlider"}})])],1)],1)},Na=[],Ra={name:"DateSlider",methods:{setDateMin(e){const t=Math.ceil(+e/1e3);this.$store.commit("setDateMin",t)},setDateMax(e){const t=Math.ceil(+e/1e3);this.$store.commit("setDateMax",t)}},computed:{dateMin(){const e=this.$store.state.dateMin?this.$store.state.dateMin:this.$store.state.dateBoundsMin;return new Date(1e3*e)},dateMax(){const e=this.$store.state.dateMax?this.$store.state.dateMax:this.$store.state.dateBoundsMax;return new Date(1e3*e)}},mounted(){this.$store.subscribe((e=>{if("setDateBoundsMax"===e.type){const e=document.getElementById("dateSlider");if(null===e)return;if(e.children.length>0)return;const t=this.$store.state.dateBoundsMax,s=this.$store.state.dateBoundsMin,i=Ea().create(e,{start:[this.$store.state.dateMin?this.$store.state.dateMin:s,this.$store.state.dateMax?this.$store.state.dateMax:t],tooltips:[!0,!0],behaviour:"drag-tap",connect:!0,range:{min:s,max:t},format:{to:e=>I(e),from:e=>e}});J(e,10," - ",!0),e.querySelectorAll(".noUi-connect")[0].classList.add("slider-color0"),i.on("set",((e,i,a)=>{0===i?this.$store.commit("setDateMin",a[0]===s?void 0:Math.round(a[0])):this.$store.commit("setDateMax",a[1]>=t?void 0:Math.round(a[1]))}))}}))}},Va=Ra,Za=(0,p.Z)(Va,Fa,Na,!1,null,null,null),Qa=Za.exports,Ga=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.showSearchBar?s("b-input-group",{attrs:{id:"tag-picker-filter-bar"}},[s("b-form-input",{attrs:{value:e.filter,placeholder:e.$t("tagFilter")},on:{input:function(t){return e.onFilter(t)}}})],1):e._e(),s("div",{attrs:{id:"tagTree"}})],1)},ja=[];function Wa(e){return e._tree.defaultState.forEach((function(t,s){e.state(s,t)})),e}function Ya(e,t,s,i,a){return i.state(e)!==t&&(i._tree.batch(),i._tree.config.nodes.resetStateOnRestore&&"restored"===s&&Wa(i),i.state(e,t),i._tree.emit("node."+s,i,!1),a&&i.hasChildren()&&i.children.recurseDown((function(i){Ya(e,t,s,i)})),i.markDirty(),i._tree.end()),i}function Ka(e,t,s,i){const a=t.split("."),o={id:s,count:i,text:1!==a.length?a[0]:`${a[0]} (${i})`,name:a[0],children:[],blur:function(){},select:function(){return this.state("selected",!0),this.check()},deselect:function(){return this.state("selected",!1),this.uncheck()},uncheck:function(){return Ya("checked",!1,"unchecked",this,!1),this.state("indeterminate",!1),this.hasParent()&&this.getParent().refreshIndeterminateState(),this._tree.end(),this},check:function(){return Ya("checked",!0,"checked",this,!1),this.hasParent()&&this.getParent().refreshIndeterminateState(),this._tree.end(),this}};let r=!1;e.forEach((e=>{e.name===o.name&&(r=!0,1!==a.length?Ka(e.children,a.slice(1).join("."),s,i):(console.error("FIXME: Duplicate tag?"),console.trace(e)))})),r||(1!==a.length?(Ka(o.children,a.slice(1).join("."),s,i),e.push(o)):e.push(o))}var Ja={name:"TagPicker",props:["showSearchBar"],data(){return{tagTree:null,loadedFromArgs:!1,filter:""}},mounted(){this.$store.subscribe((e=>{"setUiMimeMap"===e.type&&null===this.tagTree?(this.initializeTree(),this.updateTree()):"busUpdateTags"===e.type&&window.setTimeout(this.updateTree,2e3)}))},methods:{onFilter(e){this.filter=e,this.tagTree.search(e)},initializeTree(){const e=[];this.tagTree=new(Yi())({selection:{mode:"checkbox",autoDeselect:!1},checkbox:{autoCheckChildren:!1},data:e}),new(Ji())(this.tagTree,{target:"#tagTree"}),this.tagTree.on("node.state.changed",this.handleTreeClick)},updateTree(){const e=[];F.getTags().then((t=>{t.forEach((t=>Ka(e,t.id,t.id,t.count))),this.tagTree.removeAll(),this.tagTree.addNodes(e),this.$store.state._onLoadSelectedTags.length>0&&!this.loadedFromArgs&&this.$store.state._onLoadSelectedTags.forEach((e=>{this.tagTree.node(e).select(),this.loadedFromArgs=!0}))}))},handleTreeClick(e,t){"indeterminate"!==t&&"collapsed"!==t&&"rendered"!==t&&"focused"!==t&&"matched"!==t&&"hidden"!==t&&this.$store.commit("setSelectedTags",D(this.tagTree))}}},Xa=Ja,eo=(0,p.Z)(Xa,Ga,ja,!1,null,"f1619968",null),to=eo.exports,so=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-list-group",{staticClass:"mt-3"},e._l(e.docs,(function(e){return s("DocListItem",{key:e._id,attrs:{doc:e}})})),1)},io=[],ao=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-list-group-item",{staticClass:"flex-column align-items-start mb-2",class:{"sub-document":e.doc._props.isSubDocument},on:{mouseenter:function(t){return e.onTnEnter()},mouseleave:function(t){return e.onTnLeave()}}},[s("DocInfoModal",{attrs:{show:e.showInfo,doc:e.doc},on:{close:function(t){e.showInfo=!1}}}),s("div",{staticClass:"media ml-2"},[e.doc._props.hasThumbnail?s("div",{staticClass:"align-self-start mr-2 wrapper-sm"},[s("div",{staticClass:"img-wrapper"},[e.doc._props.isPlayableVideo?s("div",{staticClass:"play"},[s("svg",{attrs:{viewBox:"0 0 494.942 494.942",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{d:"m35.353 0 424.236 247.471-424.236 247.471z"}})])]):e._e(),e.doc._props.isPlayableImage||e.doc._props.isPlayableVideo?s("img",{staticClass:"pointer fit-sm",attrs:{src:e.doc._props.isGif&&e.hover?"f/"+e.doc._id:"t/"+e.doc._source.index+"/"+e.doc._id,alt:""},on:{click:function(t){return e.onThumbnailClick()}}}):s("img",{staticClass:"fit-sm",attrs:{src:"t/"+e.doc._source.index+"/"+e.doc._id,alt:""}})])]):s("div",{staticClass:"file-icon-wrapper"},[s("FileIcon")],1),s("div",{staticClass:"doc-line ml-3"},[s("div",{staticStyle:{display:"flex"}},[s("span",{staticClass:"info-icon",on:{click:function(t){e.showInfo=!0}}}),s("DocFileTitle",{attrs:{doc:e.doc}})],1),s("ContentDiv",{attrs:{doc:e.doc}}),s("div",{staticClass:"path-row"},[s("div",{staticClass:"path-line",domProps:{innerHTML:e._s(e.path())}}),s("TagContainer",{attrs:{hit:e.doc}})],1),e.doc._source.pages||e.doc._source.author?s("div",{staticClass:"path-row text-muted"},[e.doc._source.pages?s("span",[e._v(e._s(e.doc._source.pages)+" "+e._s(e.doc._source.pages>1?e.$t("pages"):e.$t("page")))]):e._e(),e.doc._source.author&&e.doc._source.pages?s("span",{staticClass:"mx-1"},[e._v("-")]):e._e(),e.doc._source.author?s("span",[e._v(e._s(e.doc._source.author))]):e._e()]):e._e()],1)])],1)},oo=[],ro=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("svg",{staticClass:"file-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50"}},[s("path",{attrs:{fill:"currentColor",d:"M 7 2 L 7 48 L 43 48 L 43 14.59375 L 42.71875 14.28125 L 30.71875 2.28125 L 30.40625 2 Z M 9 4 L 29 4 L 29 16 L 41 16 L 41 46 L 9 46 Z M 31 5.4375 L 39.5625 14 L 31 14 Z"}})])},no=[],lo={name:"FileIcon"},co=lo,uo=(0,p.Z)(co,ro,no,!1,null,"0cea94dd",null),ho=uo.exports,po={name:"DocListItem",components:{FileIcon:ho,ContentDiv:ui,DocInfoModal:oi,DocFileTitle:Us,TagContainer:Os},props:["doc"],data(){return{hover:!1,showInfo:!1}},methods:{async onThumbnailClick(){this.$store.commit("setUiLightboxSlide",this.doc._seq),await this.$store.dispatch("showLightbox")},path(){return this.doc.highlight?this.doc.highlight["path.text"]?this.doc.highlight["path.text"]+"/":this.doc.highlight["path.nGram"]?this.doc.highlight["path.nGram"]+"/":this.doc._source.path+"/":this.doc._source.path+"/"},onTnEnter(){this.hover=!0},onTnLeave(){this.hover=!1}}},mo=po,go=(0,p.Z)(mo,ao,oo,!1,null,"57715a3b",null),fo=go.exports,bo=i["default"].extend({name:"DocList",components:{DocListItem:fo},props:["docs","append"],mounted(){window.addEventListener("scroll",(()=>{const e=400,t=document.getElementById("app");window.innerHeight+window.scrollY>=t.offsetHeight-e&&this.append()}))}}),vo=bo,xo=(0,p.Z)(vo,so,io,!1,null,null,null),yo=xo.exports,_o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-modal",{attrs:{visible:e.show,size:"lg","hide-footer":!0,static:"",title:e.$t("help.help")},on:{close:function(t){return e.$emit("close")},hide:function(t){return e.$emit("close")}}},[s("h2",[e._v(e._s(e.$t("help.simpleSearch")))]),s("table",{staticClass:"table"},[s("tbody",[s("tr",[s("td",[s("code",[e._v("+")])]),s("td",[e._v(e._s(e.$t("help.and")))])]),s("tr",[s("td",[s("code",[e._v("|")])]),s("td",[e._v(e._s(e.$t("help.or")))])]),s("tr",[s("td",[s("code",[e._v("-")])]),s("td",[e._v(e._s(e.$t("help.not")))])]),s("tr",[s("td",[s("code",[e._v('""')])]),s("td",[e._v(e._s(e.$t("help.quotes")))])]),s("tr",[s("td",[s("code",[e._v(e._s(e.$t("help.term"))+"*")])]),s("td",[e._v(e._s(e.$t("help.prefix")))])]),s("tr",[s("td",[s("code",[e._v("(")]),e._v(" "+e._s(e.$t("and"))+" "),s("code",[e._v(")")])]),s("td",[e._v(e._s(e.$t("help.parens")))])]),s("tr",[s("td",[s("code",[e._v(e._s(e.$t("help.term"))+"~N")])]),s("td",[e._v(e._s(e.$t("help.tildeTerm")))])]),s("tr",[s("td",[s("code",[e._v('"..."~N')])]),s("td",[e._v(e._s(e.$t("help.tildePhrase")))])])])]),s("p",{domProps:{innerHTML:e._s(e.$t("help.example1"))}}),s("p",{domProps:{innerHTML:e._s(e.$t("help.defaultOperator"))}}),s("p",{domProps:{innerHTML:e._s(e.$t("help.fuzzy"))}}),s("br"),s("p",{domProps:{innerHTML:e._s(e.$t("help.moreInfoSimple"))}}),s("p"),s("h2",[e._v(e._s(e.$t("help.advancedSearch")))]),s("p",{domProps:{innerHTML:e._s(e.$t("help.moreInfoAdvanced"))}})])},To=[],So={name:"HelpDialog",props:["show"]},wo=So,$o=(0,p.Z)(wo,_o,To,!1,null,"0872e493",null),Co=$o.exports,ko=i["default"].extend({components:{HelpDialog:Co,DocList:yo,TagPicker:to,DateSlider:Qa,SizeSlider:Ba,PathTree:Da,ResultsCard:Ca,MimePicker:sa,Lightbox:Bi,DocCardWall:Di,IndexPicker:ls,SearchBar:Wt,Preloader:xe},data:()=>({loading:!1,uiLoading:!0,search:void 0,docs:[],docIds:new Set,docChecksums:new Set,searchBusy:!1,Sist2Query:xs,showHelp:!1}),computed:{...(0,y.Se)(["indices","optDisplay"])},mounted(){window.ontouchend=()=>this.$store.commit("busTouchEnd"),window.ontouchcancel=this.$store.commit("busTouchEnd"),this.search=_s()((async e=>{e&&await this.clearResults(),await this.searchNow(xs.searchQuery())}),350,{leading:!1}),this.$store.dispatch("loadFromArgs",this.$route).then((()=>{this.$store.subscribe((()=>this.$store.dispatch("updateArgs",this.$router))),this.$store.subscribe((e=>{if(["setSizeMin","setSizeMax","setDateMin","setDateMax","setSearchText","setPathText","setSortMode","setOptHighlight","setOptFragmentSize","setFuzzy","setSize","setSelectedIndices","setSelectedMimeTypes","setSelectedTags","setOptQueryMode","setOptSearchInPath"].includes(e.type)){if(this.searchBusy)return;this.search(!0)}}))})),this.setIndices(this.$store.getters["sist2Info"].indices),this.getDateRange().then((e=>{this.setDateBoundsMin(e.min),this.setDateBoundsMax(e.max);const t=!this.$store.state.optUpdateMimeMap;F.getMimeTypes(xs.searchQuery(t)).then((({mimeMap:e})=>{this.$store.commit("setUiMimeMap",e),this.uiLoading=!1,this.search(!0)}))}))},methods:{...(0,y.nv)({setSist2Info:"setSist2Info"}),...(0,y.OI)({setIndices:"setIndices",setDateBoundsMin:"setDateBoundsMin",setDateBoundsMax:"setDateBoundsMax",setTags:"setTags"}),showErrorToast(){this.$bvToast.toast(this.$t("toast.esConnErr"),{title:this.$t("toast.esConnErrTitle"),noAutoHide:!0,toaster:"b-toaster-bottom-right",headerClass:"toast-header-error",bodyClass:"toast-body-error"})},showSyntaxErrorToast:function(){this.$bvToast.toast(this.$t("toast.esQueryErr"),{title:this.$t("toast.esQueryErrTitle"),noAutoHide:!0,toaster:"b-toaster-bottom-right",headerClass:"toast-header-warning",bodyClass:"toast-body-warning"})},async searchNow(e){this.searchBusy=!0,await this.$store.dispatch("incrementQuerySequence"),this.$store.commit("busSearch"),F.esQuery(e).then((async e=>{await this.handleSearch(e),this.searchBusy=!1})).catch((e=>{500===e.response.status&&"advanced"===this.$store.state.optQueryMode?this.showSyntaxErrorToast():this.showErrorToast()}))},async clearResults(){this.docs=[],this.docIds.clear(),this.docChecksums.clear(),await this.$store.dispatch("clearResults"),this.$store.commit("setUiReachedScrollEnd",!1)},async handleSearch(e){(0==e.hits.hits.length||e.hits.hits.length<this.$store.state.optSize)&&this.$store.commit("setUiReachedScrollEnd",!0),e.hits.hits=e.hits.hits.filter((e=>!this.docIds.has(e._id))),this.$store.state.optHideDuplicates&&(e.hits.hits=e.hits.hits.filter((e=>{if(!("checksum"in e._source))return!0;const t=!this.docChecksums.has(e._source.checksum);return this.docChecksums.add(e._source.checksum),t})));for(const t of e.hits.hits)(t._props.isPlayableImage||t._props.isPlayableVideo)&&(t._seq=await this.$store.dispatch("getKeySequence"),this.$store.commit("addLightboxSource",{source:`f/${t._id}`,thumbnail:t._props.hasThumbnail?`t/${t._source.index}/${t._id}`:null,caption:{component:Qi,props:{hit:t}},type:t._props.isVideo?"video":"image"}));await this.$store.dispatch("remountLightbox"),this.$store.commit("setLastQueryResult",e),this.docs.push(...e.hits.hits),e.hits.hits.forEach((e=>this.docIds.add(e._id)))},getDateRange(){return F.esQuery({aggs:{dateMin:{min:{field:"mtime"}},dateMax:{max:{field:"mtime"}}},size:0}).then((e=>({min:e.aggregations.dateMin.value,max:e.aggregations.dateMax.value})))},appendFunc(){this.$store.state.uiReachedScrollEnd||!this.search||this.searchBusy||this.searchNow(xs.searchQuery())}},beforeRouteUpdate(e,t,s){this.$store.state.uiLightboxIsOpen?(this.$store.commit("_setUiShowLightbox",!1),s(!1)):s()}}),zo=ko,Mo=(0,p.Z)(zo,Nt,Rt,!1,null,null,null),Io=Mo.exports,Lo=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container",staticStyle:{"margin-left":"auto","margin-right":"auto"}},[e.loading?s("Preloader"):!e.loading&&e.found?s("b-card",[s("b-card-title",{attrs:{title:e.doc._source.name+e.ext(e.doc)}},[e._v(" "+e._s(e.doc._source.name+e.ext(e.doc))+" ")]),s("div",{staticStyle:{position:"relative","margin-left":"auto","margin-right":"auto","text-align":"center"}},[s("FullThumbnail",{attrs:{doc:e.doc,"small-badge":!1},on:{onThumbnailClick:function(t){return e.onThumbnailClick()}}})],1),e.doc._props.isAudio?s("audio",{ref:"audio",staticClass:"audio-fit fit",attrs:{preload:"none",controls:"",type:e.doc._source.mime,src:"f/"+e.doc._id}}):e._e(),e.doc?s("InfoTable",{attrs:{doc:e.doc}}):e._e(),e.doc._source.content?s("div",{staticClass:"content-div"},[e._v(e._s(e.doc._source.content))]):e._e()],1):s("div",[s("b-card",[s("b-card-title",[e._v(e._s(e.$t("filePage.notFound")))])],1)],1)],1)},Do=[],Oo=i["default"].extend({name:"FilePage",components:{FullThumbnail:Si,Preloader:xe,InfoTable:Ws},data(){return{loading:!0,found:!1,doc:null}},methods:{ext:S,onThumbnailClick(){window.open(`/f/${this.doc._id}`,"_blank")},findByCustomField(e,t){return{query:{bool:{must:[{match:{[e]:t}}]}},size:1}},findById(e){return{query:{bool:{must:[{match:{_id:e}}]}},size:1}},findByName(e){return{query:{bool:{must:[{match:{name:e}}]}},size:1}}},mounted(){let e=null;this.$route.query.byId?e=this.findById(this.$route.query.byId):this.$route.query.byName?e=this.findByName(this.$route.query.byName):this.$route.query.by&&this.$route.query.q&&(e=this.findByCustomField(this.$route.query.by,this.$route.query.q)),e?F.esQuery(e).then((e=>{0===e.hits.hits.length?this.found=!1:(this.doc=e.hits.hits[0],this.found=!0),this.loading=!1})):(this.loading=!1,this.found=!1)}}),Po=Oo,qo=(0,p.Z)(Po,Lo,Do,!1,null,"1b2febf4",null),Eo=qo.exports;const Ao=(e,t,s)=>{const i=hs(),a=()=>{if(i.isAuthenticated)return s();i.loginWithRedirect({appState:{targetUrl:e.fullPath}})};if(!i.loading)return a();i.$watch("loading",(e=>{if(!1===e)return a()}))};i["default"].use(Q.Z);let Ho=!1;function Uo(e){Ho=e}const Bo=(e,t,s)=>{if(Ho)return Ao(e,t,s);s()},Fo=[{path:"/",name:"SearchPage",component:Io,beforeEnter:Bo},{path:"/stats",name:"Stats",component:ot},{path:"/config",name:"Configuration",component:Ft},{path:"/file",name:"File",component:Eo}],No=new Q.Z({mode:"hash",base:"",routes:Fo,scrollBehavior(e,t,s){}});var Ro=No,Vo=s(7152),Zo={en:{filePage:{notFound:"Not found"},searchBar:{simple:"Search",advanced:"Advanced search",fuzzy:"Fuzzy"},addTag:"Add",deleteTag:"Delete",download:"Download",and:"and",page:"page",pages:"pages",mimeTypes:"Media types",tags:"Tags",tagFilter:"Filter tags",help:{simpleSearch:"Simple search",advancedSearch:"Advanced search",help:"Help",term:"<TERM>",and:"AND operator",or:"OR operator",not:"negates a single term",quotes:"will match the enclosed sequence of terms in that specific order",prefix:"will match any term with a given prefix when used at the end of a word",parens:"used to group expressions",tildeTerm:"match a term with a given edit distance",tildePhrase:"match a phrase with a given number of allowed intervening unmatched words",example1:'For example: <code>"fried eggs" +(eggplant | potato) -frittata</code> will match the phrase <i>fried eggs</i> and either <i>eggplant</i> or <i>potato</i>, but will ignore results containing <i>frittata</i>.',defaultOperator:"When neither <code>+</code> or <code>|</code> is specified, the default operator is <code>+</code> (and).",fuzzy:"When the <b>Fuzzy</b> option is checked, partial matches based on 3-grams are also returned.",moreInfoSimple:'For more information, see <a target="_blank" rel="noreferrer" href="//www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-simple-query-string-query.html">Elasticsearch documentation</a>',moreInfoAdvanced:'For documentation about the advanced search mode, see <a target="_blank" rel="noreferrer" href="//www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-query-string-query.html#query-string-syntax">Elasticsearch documentation</a>'},config:"Configuration",configDescription:"Configuration is saved in real time for this browser.",configReset:"Reset configuration",searchOptions:"Search options",treemapOptions:"Treemap options",displayOptions:"Display options",opt:{lang:"Language",highlight:"Enable highlighting",fuzzy:"Set fuzzy search by default",searchInPath:"Enable matching query against document path",suggestPath:"Enable auto-complete in path filter bar",fragmentSize:"Highlight context size in characters",queryMode:"Search mode",displayMode:"Display",columns:"Column count",treemapType:"Treemap type",treemapTiling:"Treemap tiling",treemapColorGroupingDepth:"Treemap color grouping depth (flat)",treemapColor:"Treemap color (cascaded)",treemapSize:"Treemap size",theme:"Theme",lightboxLoadOnlyCurrent:"Do not preload full-size images for adjacent slides in image viewer.",slideDuration:"Slide duration",resultSize:"Number of results per page",tagOrOperator:"Use OR operator when specifying multiple tags.",hideDuplicates:"Hide duplicate results based on checksum",hideLegacy:"Hide the 'legacyES' Elasticsearch notice",updateMimeMap:"Update the Media Types tree in real time",useDatePicker:"Use a Date Picker component rather than a slider",vidPreviewInterval:"Video preview frame duration in ms",simpleLightbox:"Disable animations in image viewer",showTagPickerFilter:"Display the tag filter bar"},queryMode:{simple:"Simple",advanced:"Advanced"},lang:{en:"English",fr:"Français","zh-CN":"简体中文"},displayMode:{grid:"Grid",list:"List"},columns:{auto:"Auto"},treemapType:{cascaded:"Cascaded",flat:"Flat (compact)"},treemapSize:{small:"Small",medium:"Medium",large:"Large",xLarge:"xLarge",xxLarge:"xxLarge",custom:"Custom"},treemapTiling:{binary:"Binary",squarify:"Squarify",slice:"Slice",dice:"Dice",sliceDice:"Slice & Dice"},theme:{light:"Light",black:"Black"},hit:"hit",hits:"hits",details:"Details",stats:"Stats",queryTime:"Query time",totalSize:"Total size",pathBar:{placeholder:"Filter path",modalTitle:"Select path"},debug:"Debug information",debugDescription:"Information useful for debugging. If you encounter bugs or have suggestions for new features, please submit a new issue <a href='https://github.com/simon987/sist2/issues/new/choose'>here</a>.",tagline:"Tagline",toast:{esConnErrTitle:"Elasticsearch connection error",esConnErr:"sist2 web module encountered an error while connecting to Elasticsearch. See server logs for more information.",esQueryErrTitle:"Query error",esQueryErr:"Could not parse or execute query, please check the Advanced search documentation. See server logs for more information.",dupeTagTitle:"Duplicate tag",dupeTag:"This tag already exists for this document.",copiedToClipboard:"Copied to clipboard"},saveTagModalTitle:"Add tag",saveTagPlaceholder:"Tag name",confirm:"Confirm",indexPickerPlaceholder:"Select an index",sort:{relevance:"Relevance",dateAsc:"Date (Older first)",dateDesc:"Date (Newer first)",sizeAsc:"Size (Smaller first)",sizeDesc:"Size (Larger first)",nameAsc:"Name (A-z)",nameDesc:"Name (Z-a)",random:"Random"},d3:{mimeCount:"File count distribution by media type",mimeSize:"Size distribution by media type",dateHistogram:"File modification time distribution",sizeHistogram:"File size distribution"},indexPicker:{selectNone:"Select None",selectAll:"Select All",selectedIndex:"selected index",selectedIndices:"selected indices"}},fr:{filePage:{notFound:"Ficher introuvable"},searchBar:{simple:"Recherche",advanced:"Recherche avancée",fuzzy:"Approximatif"},addTag:"Ajouter",deleteTag:"Supprimer",download:"Télécharger",and:"et",page:"page",pages:"pages",mimeTypes:"Types de médias",tags:"Tags",tagFilter:"Filtrer les tags",help:{simpleSearch:"Recherche simple",advancedSearch:"Recherche avancée",help:"Aide",term:"<TERME>",and:"opérator ET",or:"opérator OU",not:"exclut un terme",quotes:"recherche la séquence de termes dans cet ordre spécifique.",prefix:"lorsqu'utilisé à la fin d'un mot, recherche tous les termes avec le préfixe donné.",parens:"utilisé pour regrouper des expressions",tildeTerm:"recherche un terme avec une distance d'édition donnée",tildePhrase:"recherche une phrase avec un nombre donné de mots intermédiaires tolérés",example1:'Par exemple: <code>"fried eggs" +(eggplant | potato) -frittata</code> va rechercher la phrase <i>fried eggs</i> et soit <i>eggplant</i> ou <i>potato</i>, mais vas exlure les résultats qui contiennent <i>frittata</i>.',defaultOperator:"Lorsqu'aucun des opérateurs <code>+</code> ou <code>|</code> sont spécifiés, l'opérateur par défaut est <code>+</code> (ET).",fuzzy:"Lorsque l'option <b>Approximatif</b> est activée, les résultats partiels basés sur les trigrammes sont également inclus.",moreInfoSimple:'Pour plus d\'information, voir <a target="_blank" rel="noreferrer" href="//www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-simple-query-string-query.html">documentation Elasticsearch</a>',moreInfoAdvanced:'Pour plus d\'information sur la recherche avancée, voir <a target="_blank" rel="noreferrer" href="//www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-query-string-query.html#query-string-syntax">documentation Elasticsearch</a>'},config:"Configuration",configDescription:"La configuration est enregistrée en temps réel pour ce navigateur.",configReset:"Réinitialiser la configuration",searchOptions:"Options de recherche",treemapOptions:"Options du Treemap",displayOptions:"Options d'affichage",opt:{lang:"Langue",highlight:"Activer le surlignage",fuzzy:"Activer la recherche approximative par défaut",searchInPath:"Activer la recherche dans le chemin des documents",suggestPath:"Activer l'autocomplétion dans la barre de filtre de chemin",fragmentSize:"Longueur du contexte de surlignage, en nombre de caractères",queryMode:"Mode de recherche",displayMode:"Affichage",columns:"Nombre de colonnes",treemapType:"Type de Treemap",treemapTiling:"Treemap tiling",treemapColorGroupingDepth:"Groupage de couleur du Treemap (plat)",treemapColor:"Couleur du Treemap (en cascade)",treemapSize:"Taille du Treemap",theme:"Thème",lightboxLoadOnlyCurrent:"Désactiver le chargement des diapositives adjacentes pour le visualiseur d'images",slideDuration:"Durée des diapositives",resultSize:"Nombre de résultats par page",tagOrOperator:"Utiliser l'opérateur OU lors de la spécification de plusieurs tags",hideDuplicates:"Masquer les résultats en double",hideLegacy:"Masquer la notice 'legacyES' Elasticsearch",updateMimeMap:"Mettre à jour l'arbre de Types de médias en temps réel",useDatePicker:"Afficher un composant « Date Picker » plutôt qu'un slider",vidPreviewInterval:"Durée des images d'aperçu video en millisecondes",simpleLightbox:"Désactiver les animations du visualiseur d'images",showTagPickerFilter:"Afficher le filtre dans l'onglet Tags"},queryMode:{simple:"Simple",advanced:"Avancé"},lang:{en:"English",fr:"Français","zh-CN":"简体中文"},displayMode:{grid:"Grille",list:"Liste"},columns:{auto:"Auto"},treemapType:{cascaded:"En cascade",flat:"Plat (compact)"},treemapSize:{small:"Petit",medium:"Moyen",large:"Grand",xLarge:"xGrand",xxLarge:"xxGrand",custom:"Personnalisé"},treemapTiling:{binary:"Binary",squarify:"Squarify",slice:"Slice",dice:"Dice",sliceDice:"Slice & Dice"},theme:{light:"Clair",black:"Noir"},hit:"résultat",hits:"résultats",details:"Détails",stats:"Stats",queryTime:"Durée de la requête",totalSize:"Taille totale",pathBar:{placeholder:"Filtrer le chemin",modalTitle:"Sélectionner le chemin"},debug:"Information de débogage",debugDescription:"Informations utiles pour le débogage\nSi vous rencontrez des bogues ou si vous avez des suggestions pour de nouvelles fonctionnalités, veuillez soumettre un nouvel Issue <a href='https://github.com/simon987/sist2/issues/new/choose'>ici</a>.",tagline:"Tagline",toast:{esConnErrTitle:"Erreur de connexion Elasticsearch",esConnErr:"Le module web a rencontré une erreur lors de la connexion à Elasticsearch. Consultez les journaux du serveur pour plus d'informations..",esQueryErrTitle:"Erreur de requête",esQueryErr:"Impossible d'analyser ou d'exécuter la requête, veuillez consulter la documentation sur la recherche avancée. Voir les journaux du serveur pour plus d'informations.",dupeTagTitle:"Tag en double",dupeTag:"Ce tag existe déjà pour ce document.",copiedToClipboard:"Copié dans le presse-papier"},saveTagModalTitle:"Ajouter un tag",saveTagPlaceholder:"Nom du tag",confirm:"Confirmer",indexPickerPlaceholder:"Sélectionner un index",sort:{relevance:"Pertinence",dateAsc:"Date (Plus ancient)",dateDesc:"Date (Plus récent)",sizeAsc:"Taille (Plus petit)",sizeDesc:"Taille (Plus grand)",nameAsc:"Nom (A-z)",nameDesc:"Nom (Z-a)",random:"Aléatoire"},d3:{mimeCount:"Distribution du nombre de fichiers par type de média",mimeSize:"Distribution des tailles de fichiers par type de média",dateHistogram:"Distribution des dates de modification",sizeHistogram:"Distribution des tailles de fichier"},indexPicker:{selectNone:"Sélectionner aucun",selectAll:"Sélectionner tout",selectedIndex:"index sélectionné",selectedIndices:"index sélectionnés"}},"zh-CN":{filePage:{notFound:"未找到"},searchBar:{simple:"搜索",advanced:"高级搜索",fuzzy:"模糊搜索"},addTag:"添加",deleteTag:"删除",download:"下载",and:"与",page:"页",pages:"页",mimeTypes:"文件类型",tags:"标签",tagFilter:"筛选标签",help:{simpleSearch:"简易搜索",advancedSearch:"高级搜索",help:"帮助",term:"<关键词>",and:"与操作",or:"或操作",not:"反选单个关键词",quotes:"括起来的部分视为一个关键词，保序",prefix:"在词尾使用时，匹配前缀",parens:"表达式编组",tildeTerm:"匹配编辑距离以内的关键词",tildePhrase:"匹配短语，容忍一些非匹配词",example1:'例如: <code>"番茄" +(炒蛋 | 牛腩) -饭</code> 将匹配短语 <i>番茄炒蛋</i>、<i>炒蛋</i> 或者 <i>牛腩</i>，而忽略任何带有<i>饭</i>的关键词.',defaultOperator:"表达式中无<code>+</code>或者<code>|</code>时，默认使用<code>+</code>（与操作）。",fuzzy:"选中<b>模糊搜索</b>选项时，返回部分匹配的结果（3-grams)。",moreInfoSimple:'详细信息：<a target="_blank" rel="noreferrer" href="//www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-simple-query-string-query.html">Elasticsearch文档</a>',moreInfoAdvanced:'高级搜索模式文档：<a target="_blank" rel="noreferrer" href="//www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-query-string-query.html#query-string-syntax">Elasticsearch文档</a>'},config:"配置",configDescription:"配置在此浏览器中实时保存。",configReset:"重置所有设置",searchOptions:"搜索选项",treemapOptions:"树状图选项",displayOptions:"显示选项",opt:{lang:"语言",highlight:"启用高亮",fuzzy:"默认使用模糊搜索",searchInPath:"匹配文档路径",suggestPath:"搜索框启用自动补全",fragmentSize:"高亮上下文大小",queryMode:"搜索模式",displayMode:"显示",columns:"列数",treemapType:"树状图类属性",treemapTiling:"树状图平铺",treemapColorGroupingDepth:"树状图颜色编组深度（展开）",treemapColor:"树状图颜色（折叠）",treemapSize:"树状图大小",theme:"主题",lightboxLoadOnlyCurrent:"在图片查看器中，不要预读相邻的全图",slideDuration:"幻灯片时长",resultSize:"每页结果数",tagOrOperator:"使用或操作（OR）匹配多个标签。",hideDuplicates:"使用校验码隐藏重复结果",hideLegacy:"隐藏'legacyES' Elasticsearch 通知",updateMimeMap:"媒体类型树的实时更新",useDatePicker:"使用日期选择器组件而不是滑块",vidPreviewInterval:"视频预览帧的持续时间，以毫秒为单位",simpleLightbox:"在图片查看器中，禁用动画",showTagPickerFilter:"显示标签过滤栏"},queryMode:{simple:"简单",advanced:"高级"},lang:{en:"English",fr:"Français","zh-CN":"简体中文"},displayMode:{grid:"网格",list:"列表"},columns:{auto:"自动"},treemapType:{cascaded:"折叠",flat:"平铺（紧凑）"},treemapSize:{small:"小",medium:"中",large:"大",xLarge:"加大",xxLarge:"加加大",custom:"自订"},treemapTiling:{binary:"Binary",squarify:"Squarify",slice:"Slice",dice:"Dice",sliceDice:"Slice & Dice"},theme:{light:"亮",black:"暗"},hit:"命中",hits:"命中",details:"详细信息",stats:"统计信息",queryTime:"查询时间",totalSize:"总大小",pathBar:{placeholder:"过滤路径",modalTitle:"选择路径"},debug:"调试信息",debugDescription:"对调试除错有用的信息。 若您遇到bug或者想建议新功能，请提交新Issue到<a href='https://github.com/simon987/sist2/issues/new/choose'>这里</a>.",tagline:"标签栏",toast:{esConnErrTitle:"Elasticsearch连接错误",esConnErr:"sist2 web 模块连接Elasticsearch出错。查看服务日志以获取更多信息。",esQueryErrTitle:"查询错误",esQueryErr:"无法识别或执行查询，请查阅高级搜索文档。查看服务日志以获取更多信息。",dupeTagTitle:"重复标签",dupeTag:"该标签已存在于此文档。",copiedToClipboard:"复制到剪贴板"},saveTagModalTitle:"增加标签",saveTagPlaceholder:"标签名",confirm:"确认",indexPickerPlaceholder:"选择一个索引",sort:{relevance:"相关度",dateAsc:"日期（由旧到新）",dateDesc:"日期（由新到旧）",sizeAsc:"大小（从小到大）",sizeDesc:"大小（从大到小）",nameAsc:"名字（A-z）",nameDesc:"名字 （Z-a）",random:"随机"},d3:{mimeCount:"各类文件数量分布",mimeSize:"各类文件大小分布",dateHistogram:"文件修改时间分布",sizeHistogram:"文件大小分布"},indexPicker:{selectNone:"清空",selectAll:"全选",selectedIndex:"选中索引",selectedIndices:"选中索引"}}};function Qo(e,t,s){Uo(!0),i["default"].use(ms,{domain:e,clientId:t,audience:s,onRedirectCallback:e=>{}})}i["default"].config.productionTip=!1,i["default"].prototype.$auth=null,i["default"].config.productionTip=!1,i["default"].use(Vo.Z),i["default"].use(Q.Z);const Go=new Vo.Z({locale:"en",messages:Zo});new i["default"]({router:Ro,store:fs,i18n:Go,render:e=>e(Z)}).$mount("#app")}},t={};function s(i){var a=t[i];if(void 0!==a)return a.exports;var o=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(o.exports,o,o.exports,s),o.loaded=!0,o.exports}s.m=e,function(){var e=[];s.O=function(t,i,a,o){if(!i){var r=1/0;for(d=0;d<e.length;d++){i=e[d][0],a=e[d][1],o=e[d][2];for(var n=!0,l=0;l<i.length;l++)(!1&o||r>=o)&&Object.keys(s.O).every((function(e){return s.O[e](i[l])}))?i.splice(l--,1):(n=!1,o<r&&(r=o));if(n){e.splice(d--,1);var c=a();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[i,a,o]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={826:0};s.O.j=function(t){return 0===e[t]};var t=function(t,i){var a,o,r=i[0],n=i[1],l=i[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(a in n)s.o(n,a)&&(s.m[a]=n[a]);if(l)var d=l(s)}for(t&&t(i);c<r.length;c++)o=r[c],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(d)},i=self["webpackChunksist2"]=self["webpackChunksist2"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=s.O(void 0,[998],(function(){return s(5978)}));i=s.O(i)})();