(function(t){function e(e){for(var s,i,r=e[0],c=e[1],l=e[2],d=0,b=[];d<r.length;d++)i=r[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&b.push(o[i][0]),o[i]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(e);while(b.length)b.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],s=!0,r=1;r<n.length;r++){var c=n[r];0!==o[c]&&(s=!1)}s&&(a.splice(e--,1),t=i(i.s=n[0]))}return t}var s={},o={app:0},a=[];function i(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=s,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("85ec")},1577:function(t,e,n){},"2a76":function(t,e,n){},3829:function(t,e,n){},4672:function(t,e,n){"use strict";n("1577")},4678:function(t,e,n){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf755","./tlh.js":"cf755","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function o(t){var e=a(t);return n(e)}function a(t){if(!n.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}o.keys=function(){return Object.keys(s)},o.resolve=a,t.exports=o,o.id="4678"},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("2b0e"),o=n("5f5b"),a=n("b1e0"),i=(n("ab8b"),n("177c"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("NavBar"),n("b-container",{staticClass:"pt-4"},[n("b-alert",{attrs:{show:"",dismissible:"",variant:"info"}},[t._v(" This is a beta version of sist2-admin. Please submit bug reports, usability issues and feature requests to the "),n("a",{attrs:{href:"https://github.com/simon987/sist2/issues/new/choose",target:"_blank"}},[t._v("issue tracker on Github")]),t._v(". Thank you! ")]),n("router-view")],1)],1)}),r=[],c=(n("d3b7"),n("25f0"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-navbar",[n("b-navbar-brand",{attrs:{to:"/"}},[n("Sist2Icon")],1),n("b-button",{staticClass:"ml-auto",attrs:{to:"/task",variant:"link"}},[t._v(t._s(t.$t("tasks")))])],1)}),l=[],u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"27.868069mm",height:"7.6446671mm",viewBox:"0 0 27.868069 7.6446671"}},[n("g",{attrs:{transform:"translate(-4.5018313,-4.1849793)"}},[n("g",{staticStyle:{fill:"currentColor","fill-opacity":"1",stroke:"none","stroke-width":"0.26458332"}},[n("path",{staticStyle:{"stroke-width":"0.26458332"},attrs:{d:"m 6.3153296,11.829646 q -0.7717014,0 -1.8134983,-0.337619 v -0.916395 q 1.0128581,0.511252 1.803852,0.511252 0.5643067,0 0.901926,-0.236334 0.3376194,-0.236333 0.3376194,-0.63183 0,-0.3424428 -0.2845649,-0.5498376 Q 6.980922,9.4566645 6.3635609,9.3264399 L 5.9921796,9.2492698 Q 5.2301245,9.0949295 4.8732126,8.7428407 4.5211238,8.3859288 4.5211238,7.7733908 q 0,-0.7765245 0.5305447,-1.1961372 0.5305447,-0.4196126 1.5096409,-0.4196126 0.829579,0 1.6061036,0.3183268 V 7.3441319 Q 7.4101809,6.9004036 6.5854251,6.9004036 q -1.1671984,0 -1.1671984,0.7958171 0,0.2604492 0.1012858,0.4147895 0.1012858,0.1495171 0.3858507,0.2556261 0.2845649,0.1012858 0.8392253,0.2122179 l 0.3569119,0.067524 q 1.3408312,0.2652724 1.3408312,1.4614098 0,0.80064 -0.5691298,1.263661 -0.5691298,0.458197 -1.5578722,0.458197 z"}}),n("path",{staticStyle:{"stroke-width":"0.26458332"},attrs:{d:"m 11.943927,5.3087694 q -0.144694,0 -0.144694,-0.144694 V 4.3296733 q 0,-0.144694 0.144694,-0.144694 h 0.694531 q 0.144694,0 0.144694,0.144694 v 0.8344021 q 0,0.144694 -0.144694,0.144694 z M 13.5645,11.728361 q -0.795817,0 -1.234722,-0.511253 -0.434082,-0.516075 -0.434082,-1.4469398 V 6.9823969 H 10.714028 V 6.2878656 h 2.069124 v 3.4823026 q 0,0.5884228 0.221864,0.8971028 0.221865,0.308681 0.6463,0.308681 h 1.036974 v 0.752409 z"}}),n("path",{staticStyle:{"stroke-width":"0.26458332"},attrs:{d:"m 18.209178,11.829646 q -0.771701,0 -1.813498,-0.337619 v -0.916395 q 1.012858,0.511252 1.803852,0.511252 0.564306,0 0.901926,-0.236334 0.337619,-0.236333 0.337619,-0.63183 0,-0.3424428 -0.284565,-0.5498376 Q 18.87477,9.4566645 18.257409,9.3264399 l -0.371381,-0.07717 Q 17.123973,9.0949295 16.767061,8.7428407 16.414972,8.3859288 16.414972,7.7733908 q 0,-0.7765245 0.530545,-1.1961372 0.530545,-0.4196126 1.509641,-0.4196126 0.829579,0 1.606103,0.3183268 v 0.8681641 q -0.757232,-0.4437283 -1.581988,-0.4437283 -1.167198,0 -1.167198,0.7958171 0,0.2604492 0.101286,0.4147895 0.101286,0.1495171 0.385851,0.2556261 0.284565,0.1012858 0.839225,0.2122179 l 0.356912,0.067524 q 1.340831,0.2652724 1.340831,1.4614098 0,0.80064 -0.56913,1.263661 -0.56913,0.458197 -1.557872,0.458197 z"}}),n("path",{staticStyle:{"stroke-width":"0.26458332"},attrs:{d:"m 25.207545,11.709068 q -0.993565,0 -1.408355,-0.40032 -0.409966,-0.405143 -0.409966,-1.3794164 V 6.9775737 H 21.947107 V 6.2878656 h 1.442117 V 4.8746874 l 0.887457,-0.3858507 v 1.7990289 h 2.016069 v 0.6897081 h -2.016069 v 2.9517579 q 0,0.5932454 0.226687,0.8344024 0.226687,0.236333 0.790994,0.236333 h 0.998388 v 0.709001 z"}}),n("path",{staticStyle:{"stroke-width":"0.26458332"},attrs:{d:"m 27.995317,11.043476 q 0,-0.178456 0.120578,-0.299035 0.274919,-0.289388 0.651123,-0.684885 0.376205,-0.4003199 0.805464,-0.8681638 0.327973,-0.356912 0.491959,-0.5353679 0.16881,-0.1832791 0.255626,-0.2845649 0.09164,-0.1012858 0.178456,-0.2073948 0.255626,-0.3086805 0.405144,-0.5257215 0.15434,-0.2170411 0.250803,-0.4292589 0.168809,-0.3762045 0.168809,-0.7524089 0,-0.5980686 -0.352089,-0.935688 -0.356911,-0.3424425 -0.979096,-0.3424425 -0.863341,0 -1.938899,0.6414768 V 4.8361023 q 0.491959,-0.2363335 0.979096,-0.3569119 0.47749,-0.1205783 0.945334,-0.1205783 0.501606,0 0.940511,0.1350477 0.438905,0.1350478 0.766878,0.4244358 0.289388,0.2556261 0.463021,0.6270074 0.173633,0.3665582 0.173633,0.829579 0,0.4726671 -0.212218,0.9501574 -0.106109,0.2411567 -0.274919,0.4726671 -0.163986,0.2266873 -0.424435,0.540191 Q 31.270225,8.501684 31.077299,8.718725 30.884374,8.9357661 30.628748,9.2106847 30.445469,9.4084332 30.286305,9.5675966 30.131965,9.72676 29.958332,9.9003928 29.7847,10.069203 29.558012,10.300713 29.336148,10.5274 29.012998,10.869843 h 3.356901 v 0.819932 h -4.374582 z"}})])])])},d=[],b={name:"Sist2Icon"},p=b,f=n("2877"),h=Object(f["a"])(p,u,d,!1,null,null,null),m=h.exports,g={name:"NavBar",components:{Sist2Icon:m},methods:{tagline:function(){return this.$store.state.sist2Info.tagline},sist2Version:function(){return this.$store.state.sist2Info.version},isDebug:function(){return this.$store.state.sist2Info.debug},isLegacy:function(){return this.$store.state.sist2Info.esVersionLegacy},hideLegacy:function(){return this.$store.state.optHideLegacy}}},v=g,_=(n("4672"),Object(f["a"])(v,c,l,!1,null,"27bc1d68",null)),k=_.exports,j=n("d4ec"),$=n("bee2"),x=(n("99af"),n("bc3a")),w=n.n(x),y=function(){function t(){Object(j["a"])(this,t),this.baseUrl=window.location.protocol+"//"+window.location.host}return Object($["a"])(t,[{key:"getJobs",value:function(){return w.a.get("".concat(this.baseUrl,"/api/job/"))}},{key:"getFrontends",value:function(){return w.a.get("".concat(this.baseUrl,"/api/frontend/"))}},{key:"getTasks",value:function(){return w.a.get("".concat(this.baseUrl,"/api/task/"))}},{key:"killTask",value:function(t){return w.a.post("".concat(this.baseUrl,"/api/task/").concat(t,"/kill"))}},{key:"getTaskHistory",value:function(){return w.a.get("".concat(this.baseUrl,"/api/task/history"))}},{key:"getJob",value:function(t){return w.a.get("".concat(this.baseUrl,"/api/job/").concat(t))}},{key:"getFrontend",value:function(t){return w.a.get("".concat(this.baseUrl,"/api/frontend/").concat(t))}},{key:"startFrontend",value:function(t){return w.a.post("".concat(this.baseUrl,"/api/frontend/").concat(t,"/start"))}},{key:"stopFrontend",value:function(t){return w.a.post("".concat(this.baseUrl,"/api/frontend/").concat(t,"/stop"))}},{key:"updateJob",value:function(t,e){return w.a.put("".concat(this.baseUrl,"/api/job/").concat(t),e)}},{key:"updateFrontend",value:function(t,e){return w.a.put("".concat(this.baseUrl,"/api/frontend/").concat(t),e)}},{key:"runJob",value:function(t){return w.a.get("".concat(this.baseUrl,"/api/job/").concat(t,"/run"))}},{key:"deleteJob",value:function(t){return w.a.delete("".concat(this.baseUrl,"/api/job/").concat(t))}},{key:"deleteFrontend",value:function(t){return w.a.delete("".concat(this.baseUrl,"/api/frontend/").concat(t))}},{key:"createJob",value:function(t){return w.a.post("".concat(this.baseUrl,"/api/job/").concat(t))}},{key:"createFrontend",value:function(t){return w.a.post("".concat(this.baseUrl,"/api/frontend/").concat(t))}},{key:"pingEs",value:function(t,e){return w.a.get("".concat(this.baseUrl,"/api/ping_es"),{params:{url:t,insecure:e}})}},{key:"getSist2AdminInfo",value:function(){return w.a.get("".concat(this.baseUrl,"/api/"))}}]),t}(),O=new y,N={components:{NavBar:k},data:function(){return{socket:null}},mounted:function(){var t=this;O.getSist2AdminInfo().then((function(e){return t.$store.commit("setSist2AdminInfo",e.data)})),this.$store.dispatch("loadBrowserSettings"),this.connectNotifications()},methods:{connectNotifications:function(){var t=this;this.socket=new WebSocket("ws://".concat(window.location.host,"/notifications")),this.socket.onopen=function(){t.socket.send("Hello from client")},this.socket.onmessage=function(e){var n=JSON.parse(e.data);n.message&&(n.messageString=t.$t(n.message).toString()),t.$store.dispatch("notify",n)}}}},S=N,T=(n("034f"),Object(f["a"])(S,i,r,!1,null,null,null)),I=T.exports,J=n("8c4f"),C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-card",[n("b-card-title",[t._v(t._s(t.$t("jobs")))]),n("b-row",[n("b-col",[n("b-input",{attrs:{id:"new-job",placeholder:t.$t("newJobName")},model:{value:t.newJobName,callback:function(e){t.newJobName=e},expression:"newJobName"}}),n("b-popover",{attrs:{show:t.showHelp,target:"new-job",placement:"top",triggers:"manual",variant:"primary",content:t.$t("newJobHelp")},on:{"update:show":function(e){t.showHelp=e}}})],1),n("b-col",[n("b-button",{attrs:{variant:"primary",disabled:!t.jobNameValid(t.newJobName)},on:{click:function(e){return t.createJob()}}},[t._v(t._s(t.$t("create"))+" ")])],1)],1),n("hr"),t.jobsLoading?n("b-progress",{attrs:{striped:"",animated:"",value:"100"}}):n("b-list-group",t._l(t.jobs,(function(t){return n("JobListItem",{key:t.name,attrs:{job:t}})})),1)],1),n("br"),n("b-card",[n("b-card-title",[t._v(t._s(t.$t("frontends")))]),n("b-row",[n("b-col",[n("b-input",{attrs:{placeholder:t.$t("newFrontendName")},model:{value:t.newFrontendName,callback:function(e){t.newFrontendName=e},expression:"newFrontendName"}})],1),n("b-col",[n("b-button",{attrs:{variant:"primary",disabled:!t.frontendNameValid(t.newFrontendName)},on:{click:function(e){return t.createFrontend()}}},[t._v(" "+t._s(t.$t("create"))+" ")])],1)],1),n("hr"),t.frontendsLoading?n("b-progress",{attrs:{striped:"",animated:"",value:"100"}}):n("b-list-group",t._l(t.frontends,(function(t){return n("FrontendListItem",{key:t.name,attrs:{frontend:t}})})),1)],1)],1)},L=[],E=(n("b0c0"),n("ac1f"),n("00b4"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-list-group-item",{staticClass:"flex-column align-items-start",attrs:{action:"",to:"job/"+t.job.name}},[n("div",{staticClass:"d-flex w-100 justify-content-between"},[n("div",[n("h5",{staticClass:"mb-1"},[t._v(" "+t._s(t.job.name)+" ")])]),n("div",[n("b-row",[n("b-col",[t.job.last_index_date?n("small",[t._v(" "+t._s(t.$t("scanned"))+" "+t._s(t.formatLastIndexDate(t.job.last_index_date)))]):n("div",[t._v(" ")])])],1),t.job.schedule_enabled?n("b-row",[n("b-col",[n("small",[n("code",[t._v(t._s(t.job.cron_expression))])])])],1):n("b-row",[n("b-col",[t._v("   ")])],1)],1)])])}),z=[],F=n("c1df"),U=n.n(F),A={name:"JobListItem",props:["job"],methods:{formatLastIndexDate:function(t){if(null===t)return"";var e=Date.parse(t);return U()(e).fromNow()}}},M=A,q=Object(f["a"])(M,E,z,!1,null,"336fc82f",null),D=q.exports;n("2ca0"),n("fb6a");function H(t){return t.startsWith("0.0.0.0")?t.slice("0.0.0.0".length):t}var R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-list-group-item",{attrs:{action:"",to:"/frontend/"+t.frontend.name}},[n("div",{staticClass:"d-flex w-100 justify-content-between"},[n("h5",{staticClass:"mb-1",staticStyle:{display:"block"}},[t._v(" "+t._s(t.frontend.name)+" "),n("b-badge",{attrs:{variant:"light"}},[t._v(t._s(t.formatBindAddress(t.frontend.web_options.bind)))])],1),n("div",[t.frontend.running?n("b-badge",{attrs:{variant:"success"}},[t._v(t._s(t.$t("online")))]):n("b-badge",{attrs:{variant:"secondary"}},[t._v(t._s(t.$t("offline")))])],1)])])},B=[],P={name:"FrontendListItem",props:["frontend"],data:function(){return{formatBindAddress:H}}},V=P,W=Object(f["a"])(V,R,B,!1,null,null,null),Q=W.exports,G={name:"Jobs",components:{JobListItem:D,FrontendListItem:Q},data:function(){return{jobsLoading:!0,newJobName:"",jobs:[],frontendsLoading:!0,frontends:[],formatBindAddress:H,newFrontendName:"",showHelp:!1}},mounted:function(){this.loading=!0,this.reload()},methods:{jobNameValid:function(t){return!this.jobs.some((function(e){return e.name===t}))&&/^[a-zA-Z0-9-_,.; ]+$/.test(t)},frontendNameValid:function(t){return!this.frontends.some((function(e){return e.name===t}))&&/^[a-zA-Z0-9-_,.; ]+$/.test(t)},reload:function(){var t=this;O.getJobs().then((function(e){t.jobs=e.data,t.jobsLoading=!1,t.showHelp=0===t.jobs.length})),O.getFrontends().then((function(e){t.frontends=e.data,t.frontendsLoading=!1}))},createJob:function(){O.createJob(this.newJobName).then(this.reload)},createFrontend:function(){O.createFrontend(this.newFrontendName).then(this.reload)}}},Y=G,Z=Object(f["a"])(Y,C,L,!1,null,null,null),K=Z.exports,X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-card",[n("b-card-title",[t._v(" ["+t._s(t.getName())+"] "+t._s(t.$t("jobTitle"))+" ")]),n("div",{staticClass:"mb-3"},[n("b-button",{staticClass:"mr-1",attrs:{variant:"primary"},on:{click:function(e){return t.runJob()}}},[t._v(t._s(t.$t("runNow")))]),n("b-button",{attrs:{variant:"danger"},on:{click:function(e){return t.deleteJob()}}},[t._v(t._s(t.$t("delete")))])],1),t.job?n("div",[t._v(" "+t._s(t.$t("status"))+": "),n("code",[t._v(t._s(t.job.status))])]):t._e(),t.loading?n("b-progress",{attrs:{striped:"",animated:"",value:"100"}}):n("b-card-body",[n("h4",[t._v(t._s(t.$t("jobOptions.title")))]),n("b-card",[n("JobOptions",{attrs:{job:t.job},on:{change:t.update}})],1),n("br"),n("h4",[t._v(t._s(t.$t("scanOptions.title")))]),n("b-card",[n("ScanOptions",{attrs:{options:t.job.scan_options},on:{change:function(e){return t.update()}}})],1),n("br"),n("h4",[t._v(t._s(t.$t("indexOptions.title")))]),n("b-card",[n("IndexOptions",{attrs:{options:t.job.index_options},on:{change:function(e){return t.update()}}})],1)],1)],1)},tt=[],et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("label",[t._v(t._s(t.$t("scanOptions.path")))]),n("b-form-input",{on:{change:function(e){return t.update()}},model:{value:t.options.path,callback:function(e){t.$set(t.options,"path",e)},expression:"options.path"}}),n("label",[t._v(t._s(t.$t("scanOptions.threads")))]),n("b-form-input",{attrs:{type:"number",min:"1"},on:{change:function(e){return t.update()}},model:{value:t.options.threads,callback:function(e){t.$set(t.options,"threads",e)},expression:"options.threads"}}),n("label",[t._v(t._s(t.$t("scanOptions.memThrottle")))]),n("b-form-input",{attrs:{type:"number",min:"0"},on:{change:function(e){return t.update()}},model:{value:t.options.mem_throttle,callback:function(e){t.$set(t.options,"mem_throttle",e)},expression:"options.mem_throttle"}}),n("label",[t._v(t._s(t.$t("scanOptions.thumbnailQuality")))]),n("b-form-input",{attrs:{type:"number",min:"1",max:"31"},on:{change:function(e){return t.update()}},model:{value:t.options.thumbnail_quality,callback:function(e){t.$set(t.options,"thumbnail_quality",e)},expression:"options.thumbnail_quality"}}),n("label",[t._v(t._s(t.$t("scanOptions.thumbnailCount")))]),n("b-form-input",{attrs:{type:"number",min:"0",max:"1000"},on:{change:function(e){return t.update()}},model:{value:t.options.thumbnail_count,callback:function(e){t.$set(t.options,"thumbnail_count",e)},expression:"options.thumbnail_count"}}),n("label",[t._v(t._s(t.$t("scanOptions.thumbnailSize")))]),n("b-form-input",{attrs:{type:"number",min:"100"},on:{change:function(e){return t.update()}},model:{value:t.options.thumbnail_size,callback:function(e){t.$set(t.options,"thumbnail_size",e)},expression:"options.thumbnail_size"}}),n("label",[t._v(t._s(t.$t("scanOptions.contentSize")))]),n("b-form-input",{attrs:{type:"number",min:"0"},on:{change:function(e){return t.update()}},model:{value:t.options.content_size,callback:function(e){t.$set(t.options,"content_size",e)},expression:"options.content_size"}}),n("label",[t._v(t._s(t.$t("scanOptions.rewriteUrl")))]),n("b-form-input",{on:{change:function(e){return t.update()}},model:{value:t.options.rewrite_url,callback:function(e){t.$set(t.options,"rewrite_url",e)},expression:"options.rewrite_url"}}),n("label",[t._v(t._s(t.$t("scanOptions.depth")))]),n("b-form-input",{attrs:{type:"number",min:"0"},on:{change:function(e){return t.update()}},model:{value:t.options.depth,callback:function(e){t.$set(t.options,"depth",e)},expression:"options.depth"}}),n("label",[t._v(t._s(t.$t("scanOptions.archive")))]),n("b-form-select",{attrs:{options:["skip","list","shallow","recurse"]},on:{change:function(e){return t.update()}},model:{value:t.options.archive,callback:function(e){t.$set(t.options,"archive",e)},expression:"options.archive"}}),n("label",[t._v(t._s(t.$t("scanOptions.archivePassphrase")))]),n("b-form-input",{on:{change:function(e){return t.update()}},model:{value:t.options.archive_passphrase,callback:function(e){t.$set(t.options,"archive_passphrase",e)},expression:"options.archive_passphrase"}}),n("label",[t._v(t._s(t.$t("scanOptions.ocrLang")))]),0!==t.selectedOcrLangs.length||t.disableOcrLang?t._e():n("b-alert",{attrs:{variant:"danger",show:""}},[t._v(t._s(t.$t("scanOptions.ocrLangAlert")))]),n("b-checkbox-group",{attrs:{disabled:t.disableOcrLang},on:{input:t.onOcrLangChange},model:{value:t.selectedOcrLangs,callback:function(e){t.selectedOcrLangs=e},expression:"selectedOcrLangs"}},t._l(t.ocrLangs,(function(e){return n("b-checkbox",{key:e,attrs:{value:e}},[t._v(t._s(e))])})),1),n("div",{staticStyle:{height:"10px"}}),n("b-form-checkbox",{on:{change:function(e){return t.update()}},model:{value:t.options.ocr_images,callback:function(e){t.$set(t.options,"ocr_images",e)},expression:"options.ocr_images"}},[t._v(" "+t._s(t.$t("scanOptions.ocrImages"))+" ")]),n("b-form-checkbox",{on:{change:function(e){return t.update()}},model:{value:t.options.ocr_ebooks,callback:function(e){t.$set(t.options,"ocr_ebooks",e)},expression:"options.ocr_ebooks"}},[t._v(" "+t._s(t.$t("scanOptions.ocrEbooks"))+" ")]),n("label",[t._v(t._s(t.$t("scanOptions.exclude")))]),n("b-form-input",{attrs:{placeholder:t.$t("scanOptions.excludePlaceholder")},on:{change:function(e){return t.update()}},model:{value:t.options.exclude,callback:function(e){t.$set(t.options,"exclude",e)},expression:"options.exclude"}}),n("div",{staticStyle:{height:"10px"}}),n("b-form-checkbox",{on:{change:function(e){return t.update()}},model:{value:t.options.fast,callback:function(e){t.$set(t.options,"fast",e)},expression:"options.fast"}},[t._v(" "+t._s(t.$t("scanOptions.fast"))+" ")]),n("b-form-checkbox",{on:{change:function(e){return t.update()}},model:{value:t.options.checksums,callback:function(e){t.$set(t.options,"checksums",e)},expression:"options.checksums"}},[t._v(" "+t._s(t.$t("scanOptions.checksums"))+" ")]),n("b-form-checkbox",{on:{change:function(e){return t.update()}},model:{value:t.options.read_subtitles,callback:function(e){t.$set(t.options,"read_subtitles",e)},expression:"options.read_subtitles"}},[t._v(" "+t._s(t.$t("scanOptions.readSubtitles"))+" ")]),n("label",[t._v(t._s(t.$t("scanOptions.memBuffer")))]),n("b-form-input",{attrs:{type:"number",min:"0"},on:{change:function(e){return t.update()}},model:{value:t.options.mem_buffer,callback:function(e){t.$set(t.options,"mem_buffer",e)},expression:"options.mem_buffer"}}),n("label",[t._v(t._s(t.$t("scanOptions.treemapThreshold")))]),n("b-form-input",{attrs:{type:"number",min:"0"},on:{change:function(e){return t.update()}},model:{value:t.options.treemap_threshold,callback:function(e){t.$set(t.options,"treemap_threshold",e)},expression:"options.treemap_threshold"}})],1)},nt=[],st=(n("a15b"),n("1276"),{name:"ScanOptions",props:["options"],data:function(){return{disableOcrLang:!1,selectedOcrLangs:[]}},computed:{ocrLangs:function(){var t;return(null===(t=this.$store.state.sist2AdminInfo)||void 0===t?void 0:t.tesseract_langs)||[]}},methods:{onOcrLangChange:function(){this.options.ocr_lang=this.selectedOcrLangs.join("+")},update:function(){this.disableOcrLang=!1===this.options.ocr_images&&!1===this.options.ocr_ebooks,this.$emit("change",this.options)}},mounted:function(){this.disableOcrLang=!1===this.options.ocr_images&&!1===this.options.ocr_ebooks,this.selectedOcrLangs=this.options.ocr_lang?this.options.ocr_lang.split("+"):[]}}),ot=st,at=Object(f["a"])(ot,et,nt,!1,null,null,null),it=at.exports,rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("label",[t._v(t._s(t.$t("indexOptions.threads")))]),n("b-form-input",{attrs:{type:"number",min:"1"},on:{change:function(e){return t.update()}},model:{value:t.options.threads,callback:function(e){t.$set(t.options,"threads",e)},expression:"options.threads"}}),n("label",[t._v(t._s(t.$t("webOptions.esUrl")))]),n("b-alert",{staticClass:"mt-1",attrs:{variant:t.esTestOk?"success":"danger",show:t.showEsTestAlert}},[t._v(" "+t._s(t.esTestMessage)+" ")]),n("b-input-group",[n("b-form-input",{on:{change:function(e){return t.update()}},model:{value:t.options.es_url,callback:function(e){t.$set(t.options,"es_url",e)},expression:"options.es_url"}}),n("b-input-group-append",[n("b-button",{attrs:{variant:"outline-primary"},on:{click:function(e){return t.testEs()}}},[t._v(t._s(t.$t("test")))])],1)],1),n("label",[t._v(t._s(t.$t("indexOptions.esIndex")))]),n("b-form-input",{on:{change:function(e){return t.update()}},model:{value:t.options.es_index,callback:function(e){t.$set(t.options,"es_index",e)},expression:"options.es_index"}}),n("br"),n("b-form-checkbox",{attrs:{disabled:!t.options.es_url.startsWith("https")},on:{change:function(e){return t.update()}},model:{value:t.options.es_insecure_ssl,callback:function(e){t.$set(t.options,"es_insecure_ssl",e)},expression:"options.es_insecure_ssl"}},[t._v(" "+t._s(t.$t("webOptions.esInsecure"))+" ")]),n("label",[t._v(t._s(t.$t("indexOptions.batchSize")))]),n("b-form-input",{attrs:{type:"number",min:"1"},on:{change:function(e){return t.update()}},model:{value:t.options.batch_size,callback:function(e){t.$set(t.options,"batch_size",e)},expression:"options.batch_size"}}),n("label",[t._v(t._s(t.$t("indexOptions.script")))]),n("b-form-textarea",{attrs:{rows:"6"},on:{change:function(e){return t.update()}},model:{value:t.options.script,callback:function(e){t.$set(t.options,"script",e)},expression:"options.script"}})],1)},ct=[],lt={name:"IndexOptions",props:["options"],data:function(){return{showEsTestAlert:!1,esTestOk:!1,esTestMessage:""}},methods:{update:function(){this.$emit("change",this.options)},testEs:function(){var t=this;O.pingEs(this.options.es_url,this.options.es_insecure_ssl).then((function(e){t.showEsTestAlert=!0,t.esTestOk=e.data.ok,t.esTestMessage=e.data.message}))}}},ut=lt,dt=Object(f["a"])(ut,rt,ct,!1,null,"54505a0b",null),bt=dt.exports,pt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-form-checkbox",{attrs:{checked:t.desktopNotificationsEnabled},on:{change:function(e){return t.updateNotifications(e)}}},[t._v(" "+t._s(t.$t("jobOptions.desktopNotifications"))+" ")]),n("b-form-checkbox",{on:{change:function(e){return t.update()}},model:{value:t.job.schedule_enabled,callback:function(e){t.$set(t.job,"schedule_enabled",e)},expression:"job.schedule_enabled"}},[t._v(" "+t._s(t.$t("jobOptions.scheduleEnabled"))+" ")]),n("label",[t._v(t._s(t.$t("jobOptions.cron")))]),n("b-form-input",{staticClass:"text-monospace",attrs:{state:t.cronValid,disabled:!t.job.schedule_enabled},on:{change:function(e){return t.update()}},model:{value:t.job.cron_expression,callback:function(e){t.$set(t.job,"cron_expression",e)},expression:"job.cron_expression"}})],1)},ft=[],ht={name:"JobOptions",props:["job"],data:function(){return{cronValid:void 0}},computed:{desktopNotificationsEnabled:function(){return this.$store.state.jobDesktopNotificationMap[this.job.name]}},methods:{updateNotifications:function(t){this.$store.dispatch("setJobDesktopNotification",{job:this.job.name,enabled:t})},update:function(){this.job.schedule_enabled?this.cronValid=/((((\d+,)+\d+|(\d+([/-])\d+)|\d+|\*) ?){5,7})/.test(this.job.cron_expression):this.cronValid=void 0,!1!==this.cronValid&&this.$emit("change",this.job)}}},mt=ht,gt=Object(f["a"])(mt,pt,ft,!1,null,null,null),vt=gt.exports,_t={name:"Job",components:{IndexOptions:bt,ScanOptions:it,JobOptions:vt},data:function(){return{loading:!0,job:null}},methods:{getName:function(){return this.$route.params.name},update:function(){O.updateJob(this.getName(),this.job)},runJob:function(){var t=this;O.runJob(this.getName()).then((function(){t.$bvToast.toast(t.$t("runJobConfirmation"),{title:t.$t("runJobConfirmationTitle"),variant:"success",toaster:"b-toaster-bottom-right"})}))},deleteJob:function(){var t=this;O.deleteJob(this.getName()).then((function(){t.$router.push("/")}))}},mounted:function(){var t=this;O.getJob(this.getName()).then((function(e){t.loading=!1,t.job=e.data}))}},kt=_t,jt=Object(f["a"])(kt,X,tt,!1,null,null,null),$t=jt.exports,xt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.tasks.length>0?n("b-card",[n("h2",[t._v(t._s(t.$t("runningTasks")))]),n("b-list-group",t._l(t.tasks,(function(t){return n("TaskListItem",{key:t.id,attrs:{task:t}})})),1)],1):t._e(),n("b-card",{staticClass:"mt-4"},[n("b-card-title",[t._v(t._s(t.$t("taskHistory")))]),n("br"),n("b-table",{attrs:{id:"task-history",items:t.historyItems,fields:t.historyFields,"current-page":t.historyCurrentPage,"tbody-tr-class":t.rowClass,"per-page":10},scopedSlots:t._u([{key:"cell(logs)",fn:function(e){return[n("router-link",{attrs:{to:"/log/"+e.item.logs}},[t._v(t._s(t.$t("logs")))])]}}])}),n("b-pagination",{attrs:{limit:"20","total-rows":t.historyItems.length,"per-page":10},model:{value:t.historyCurrentPage,callback:function(e){t.historyCurrentPage=e},expression:"historyCurrentPage"}})],1)],1)},wt=[],yt=(n("d81d"),n("5319"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-list-group-item",[n("b-row",{staticStyle:{height:"50px"}},[n("b-col",[n("h5",[t._v(t._s(t.task.display_name))])]),n("b-col",{staticClass:"shrink"},[n("router-link",{staticClass:"btn btn-link",attrs:{to:"/log/"+t.task.id}},[t._v(t._s(t.$t("logs")))])],1),n("b-col",{staticClass:"shrink"},[n("b-btn",{attrs:{variant:"link"},on:{click:function(e){return t.killTask(t.task.id)}}},[t._v(t._s(t.$t("kill")))])],1)],1),n("b-row",[n("b-col",[n("b-progress",{attrs:{max:t.task.progress.count}},[n("b-progress-bar",{attrs:{value:t.task.progress.done,"label-html":t.label,striped:!t.task.progress.waiting}})],1)],1)],1)],1)}),Ot=[],Nt={name:"TaskListItem",props:["task"],computed:{label:function(){var t=this.task.progress.count,e=this.task.progress.done;return"<span>".concat(e,"/").concat(t,"</span>")}},methods:{killTask:function(t){var e=this;O.killTask(t).then((function(){e.$bvToast.toast(e.$t("killConfirmation"),{title:e.$t("killConfirmationTitle"),variant:"success",toaster:"b-toaster-bottom-right"})}))}}},St=Nt,Tt=(n("74e5"),Object(f["a"])(St,yt,Ot,!1,null,"9b017c42",null)),It=Tt.exports,Jt={name:"Tasks",components:{TaskListItem:It},data:function(){return{loading:!0,tasks:[],taskHistory:[],timerId:null,historyFields:[{key:"name",label:this.$t("taskName")},{key:"time",label:this.$t("taskStarted")},{key:"duration",label:this.$t("taskDuration")},{key:"status",label:this.$t("taskStatus")},{key:"logs",label:this.$t("logs")}],historyCurrentPage:1,historyItems:[]}},props:{msg:String},mounted:function(){var t=this;this.loading=!0,this.update().then((function(){return t.loading=!1})),this.timerId=window.setInterval(this.update,1e3),this.updateHistory()},destroyed:function(){this.timerId&&window.clearInterval(this.timerId)},methods:{rowClass:function(t){return"failed"===t.status?"table-danger":null},updateHistory:function(){var t=this;O.getTaskHistory().then((function(e){t.historyItems=e.data.map((function(e){return{id:e.id,name:e.name,duration:t.taskDuration(e),time:U()(e.started).format("dd, MMM Do YYYY, HH:mm:ss"),logs:e.id,status:0===e.return_code?"ok":"failed"}}))}))},update:function(){var t=this;return O.getTasks().then((function(e){t.tasks=e.data}))},taskDuration:function(t){var e=U()(t.started),n=U()(t.ended),s=U.a.utc(n.diff(e)).format("HH[h] mm[m] ss[s]");return s=s.replace("00h ",""),s=s.replace(/^00m /,""),s=s.replace(/00s/,"<1s"),s=s.replace(/^0/,""),s}}},Ct=Jt,Lt=(n("fd0d"),Object(f["a"])(Ct,xt,wt,!1,null,"46960281",null)),Et=Lt.exports,zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-card",[n("b-card-title",[t._v(" "+t._s(t.name)+" "),n("small",{staticStyle:{"vertical-align":"top"}},[!t.loading&&t.frontend.running?n("b-badge",{attrs:{variant:"success"}},[t._v(t._s(t.$t("online")))]):t.loading?t._e():n("b-badge",{attrs:{variant:"secondary"}},[t._v(t._s(t.$t("offline")))])],1)]),t.loading?t._e():n("div",{staticClass:"mb-3"},[n("b-button",{staticClass:"mr-1",attrs:{disabled:t.frontend.running||!t.valid,variant:"success"},on:{click:function(e){return t.start()}}},[t._v(t._s(t.$t("start"))+" ")]),n("b-button",{staticClass:"mr-1",attrs:{disabled:!t.frontend.running,variant:"danger"},on:{click:function(e){return t.stop()}}},[t._v(t._s(t.$t("stop"))+" ")]),n("b-button",{staticClass:"mr-1",attrs:{disabled:!t.frontend.running,variant:"primary",href:t.frontendUrl,target:"_blank"}},[t._v(" "+t._s(t.$t("go"))+" ")]),n("b-button",{attrs:{variant:"danger"},on:{click:function(e){return t.deleteFrontend()}}},[t._v(t._s(t.$t("delete")))])],1),t.loading?n("b-progress",{attrs:{striped:"",animated:"",value:"100"}}):n("b-card-body",[n("h4",[t._v(t._s(t.$t("frontendOptions.title")))]),n("b-card",[n("b-form-checkbox",{on:{change:function(e){return t.update()}},model:{value:t.frontend.auto_start,callback:function(e){t.$set(t.frontend,"auto_start",e)},expression:"frontend.auto_start"}},[t._v(" "+t._s(t.$t("autoStart"))+" ")]),n("b-form-checkbox",{on:{change:function(e){return t.update()}},model:{value:t.frontend.enable_monitoring,callback:function(e){t.$set(t.frontend,"enable_monitoring",e)},expression:"frontend.enable_monitoring"}},[t._v(" "+t._s(t.$t("enableMonitoring"))+" ")]),n("label",[t._v(t._s(t.$t("extraQueryArgs")))]),n("b-form-input",{on:{change:function(e){return t.update()}},model:{value:t.frontend.extra_query_args,callback:function(e){t.$set(t.frontend,"extra_query_args",e)},expression:"frontend.extra_query_args"}}),n("label",[t._v(t._s(t.$t("customUrl")))]),n("b-form-input",{attrs:{placeholder:"http://"},on:{change:function(e){return t.update()}},model:{value:t.frontend.custom_url,callback:function(e){t.$set(t.frontend,"custom_url",e)},expression:"frontend.custom_url"}}),n("br"),t.valid?t._e():n("b-alert",{attrs:{variant:"warning",show:""}},[t._v(t._s(t.$t("frontendOptions.noJobSelectedWarning")))]),n("JobCheckboxGroup",{attrs:{frontend:t.frontend},on:{input:function(e){return t.update()}}})],1),n("br"),n("h4",[t._v(t._s(t.$t("jobOptions.title")))]),n("b-card",[n("WebOptions",{attrs:{options:t.frontend.web_options,"frontend-name":t.$route.params.name},on:{change:function(e){return t.update()}}})],1)],1)],1)},Ft=[],Ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h5",[t._v(t._s(t.$t("selectJobs")))]),t.loading?n("b-progress",{attrs:{striped:"",animated:"",value:"100"}}):n("b-form-group",[t.jobs.length>0?n("b-form-checkbox-group",{attrs:{checked:t.frontend.jobs},on:{input:function(e){t.frontend.jobs=e,t.$emit("input")}}},t._l(t.jobs,(function(e){return n("div",{key:e.name},[n("b-form-checkbox",{attrs:{disabled:"indexed"!==e.status,value:e.name}},[t._v("["+t._s(e.name)+"]")]),n("br")],1)})),0):n("div",[n("span",{staticClass:"text-muted"},[t._v(t._s(t.$t("jobOptions.noJobAvailable")))]),t._v("  "),n("router-link",{attrs:{to:"/"}},[t._v(t._s(t.$t("create")))])],1)],1)],1)},At=[],Mt={name:"JobCheckboxGroup",props:["frontend"],mounted:function(){var t=this;O.getJobs().then((function(e){t.jobs=e.data,t.loading=!1}))},data:function(){return{loading:!0}}},qt=Mt,Dt=Object(f["a"])(qt,Ut,At,!1,null,null,null),Ht=Dt.exports,Rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("label",[t._v(t._s(t.$t("webOptions.esUrl")))]),n("b-alert",{staticClass:"mt-1",attrs:{variant:t.esTestOk?"success":"danger",show:t.showEsTestAlert}},[t._v(" "+t._s(t.esTestMessage)+" ")]),n("b-input-group",[n("b-form-input",{on:{change:function(e){return t.update()}},model:{value:t.options.es_url,callback:function(e){t.$set(t.options,"es_url",e)},expression:"options.es_url"}}),n("b-input-group-append",[n("b-button",{attrs:{variant:"outline-primary"},on:{click:function(e){return t.testEs()}}},[t._v(t._s(t.$t("test")))])],1)],1),n("b-form-checkbox",{attrs:{disabled:!this.options.es_url.startsWith("https")},on:{change:function(e){return t.update()}},model:{value:t.options.es_insecure_ssl,callback:function(e){t.$set(t.options,"es_insecure_ssl",e)},expression:"options.es_insecure_ssl"}},[t._v(" "+t._s(t.$t("webOptions.esInsecure"))+" ")]),n("label",[t._v(t._s(t.$t("webOptions.esIndex")))]),n("b-form-input",{on:{change:function(e){return t.update()}},model:{value:t.options.es_index,callback:function(e){t.$set(t.options,"es_index",e)},expression:"options.es_index"}}),n("label",[t._v(t._s(t.$t("webOptions.lang")))]),n("b-form-select",{attrs:{options:["en","fr","zh-CN"]},on:{change:function(e){return t.update()}},model:{value:t.options.lang,callback:function(e){t.$set(t.options,"lang",e)},expression:"options.lang"}}),n("label",[t._v(t._s(t.$t("webOptions.bind")))]),n("b-form-input",{on:{change:function(e){return t.update()}},model:{value:t.options.bind,callback:function(e){t.$set(t.options,"bind",e)},expression:"options.bind"}}),n("label",[t._v(t._s(t.$t("webOptions.tagline")))]),n("b-form-textarea",{on:{change:function(e){return t.update()}},model:{value:t.options.tagline,callback:function(e){t.$set(t.options,"tagline",e)},expression:"options.tagline"}}),n("label",[t._v(t._s(t.$t("webOptions.auth")))]),n("b-form-input",{on:{change:function(e){return t.update()}},model:{value:t.options.auth,callback:function(e){t.$set(t.options,"auth",e)},expression:"options.auth"}}),n("label",[t._v(t._s(t.$t("webOptions.tagAuth")))]),n("b-form-input",{on:{change:function(e){return t.update()}},model:{value:t.options.tag_auth,callback:function(e){t.$set(t.options,"tag_auth",e)},expression:"options.tag_auth"}})],1)},Bt=[],Pt={name:"WebOptions",props:["options","frontendName"],data:function(){return{showEsTestAlert:!1,esTestOk:!1,esTestMessage:""}},methods:{update:function(){this.options.es_url.startsWith("https")||(this.options.es_insecure_ssl=!1),this.$emit("change",this.options)},testEs:function(){var t=this;O.pingEs(this.options.es_url,this.options.es_insecure_ssl).then((function(e){t.showEsTestAlert=!0,t.esTestOk=e.data.ok,t.esTestMessage=e.data.message}))}}},Vt=Pt,Wt=Object(f["a"])(Vt,Rt,Bt,!1,null,"0425656b",null),Qt=Wt.exports,Gt={name:"Frontend",components:{JobCheckboxGroup:Ht,WebOptions:Qt},data:function(){return{loading:!0,frontend:null}},computed:{valid:function(){return!this.loading&&this.frontend.jobs.length>0},frontendUrl:function(){return this.frontend.custom_url?this.frontend.custom_url+this.args:this.frontend.web_options.bind.startsWith("0.0.0.0")?window.location.protocol+"//"+window.location.hostname+":"+this.port+this.args:window.location.protocol+"//"+this.frontend.web_options.bind+this.args},name:function(){return this.$route.params.name},port:function(){return this.frontend.web_options.bind.split(":")[1]},args:function(){var t=this.frontend.extra_query_args;return""!==t?"#"+(t.startsWith("?")?t:"?"+t):""}},mounted:function(){var t=this;O.getFrontend(this.name).then((function(e){t.frontend=e.data,t.loading=!1}))},methods:{start:function(){this.frontend.running=!0,O.startFrontend(this.name)},stop:function(){this.frontend.running=!1,O.stopFrontend(this.name)},deleteFrontend:function(){var t=this;O.deleteFrontend(this.name).then((function(){t.$router.push("/frontends")}))},update:function(){O.updateFrontend(this.name,this.frontend)}}},Yt=Gt,Zt=Object(f["a"])(Yt,zt,Ft,!1,null,null,null),Kt=Zt.exports,Xt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-card",[n("b-card-body",[n("h4",{staticClass:"mb-3"},[t._v(t._s(t.taskId)+" "+t._s(t.$t("logs")))]),t.$store.state.sist2AdminInfo?n("div",[t._v(" "+t._s(t.$t("logFile"))+" "),n("code",[t._v(t._s(t.$store.state.sist2AdminInfo.logs_folder)+"/sist2-"+t._s(t.taskId)+".log")]),n("br"),n("br")]):t._e(),n("b-row",[n("b-col",[n("span",[t._v(t._s(t.$t("logLevel")))]),n("b-select",{attrs:{options:t.levels.slice(0,-1)},on:{input:function(e){return t.connect()}},model:{value:t.logLevel,callback:function(e){t.logLevel=e},expression:"logLevel"}})],1),n("b-col",[n("span",[t._v(t._s(t.$t("logMode")))]),n("b-select",{attrs:{options:t.modeOptions},on:{input:function(e){return t.connect()}},model:{value:t.mode,callback:function(e){t.mode=e},expression:"mode"}})],1)],1),n("div",{staticClass:"mt-3 ml-1",attrs:{id:"log-tail-output"}})],1)],1)},te=[],ee={name:"Tail",data:function(){return{logLevel:"DEBUG",levels:["DEBUG","INFO","WARNING","ERROR","ADMIN","FATAL"],socket:null,mode:"follow",modeOptions:[{text:this.$t("follow"),value:"follow"},{text:this.$t("wholeFile"),value:"wholeFile"}]}},computed:{taskId:function(){return this.$route.params.taskId}},methods:{connect:function(){var t=this,e=0,n=document.getElementById("log-tail-output");n.replaceChildren(),null!==this.socket&&this.socket.close();var s="follow"===this.mode?32:9999999999;this.socket=new WebSocket("ws://".concat(window.location.host,"/log/").concat(this.taskId,"?n=").concat(s)),this.socket.onopen=function(){t.socket.send("Hello from client")},this.socket.onmessage=function(o){var a;try{a=JSON.parse(o.data)}catch(c){return void console.error(o.data)}if(!("ping"in a)&&(void 0===a.level&&("stderr"in a?(a.level="ERROR",a.message=a["stderr"]):(a.level="ADMIN",a.message=a["sist2-admin"]),a.datetime="",a.filepath=""),!(t.levels.indexOf(a.level)<t.levels.indexOf(t.logLevel)))){var i="".concat(a.datetime," [").concat(a.level," ").concat(a.filepath,"] ").concat(a.message),r=document.createElement("span");r.setAttribute("class",a.level),r.appendChild(document.createTextNode(i)),n.appendChild(r),e+=1,"follow"===t.mode&&e>=s&&n.firstChild.remove()}}}},mounted:function(){this.connect()}},ne=ee,se=(n("b5eb"),Object(f["a"])(ne,Xt,te,!1,null,null,null)),oe=se.exports;s["default"].use(J["a"]);var ae=[{path:"/",name:"Home",component:K},{path:"/job/:name",name:"Job",component:$t},{path:"/task/",name:"Tasks",component:Et},{path:"/frontend/:name",name:"Frontend",component:Kt},{path:"/log/:taskId",name:"Tail",component:oe}],ie=new J["a"]({mode:"hash",base:"",routes:ae}),re=ie,ce=n("1da1"),le=(n("96cf"),n("e9c4"),n("2f62"));function ue(t){var e={jobDesktopNotificationMap:t.jobDesktopNotificationMap};localStorage.setItem("sist2-admin-settings",JSON.stringify(e)),console.log("SAVED"),console.log(e)}s["default"].use(le["a"]);var de=new le["a"].Store({state:{sist2AdminInfo:null,jobDesktopNotificationMap:{}},mutations:{setSist2AdminInfo:function(t,e){return t.sist2AdminInfo=e},setJobDesktopNotificationMap:function(t,e){return t.jobDesktopNotificationMap=e}},actions:{notify:function(){var t=Object(ce["a"])(regeneratorRuntime.mark((function t(e,n){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=e.state,s.jobDesktopNotificationMap[n.job]){t.next=4;break}return console.log("pass"),t.abrupt("return");case 4:new Notification(n.messageString.replace("$JOB$",n.job));case 5:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}(),setJobDesktopNotification:function(){var t=Object(ce["a"])(regeneratorRuntime.mark((function t(e,n){var s,o,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=e.state,o=n.job,a=n.enabled,!0!==a){t.next=8;break}return t.next=5,Notification.requestPermission();case 5:if(i=t.sent,"granted"===i){t.next=8;break}return t.abrupt("return",!1);case 8:return s.jobDesktopNotificationMap[o]=a,ue(s),t.abrupt("return",!0);case 11:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}(),loadBrowserSettings:function(t){var e=t.commit,n=localStorage.getItem("sist2-admin-settings");if(n){var s=JSON.parse(n);e("setJobDesktopNotificationMap",s["jobDesktopNotificationMap"])}}},modules:{}}),be=n("a925"),pe={en:{start:"Start",stop:"Stop",go:"Go",online:"online",offline:"offline",delete:"Delete",runNow:"Index now",create:"Create",test:"Test",jobTitle:"job configuration",tasks:"Tasks",runningTasks:"Running tasks",frontends:"Frontends",jobDisabled:"There is no valid index for this job",status:"Status",taskHistory:"Task history",taskName:"Task name",taskStarted:"Started",taskDuration:"Duration",taskStatus:"Status",logs:"Logs",kill:"Kill",killConfirmation:"SIGTERM signal sent to sist2 process",killConfirmationTitle:"Confirmation",follow:"Follow",wholeFile:"Whole file",logLevel:"Log level",logMode:"Follow mode",logFile:"Reading log file",jobs:"Jobs",newJobName:"New job name",newJobHelp:"Create a new job to get started!",newFrontendName:"New frontend name",scanned:"last scan",autoStart:"Start automatically",runJobConfirmationTitle:"Task queued",runJobConfirmation:"Check the Tasks page to monitor the status.",monitoring:"Monitoring",enableMonitoring:"Enable monitoring",extraQueryArgs:"Extra query arguments when launching from sist2-admin",customUrl:"Custom URL when launching from sist2-admin",selectJobs:"Select jobs",webOptions:{esUrl:"Elasticsearch URL",esIndex:"Elasticsearch index name",esInsecure:"Do not verify SSL connections to Elasticsearch.",lang:"UI Language",bind:"Listen address",tagline:"Tagline in navbar",auth:"Basic auth in user:password format",tagAuth:"Basic auth in user:password format for tagging"},scanOptions:{title:"Scanning options",path:"Path",threads:"Number of threads",memThrottle:"Total memory threshold in MiB for scan throttling",thumbnailQuality:"Thumbnail quality, on a scale of 1.0 to 31.0, 1.0 being the best",thumbnailCount:"Number of thumbnails to generate. Set a value > 1 to create video previews, set to 0 to disable thumbnails.",thumbnailSize:"Thumbnail size, in pixels",contentSize:"Number of bytes to be extracted from text documents. Set to 0 to disable",rewriteUrl:"Serve files from this url instead of from disk",depth:"Scan up to this many subdirectories deep",archive:"Archive file mode",archivePassphrase:"Passphrase for encrypted archive files",ocrLang:"Tesseract language",ocrLangAlert:"You must select at least one language",ocrEbooks:"Enable OCR'ing of ebook files",ocrImages:"Enable OCR'ing of image files",exclude:"Files that match this regex will not be scanned",excludePlaceholder:"Exclude",fast:"Only index file names & mime type",checksums:"Calculate file checksums when scanning",readSubtitles:"Read subtitles from media files",memBuffer:"Maximum memory buffer size per thread in MiB for files inside archives",treemapThreshold:"Relative size threshold for treemap"},indexOptions:{title:"Indexing options",threads:"Number of threads",esUrl:"Elasticsearch URL",esIndex:"Elasticsearch index name",esInsecure:"Do not verify SSL connections to Elasticsearch.",batchSize:"Index batch size",script:"User script"},jobOptions:{title:"Job options",cron:"Job schedule",scheduleEnabled:"Enable scheduled re-scan",noJobAvailable:"No jobs available.",desktopNotifications:"Desktop notifications"},frontendOptions:{title:"Frontend options",noJobSelectedWarning:"You must select at least one job to start this frontend"},notifications:{indexCompleted:"Task completed for [$JOB$]"}}};s["default"].use(o["a"]),s["default"].use(a["a"]),s["default"].use(be["a"]);var fe=new be["a"]({locale:"en",messages:pe});s["default"].config.productionTip=!1,new s["default"]({router:re,store:de,i18n:fe,render:function(t){return t(I)}}).$mount("#app")},"74e5":function(t,e,n){"use strict";n("3829")},"85ec":function(t,e,n){},a00e:function(t,e,n){},b5eb:function(t,e,n){"use strict";n("2a76")},fd0d:function(t,e,n){"use strict";n("a00e")}});
//# sourceMappingURL=app.b34f501e.js.map